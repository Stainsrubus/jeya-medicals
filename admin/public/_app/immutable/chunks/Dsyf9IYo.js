var k=e=>{throw TypeError(e)};var q=(e,t,r)=>t.has(e)||k("Cannot "+r);var a=(e,t,r)=>(q(e,t,"read from private field"),r?r.call(e):t.get(e)),b=(e,t,r)=>t.has(e)?k("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),h=(e,t,r,s)=>(q(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r);import{aW as X,aX as z,af as I}from"./DUB8bsv0.js";var G=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},C=typeof window>"u"||"Deno"in globalThis;function he(){}function ye(e,t){return typeof e=="function"?e(t):e}function Y(e){return typeof e=="number"&&e>=0&&e!==1/0}function de(e,t){return Math.max(e+(t||0)-Date.now(),0)}function be(e,t){return typeof e=="function"?e(t):e}function ve(e,t){return typeof e=="function"?e(t):e}function me(e,t){const{type:r="all",exact:s,fetchStatus:n,predicate:o,queryKey:y,stale:i}=e;if(y){if(s){if(t.queryHash!==Z(y,t.options))return!1}else if(!M(t.queryKey,y))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof i=="boolean"&&t.isStale()!==i||n&&n!==t.state.fetchStatus||o&&!o(t))}function we(e,t){const{exact:r,status:s,predicate:n,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(r){if(R(t.options.mutationKey)!==R(o))return!1}else if(!M(t.options.mutationKey,o))return!1}return!(s&&t.state.status!==s||n&&!n(t))}function Z(e,t){return((t==null?void 0:t.queryKeyHashFn)||R)(e)}function R(e){return JSON.stringify(e,(t,r)=>x(r)?Object.keys(r).sort().reduce((s,n)=>(s[n]=r[n],s),{}):r)}function M(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(r=>!M(e[r],t[r])):!1}function _(e,t){if(e===t)return e;const r=Q(e)&&Q(t);if(r||x(e)&&x(t)){const s=r?e:Object.keys(e),n=s.length,o=r?t:Object.keys(t),y=o.length,i=r?[]:{};let c=0;for(let w=0;w<y;w++){const l=r?w:o[w];(!r&&s.includes(l)||r)&&e[l]===void 0&&t[l]===void 0?(i[l]=void 0,c++):(i[l]=_(e[l],t[l]),i[l]===e[l]&&e[l]!==void 0&&c++)}return n===y&&c===n?e:i}return t}function pe(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function Q(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function x(e){if(!D(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!D(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function D(e){return Object.prototype.toString.call(e)==="[object Object]"}function ee(e){return new Promise(t=>{setTimeout(t,e)})}function je(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?_(e,t):t}function Se(e,t,r=0){const s=[...e,t];return r&&s.length>r?s.slice(1):s}function Ee(e,t,r=0){const s=[t,...e];return r&&s.length>r?s.slice(0,-1):s}var te=Symbol();function Fe(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===te?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var p,v,S,A,re=(A=class extends G{constructor(){super();b(this,p);b(this,v);b(this,S);h(this,S,t=>{if(!C&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){a(this,v)||this.setEventListener(a(this,S))}onUnsubscribe(){var t;this.hasListeners()||((t=a(this,v))==null||t.call(this),h(this,v,void 0))}setEventListener(t){var r;h(this,S,t),(r=a(this,v))==null||r.call(this),h(this,v,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){a(this,p)!==t&&(h(this,p,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof a(this,p)=="boolean"?a(this,p):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},p=new WeakMap,v=new WeakMap,S=new WeakMap,A),se=new re,E,m,F,N,ne=(N=class extends G{constructor(){super();b(this,E,!0);b(this,m);b(this,F);h(this,F,t=>{if(!C&&window.addEventListener){const r=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",s)}}})}onSubscribe(){a(this,m)||this.setEventListener(a(this,F))}onUnsubscribe(){var t;this.hasListeners()||((t=a(this,m))==null||t.call(this),h(this,m,void 0))}setEventListener(t){var r;h(this,F,t),(r=a(this,m))==null||r.call(this),h(this,m,t(this.setOnline.bind(this)))}setOnline(t){a(this,E)!==t&&(h(this,E,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return a(this,E)}},E=new WeakMap,m=new WeakMap,F=new WeakMap,N),$=new ne;function ie(){let e,t;const r=new Promise((n,o)=>{e=n,t=o});r.status="pending",r.catch(()=>{});function s(n){Object.assign(r,n),delete r.resolve,delete r.reject}return r.resolve=n=>{s({status:"fulfilled",value:n}),e(n)},r.reject=n=>{s({status:"rejected",reason:n}),t(n)},r}function oe(e){return Math.min(1e3*2**e,3e4)}function ue(e){return(e??"online")==="online"?$.isOnline():!0}var B=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Oe(e){return e instanceof B}function Ce(e){let t=!1,r=0,s=!1,n;const o=ie(),y=u=>{var f;s||(T(new B(u)),(f=e.abort)==null||f.call(e))},i=()=>{t=!0},c=()=>{t=!1},w=()=>se.isFocused()&&(e.networkMode==="always"||$.isOnline())&&e.canRun(),l=()=>ue(e.networkMode)&&e.canRun(),V=u=>{var f;s||(s=!0,(f=e.onSuccess)==null||f.call(e,u),n==null||n(),o.resolve(u))},T=u=>{var f;s||(s=!0,(f=e.onError)==null||f.call(e,u),n==null||n(),o.reject(u))},K=()=>new Promise(u=>{var f;n=d=>{(s||w())&&u(d)},(f=e.onPause)==null||f.call(e)}).then(()=>{var u;n=void 0,s||(u=e.onContinue)==null||u.call(e)}),P=()=>{if(s)return;let u;const f=r===0?e.initialPromise:void 0;try{u=f??e.fn()}catch(d){u=Promise.reject(d)}Promise.resolve(u).then(V).catch(d=>{var g;if(s)return;const O=e.retry??(C?0:3),L=e.retryDelay??oe,J=typeof L=="function"?L(r,d):L,W=O===!0||typeof O=="number"&&r<O||typeof O=="function"&&O(r,d);if(t||!W){T(d);return}r++,(g=e.onFail)==null||g.call(e,r,d),ee(J).then(()=>w()?void 0:K()).then(()=>{t?T(d):P()})})};return{promise:o,cancel:y,continue:()=>(n==null||n(),o),cancelRetry:i,continueRetry:c,canStart:l,start:()=>(l()?P():K().then(P),o)}}function ae(){let e=[],t=0,r=i=>{i()},s=i=>{i()},n=i=>setTimeout(i,0);const o=i=>{t?e.push(i):n(()=>{r(i)})},y=()=>{const i=e;e=[],i.length&&n(()=>{s(()=>{i.forEach(c=>{r(c)})})})};return{batch:i=>{let c;t++;try{c=i()}finally{t--,t||y()}return c},batchCalls:i=>(...c)=>{o(()=>{i(...c)})},schedule:o,setNotifyFunction:i=>{r=i},setBatchNotifyFunction:i=>{s=i},setScheduler:i=>{n=i}}}var Te=ae(),j,U,Pe=(U=class{constructor(){b(this,j)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Y(this.gcTime)&&h(this,j,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(C?1/0:5*60*1e3))}clearGcTimeout(){a(this,j)&&(clearTimeout(a(this,j)),h(this,j,void 0))}},j=new WeakMap,U);const H="$$_queryClient",Le=()=>{const e=z(H);if(!e)throw new Error("No QueryClient was found in Svelte context. Did you forget to wrap your component with QueryClientProvider?");return e},Re=e=>{X(H,e)},ce="$$_isRestoring",xe=()=>{try{const e=z(ce);return e||I(!1)}catch{return I(!1)}};export{M as A,Re as B,Pe as R,G as S,he as a,ve as b,Ce as c,ue as d,Fe as e,pe as f,Le as g,R as h,Oe as i,be as j,C as k,Y as l,se as m,Te as n,xe as o,ie as p,Z as q,je as r,te as s,de as t,me as u,we as v,Ee as w,Se as x,$ as y,ye as z};
