var vn=Object.defineProperty;var wn=(e,n,r)=>n in e?vn(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r;var Et=(e,n,r)=>wn(e,typeof n!="symbol"?n+"":n,r);import{aa as An,X as Sn,ad as at,ah as mt,ag as _e,w as X,a$ as Ge}from"./DUB8bsv0.js";import{p as Oe,n as Tt}from"./BjFnrQu3.js";import{a as Le}from"./CHqt2rTE.js";import{U as Ct,N as _n,P as On,a as En,b as Vt,e as Pt,H as Tn,c as Pn,d as Mn,i as zt,f as $e,h as kn,g as jn}from"./CSUTd-D0.js";import{b as Ut}from"./tFu-0XeD.js";import{Z as h,a as xn}from"./K85sQPP8.js";import{g as Fn}from"./CHPYNWro.js";function ma(e,n,r){An(()=>{var t=Sn(()=>n(e,r==null?void 0:r())||{});if(t!=null&&t.destroy)return()=>t.destroy()})}class Xe extends Error{constructor(n,r){super(n),this.name="DevalueError",this.path=r.join("")}}function Mt(e){return Object(e)!==e}const In=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Nn(e){const n=Object.getPrototypeOf(e);return n===Object.prototype||n===null||Object.getOwnPropertyNames(n).sort().join("\0")===In}function Dn(e){return Object.prototype.toString.call(e).slice(8,-1)}function Ln(e){switch(e){case'"':return'\\"';case"<":return"\\u003C";case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e<" "?`\\u${e.charCodeAt(0).toString(16).padStart(4,"0")}`:""}}function ve(e){let n="",r=0;const t=e.length;for(let s=0;s<t;s+=1){const i=e[s],o=Ln(i);o&&(n+=e.slice(r,s)+o,r=s+1)}return`"${r===0?e:n+e.slice(r)}"`}function $n(e){return Object.getOwnPropertySymbols(e).filter(n=>Object.getOwnPropertyDescriptor(e,n).enumerable)}const Zn=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function kt(e){return Zn.test(e)?"."+e:"["+JSON.stringify(e)+"]"}function Rn(e,n){const r=[],t=new Map,s=[];if(n)for(const l of Object.getOwnPropertyNames(n))s.push({key:l,fn:n[l]});const i=[];let o=0;function c(l){if(typeof l=="function")throw new Xe("Cannot stringify a function",i);if(t.has(l))return t.get(l);if(l===void 0)return Ct;if(Number.isNaN(l))return _n;if(l===1/0)return On;if(l===-1/0)return En;if(l===0&&1/l<0)return Vt;const y=o++;t.set(l,y);for(const{key:L,fn:U}of s){const T=U(l);if(T)return r[y]=`["${L}",${c(T)}]`,y}let g="";if(Mt(l))g=Qe(l);else{const L=Dn(l);switch(L){case"Number":case"String":case"Boolean":g=`["Object",${Qe(l)}]`;break;case"BigInt":g=`["BigInt",${l}]`;break;case"Date":g=`["Date","${!isNaN(l.getDate())?l.toISOString():""}"]`;break;case"RegExp":const{source:T,flags:te}=l;g=te?`["RegExp",${ve(T)},"${te}"]`:`["RegExp",${ve(T)}]`;break;case"Array":g="[";for(let b=0;b<l.length;b+=1)b>0&&(g+=","),b in l?(i.push(`[${b}]`),g+=c(l[b]),i.pop()):g+=Tn;g+="]";break;case"Set":g='["Set"';for(const b of l)g+=`,${c(b)}`;g+="]";break;case"Map":g='["Map"';for(const[b,k]of l)i.push(`.get(${Mt(b)?Qe(b):"..."})`),g+=`,${c(b)},${c(k)}`,i.pop();g+="]";break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const k=Pt(l.buffer);g='["'+L+'","'+k+'"]';break}case"ArrayBuffer":{g=`["ArrayBuffer","${Pt(l)}"]`;break}default:if(!Nn(l))throw new Xe("Cannot stringify arbitrary non-POJOs",i);if($n(l).length>0)throw new Xe("Cannot stringify POJOs with symbolic keys",i);if(Object.getPrototypeOf(l)===null){g='["null"';for(const b in l)i.push(kt(b)),g+=`,${ve(b)},${c(l[b])}`,i.pop();g+="]"}else{g="{";let b=!1;for(const k in l)b&&(g+=","),b=!0,i.push(kt(k)),g+=`${ve(k)}:${c(l[k])}`,i.pop();g+="}"}}}return r[y]=g,y}const m=c(e);return m<0?`${m}`:`[${r.join(",")}]`}function Qe(e){const n=typeof e;return n==="string"?ve(e):e instanceof String?ve(e.toString()):e===void 0?Ct.toString():e===0&&1/e<0?Vt.toString():n==="bigint"?`["BigInt","${e}"]`:String(e)}function it(e,n,r){return e[n]=r,"skip"}function Cn(e,n){return n.value!==void 0&&typeof n.value!="object"&&n.path.length<e.length}function ce(e,n,r={}){r.modifier||(r.modifier=s=>Cn(n,s)?void 0:s.value);const t=ie(e,n,r.modifier);if(t)return r.value===void 0||r.value(t.value)?t:void 0}function ie(e,n,r){if(!n.length)return;const t=[n[0]];let s=e;for(;s&&t.length<n.length;){const o=t[t.length-1],c=r?r({parent:s,key:String(o),value:s[o],path:t.map(m=>String(m)),isLeaf:!1,set:m=>it(s,o,m)}):s[o];if(c===void 0)return;s=c,t.push(n[t.length])}if(!s)return;const i=n[n.length-1];return{parent:s,key:String(i),value:s[i],path:n.map(o=>String(o)),isLeaf:!0,set:o=>it(s,i,o)}}function oe(e,n,r=[]){for(const t in e){const s=e[t],i=s===null||typeof s!="object",o={parent:e,key:t,value:s,path:r.concat([t]),isLeaf:i,set:m=>it(e,t,m)},c=n(o);if(c==="abort")return c;if(c==="skip")continue;if(!i){const m=oe(s,n,o.path);if(m==="abort")return m}}}function Vn(e,n){return e===n||e.size===n.size&&[...e].every(r=>n.has(r))}function jt(e,n){const r=new Map;function t(o,c){return o instanceof Date&&c instanceof Date&&o.getTime()!==c.getTime()||o instanceof Set&&c instanceof Set&&!Vn(o,c)||o instanceof File&&c instanceof File&&o!==c}function s(o){return o instanceof Date||o instanceof Set||o instanceof File}function i(o,c){const m=c?ie(c,o.path):void 0;function l(){return r.set(o.path.join(" "),o.path),"skip"}if(s(o.value)&&(!s(m==null?void 0:m.value)||t(o.value,m.value)))return l();o.isLeaf&&(!m||o.value!==m.value)&&l()}return oe(e,o=>i(o,n)),oe(n,o=>i(o,e)),Array.from(r.values())}function ne(e,n,r){const t=typeof r=="function";for(const s of n){const i=ie(e,s,({parent:o,key:c,value:m})=>((m===void 0||typeof m!="object")&&(o[c]={}),o[c]));i&&(i.parent[i.key]=t?r(s,i):r)}}function we(e){return e.toString().split(/[[\].]+/).filter(n=>n)}function Ee(e){return e.reduce((n,r)=>{const t=String(r);return typeof r=="number"||/^\d+$/.test(t)?n+=`[${t}]`:n?n+=`.${t}`:n+=t,n},"")}function Te(e){const n={}.toString.call(e).slice(8,-1);if(n=="Set")return new Set([...e].map(r=>Te(r)));if(n=="Map")return new Map([...e].map(r=>[Te(r[0]),Te(r[1])]));if(n=="Date")return new Date(e.getTime());if(n=="RegExp")return RegExp(e.source,e.flags);if(n=="Array"||n=="Object"){const r=n=="Object"?Object.create(Object.getPrototypeOf(e)):[];for(const t in e)r[t]=Te(e[t]);return r}return e}function W(e){return e&&typeof e=="object"?Te(e):e}function Ve(e,n){if(typeof e=="boolean")throw new re("Schema property cannot be defined as boolean.",n)}const xt=e=>{if(typeof e=="object"&&e!==null){if(typeof Object.getPrototypeOf=="function"){const n=Object.getPrototypeOf(e);return n===Object.prototype||n===null}return Object.prototype.toString.call(e)==="[object Object]"}return!1},G=(...e)=>e.reduce((n,r)=>{if(Array.isArray(r))throw new TypeError("Arguments provided to ts-deepmerge must be objects, not arrays.");return Object.keys(r).forEach(t=>{["__proto__","constructor","prototype"].includes(t)||(Array.isArray(n[t])&&Array.isArray(r[t])?n[t]=G.options.mergeArrays?G.options.uniqueArrayItems?Array.from(new Set(n[t].concat(r[t]))):[...n[t],...r[t]]:r[t]:xt(n[t])&&xt(r[t])?n[t]=G(n[t],r[t]):n[t]=r[t]===void 0?G.options.allowUndefinedOverrides?r[t]:n[t]:r[t])}),n},{}),st={allowUndefinedOverrides:!0,mergeArrays:!0,uniqueArrayItems:!0};G.options=st;G.withOptions=(e,...n)=>{G.options=Object.assign(Object.assign({},st),e);const r=G(...n);return G.options=st,r};const zn=["unix-time","bigint","any","symbol","set","int64"];function ae(e,n,r){var m;if(Ve(e,r),e.allOf&&e.allOf.length)return{...G.withOptions({allowUndefinedOverrides:!1},...e.allOf.map(l=>ae(l,!1,[]))),schema:e};const t=Bt(e,r),s=e.items&&t.includes("array")?(Array.isArray(e.items)?e.items:[e.items]).filter(l=>typeof l!="boolean"):void 0,i=e.additionalProperties&&typeof e.additionalProperties=="object"&&t.includes("object")?Object.fromEntries(Object.entries(e.additionalProperties).filter(([,l])=>typeof l!="boolean")):void 0,o=e.properties&&t.includes("object")?Object.fromEntries(Object.entries(e.properties).filter(([,l])=>typeof l!="boolean")):void 0,c=(m=Un(e))==null?void 0:m.filter(l=>l.type!=="null"&&l.const!==null);return{types:t.filter(l=>l!=="null"),isOptional:n,isNullable:t.includes("null"),schema:e,union:c!=null&&c.length?c:void 0,array:s,properties:o,additionalProperties:i,required:e.required}}function Bt(e,n){Ve(e,n);let r=e.const===null?["null"]:[];if(e.type&&(r=Array.isArray(e.type)?e.type:[e.type]),e.anyOf&&(r=e.anyOf.flatMap(t=>Bt(t,n))),r.includes("array")&&e.uniqueItems){const t=r.findIndex(s=>s!="array");r[t]="set"}else if(e.format&&zn.includes(e.format)&&(r.unshift(e.format),e.format=="unix-time"||e.format=="int64")){const t=r.findIndex(s=>s=="integer");r.splice(t,1)}return e.const&&e.const!==null&&typeof e.const!="function"&&r.push(typeof e.const),Array.from(new Set(r))}function Un(e){if(!(!e.anyOf||!e.anyOf.length))return e.anyOf.filter(n=>typeof n!="boolean")}function Bn(e,n=!1,r=[]){return Pe(e,n,r)}function Pe(e,n,r){var l;if(!e)throw new re("Schema was undefined",r);const t=ae(e,n,r);if(!t)return;let s;if("default"in e)if(t.types.includes("object")&&e.default&&typeof e.default=="object"&&!Array.isArray(e.default))s=e.default;else{if(t.types.length>1&&t.types.includes("unix-time")&&(t.types.includes("integer")||t.types.includes("number")))throw new re("Cannot resolve a default value with a union that includes a date and a number/integer.",r);const[y]=t.types;return qn(y,e.default)}let i;const o=()=>!t.union||t.union.length<2?!1:t.union.some(y=>y.enum)?!0:(i||(i=new Set(t.types.map(y=>["integer","unix-time"].includes(y)?"number":y))),i.size>1);let c;if(!s&&t.union){const y=t.union.filter(g=>typeof g!="boolean"&&g.default!==void 0);if(y.length==1)return Pe(y[0],n,r);if(y.length>1)throw new re("Only one default value can exist in a union, or set a default value for the whole union.",r);if(t.isNullable)return null;if(t.isOptional)return;if(o())throw new re("Multi-type unions must have a default value, or exactly one of the union types must have.",r);t.union.length&&t.types[0]=="object"&&(c===void 0&&(c={}),c=t.union.length>1?G.withOptions({allowUndefinedOverrides:!0},...t.union.map(g=>Pe(g,n,r))):Pe(t.union[0],n,r))}if(!s){if(t.isNullable)return null;if(t.isOptional)return}if(t.properties)for(const[y,g]of Object.entries(t.properties)){Ve(g,[...r,y]);const L=s&&s[y]!==void 0?s[y]:Pe(g,!((l=t.required)!=null&&l.includes(y)),[...r,y]);c===void 0&&(c={}),c[y]=L}else if(s)return s;if(e.enum)return e.enum[0];if(o())throw new re("Default values cannot have more than one type.",r);if(t.types.length==0)return;const[m]=t.types;return c??Hn(m,e.enum)}function qn(e,n){switch(e){case"set":return Array.isArray(n)?new Set(n):n;case"Date":case"date":case"unix-time":if(typeof n=="string"||typeof n=="number")return new Date(n);break;case"bigint":if(typeof n=="string"||typeof n=="number")return BigInt(n);break;case"symbol":if(typeof n=="string"||typeof n=="number")return Symbol(n);break}return n}function Hn(e,n){switch(e){case"string":return n&&n.length>0?n[0]:"";case"number":case"integer":return n&&n.length>0?n[0]:0;case"boolean":return!1;case"array":return[];case"object":return{};case"null":return null;case"Date":case"date":case"unix-time":return;case"int64":case"bigint":return BigInt(0);case"set":return new Set;case"symbol":return Symbol();case"undefined":case"any":return;default:throw new re("Schema type or format not supported, requires explicit default value: "+e)}}class F extends Error{constructor(n){super(n),Object.setPrototypeOf(this,F.prototype)}}class re extends F{constructor(r,t){super((t&&t.length?`[${Array.isArray(t)?t.join("."):t}] `:"")+r);Et(this,"path");this.path=Array.isArray(t)?t.join("."):t,Object.setPrototypeOf(this,re.prototype)}}function Kn(e,n){var s;const r={};function t(i){if("_errors"in r||(r._errors=[]),!Array.isArray(r._errors))if(typeof r._errors=="string")r._errors=[r._errors];else throw new F("Form-level error was not an array.");r._errors.push(i.message)}for(const i of e){if(!i.path||i.path.length==1&&!i.path[0]){t(i);continue}const c=!/^\d$/.test(String(i.path[i.path.length-1]))&&((s=ce(n,i.path.filter(g=>/\D/.test(String(g)))))==null?void 0:s.value),m=ie(r,i.path,({value:g,parent:L,key:U})=>(g===void 0&&(L[U]={}),L[U]));if(!m){t(i);continue}const{parent:l,key:y}=m;c?(y in l||(l[y]={}),"_errors"in l[y]?l[y]._errors.push(i.message):l[y]._errors=[i.message]):y in l?l[y].push(i.message):l[y]=[i.message]}return r}function Ft(e,n,r){return r?e:(oe(n,t=>{Array.isArray(t.value)&&t.set(void 0)}),oe(e,t=>{!Array.isArray(t.value)&&t.value!==void 0||ne(n,[t.path],t.value)}),n)}function Wn(e){return qt(e,[])}function qt(e,n){return Object.entries(e).filter(([,t])=>t!==void 0).flatMap(([t,s])=>{if(Array.isArray(s)&&s.length>0){const i=n.concat([t]);return{path:Ee(i),messages:s}}else return qt(e[t],n.concat([t]))})}function It(e){!e.flashMessage||!Ut||ot(e)&&(document.cookie=`flash=; Max-Age=0; Path=${e.flashMessage.cookiePath??"/"};`)}function ot(e){return!e.flashMessage||!Ut?!1:e.syncFlashMessage}function ut(e){const n=JSON.parse(e);return n.data&&(n.data=Pn(n.data,Mn.decoders)),n}function et(e){return HTMLElement.prototype.cloneNode.call(e)}function Jn(e,n=()=>{}){const r=async({action:s,result:i,reset:o=!0,invalidateAll:c=!0})=>{i.type==="success"&&(o&&HTMLFormElement.prototype.reset.call(e),c&&await zt()),(location.origin+location.pathname===s.origin+s.pathname||i.type==="redirect"||i.type==="error")&&$e(i)};async function t(s){var te,b,k,Me,ke;if(((te=s.submitter)!=null&&te.hasAttribute("formmethod")?s.submitter.formMethod:et(e).method)!=="post")return;s.preventDefault();const o=new URL((b=s.submitter)!=null&&b.hasAttribute("formaction")?s.submitter.formAction:et(e).action),c=(k=s.submitter)!=null&&k.hasAttribute("formenctype")?s.submitter.formEnctype:et(e).enctype,m=new FormData(e),l=(Me=s.submitter)==null?void 0:Me.getAttribute("name");l&&m.append(l,((ke=s.submitter)==null?void 0:ke.getAttribute("value"))??"");const y=new AbortController;let g=!1;const U=await n({action:o,cancel:()=>g=!0,controller:y,formData:m,formElement:e,submitter:s.submitter})??r;if(g)return;let T;try{const j=new Headers({accept:"application/json","x-sveltekit-action":"true"});c!=="multipart/form-data"&&j.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(c)?c:"application/x-www-form-urlencoded");const Ue=c==="multipart/form-data"?m:new URLSearchParams(m),Ae=await fetch(o,{method:"POST",headers:j,cache:"no-store",body:Ue,signal:y.signal});T=ut(await Ae.text()),T.type==="error"&&(T.status=Ae.status)}catch(j){if((j==null?void 0:j.name)==="AbortError")return;T={type:"error",error:j}}U({action:o,formData:m,formElement:e,update:j=>r({action:o,result:T,reset:j==null?void 0:j.reset,invalidateAll:j==null?void 0:j.invalidateAll}),result:T})}return HTMLFormElement.prototype.addEventListener.call(e,"submit",t),{destroy(){HTMLFormElement.prototype.removeEventListener.call(e,"submit",t)}}}const Ht="noCustomValidity";async function Nt(e,n){"setCustomValidity"in e&&e.setCustomValidity(""),!(Ht in e.dataset)&&Kt(e,n)}function Yn(e,n){for(const r of e.querySelectorAll("input,select,textarea,button")){if("dataset"in r&&Ht in r.dataset||!r.name)continue;const t=ie(n,we(r.name)),s=t&&typeof t.value=="object"&&"_errors"in t.value?t.value._errors:t==null?void 0:t.value;if(Kt(r,s),s)return}}function Kt(e,n){const r=n&&n.length?n.join(`
`):"";e.setCustomValidity(r),r&&e.reportValidity()}const Gn=(e,n=0)=>{const r=e.getBoundingClientRect();return r.top>=n&&r.left>=0&&r.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&r.right<=(window.innerWidth||document.documentElement.clientWidth)},Xn=(e,n=1.125,r="smooth")=>{const i=e.getBoundingClientRect().top+window.pageYOffset-window.innerHeight/(2*n);window.scrollTo({left:0,top:i,behavior:r})},Qn=["checkbox","radio","range","file"];function Dt(e){const n=!!e&&(e instanceof HTMLSelectElement||e instanceof HTMLInputElement&&Qn.includes(e.type)),r=!!e&&e instanceof HTMLSelectElement&&e.multiple,t=!!e&&e instanceof HTMLInputElement&&e.type=="file";return{immediate:n,multiple:r,file:t}}var C;(function(e){e[e.Idle=0]="Idle",e[e.Submitting=1]="Submitting",e[e.Delayed=2]="Delayed",e[e.Timeout=3]="Timeout"})(C||(C={}));const er=new Set;function tr(e,n,r){let t=C.Idle,s,i;const o=er;function c(){m(),y(t!=C.Delayed?C.Submitting:C.Delayed),s=window.setTimeout(()=>{s&&t==C.Submitting&&y(C.Delayed)},r.delayMs),i=window.setTimeout(()=>{i&&t==C.Delayed&&y(C.Timeout)},r.timeoutMs),o.add(m)}function m(){clearTimeout(s),clearTimeout(i),s=i=0,o.delete(m),y(C.Idle)}function l(){o.forEach(b=>b()),o.clear()}function y(b){t=b,n.submitting.set(t>=C.Submitting),n.delayed.set(t>=C.Delayed),n.timeout.set(t>=C.Timeout)}const g=e;function L(b){const k=b.target;r.selectErrorText&&k.select()}function U(){r.selectErrorText&&g.querySelectorAll("input").forEach(b=>{b.addEventListener("invalid",L)})}function T(){r.selectErrorText&&g.querySelectorAll("input").forEach(b=>b.removeEventListener("invalid",L))}const te=e;{U();const b=k=>{k.clearAll?l():m(),k.cancelled||setTimeout(()=>ct(te,r),1)};return Le(()=>{T(),b({cancelled:!0})}),{submitting(){c()},completed:b,scrollToFirstError(){setTimeout(()=>ct(te,r),1)},isSubmitting:()=>t===C.Submitting||t===C.Delayed}}}const ct=async(e,n)=>{if(n.scrollToError=="off")return;const r=n.errorSelector;if(!r)return;await at();let t;if(t=e.querySelector(r),!t)return;t=t.querySelector(r)??t;const s=n.stickyNavbar?document.querySelector(n.stickyNavbar):null;typeof n.scrollToError!="string"?t.scrollIntoView(n.scrollToError):Gn(t,(s==null?void 0:s.offsetHeight)??0)||Xn(t,void 0,n.scrollToError);function i(c){return typeof n.autoFocusOnError=="boolean"?n.autoFocusOnError:!/iPhone|iPad|iPod|Android/i.test(c)}if(!i(navigator.userAgent))return;let o;if(o=t,["INPUT","SELECT","BUTTON","TEXTAREA"].includes(o.tagName)||(o=o.querySelector('input:not([type="hidden"]):not(.flatpickr-input), select, textarea')),o)try{o.focus({preventScroll:!0}),n.selectErrorText&&o.tagName=="INPUT"&&o.select()}catch{}};function Re(e,n,r){const t=ie(e,n,({parent:s,key:i,value:o})=>(o===void 0&&(s[i]=/\D/.test(i)?{}:[]),s[i]));if(t){const s=r(t.value);t.parent[t.key]=s}return e}function nr(e,n,r){const t=e.form,s=we(n),i=mt(t,o=>{const c=ie(o,s);return c==null?void 0:c.value});return{subscribe(...o){const c=i.subscribe(...o);return()=>c()},update(o,c){t.update(m=>Re(m,s,o),c??r)},set(o,c){t.update(m=>Re(m,s,()=>o),c??r)}}}function rr(e,n){const r="form"in e;if(!r&&(n==null?void 0:n.taint)!==void 0)throw new F("If options.taint is set, the whole superForm object must be used as a proxy.");return r}function Ne(e,n,r){const t=we(n);if(rr(e,r))return nr(e,n,r);const s=mt(e,i=>{const o=ie(i,t);return o==null?void 0:o.value});return{subscribe(...i){const o=s.subscribe(...i);return()=>o()},update(i){e.update(o=>Re(o,t,i))},set(i){e.update(o=>Re(o,t,()=>i))}}}function ar(e,n=[]){const r=lt(e,n);if(!r)throw new re("No shape could be created for schema.",n);return r}function lt(e,n){Ve(e,n);const r=ae(e,!1,n);if(r.array||r.union){const t=r.array||[],s=r.union||[];return t.concat(s).reduce((i,o)=>{const c=lt(o,n);return c&&(i={...i??{},...c}),i},t.length?{}:void 0)}if(r.properties){const t={};for(const[s,i]of Object.entries(r.properties)){const o=lt(i,[...n,s]);o&&(t[s]=o)}return t}return r.types.includes("array")||r.types.includes("object")?{}:void 0}function ft(e){let n={};const r=Array.isArray(e);for(const[t,s]of Object.entries(e))!s||typeof s!="object"||(r?n={...n,...ft(s)}:n[t]=ft(s));return n}const De=new WeakMap,he=new WeakMap,Wt=e=>{throw e.result.error},ir={applyAction:!0,invalidateAll:!0,resetForm:!0,autoFocusOnError:"detect",scrollToError:"smooth",errorSelector:'[aria-invalid="true"],[data-invalid]',selectErrorText:!1,stickyNavbar:void 0,taintedMessage:!1,onSubmit:void 0,onResult:void 0,onUpdate:void 0,onUpdated:void 0,onError:Wt,dataType:"form",validators:void 0,customValidity:!1,clearOnSubmit:"message",delayMs:500,timeoutMs:8e3,multipleSubmits:"prevent",SPA:void 0,validationMethod:"auto"};function sr(e){return`Duplicate form id's found: "${e}". Multiple forms will receive the same data. Use the id option to differentiate between them, or if this is intended, set the warnings.duplicateId option to false in superForm to disable this warning. More information: https://superforms.rocks/concepts/multiple-forms`}let Jt=!1;try{SUPERFORMS_LEGACY&&(Jt=!0)}catch{}let be=!1;try{globalThis.STORIES&&(be=!0)}catch{}function pa(e,n){var Ot;let r,t=n??{},s;{if((t.legacy??Jt)&&(t.resetForm===void 0&&(t.resetForm=!1),t.taintedMessage===void 0&&(t.taintedMessage=!0)),be&&t.applyAction===void 0&&(t.applyAction=!1),typeof t.SPA=="string"&&(t.invalidateAll===void 0&&(t.invalidateAll=!1),t.applyAction===void 0&&(t.applyAction=!1)),s=t.validators,t={...ir,...t},(t.SPA===!0||typeof t.SPA=="object")&&t.validators===void 0&&console.warn("No validators set for superForm in SPA mode. Add a validation adapter to the validators option, or set it to false to disable this warning."),!e)throw new F("No form data sent to superForm. Make sure the output from superValidate is used (usually data.form) and that it's not null or undefined. Alternatively, an object with default values for the form can also be used, but then constraints won't be available.");l(e)===!1&&(e={id:t.id??Math.random().toString(36).slice(2,10),valid:!1,posted:!1,errors:{},data:e,shape:ft(e)}),e=e;const a=e.id=t.id??e.id,u=_e(Oe)??(be?{}:void 0);if(((Ot=t.warnings)==null?void 0:Ot.duplicateId)!==!1)if(!De.has(u))De.set(u,new Set([a]));else{const f=De.get(u);f!=null&&f.has(a)?console.warn(sr(a)):f==null||f.add(a)}if(he.has(e)||he.set(e,e),r=he.get(e),e=W(r),Le(()=>{var f;dn(),an(),yn();for(const d of Object.values(q))d.length=0;(f=De.get(u))==null||f.delete(a)}),t.dataType!=="json"){const f=(d,p)=>{if(!(!p||typeof p!="object")){if(Array.isArray(p))p.length>0&&f(d,p[0]);else if(!(p instanceof Date)&&!(p instanceof File)&&!(p instanceof FileList))throw new F(`Object found in form field "${d}". Set the dataType option to "json" and add use:enhance to use nested data structures. More information: https://superforms.rocks/concepts/nested-data`)}};for(const[d,p]of Object.entries(e.data))f(d,p)}}const i={formId:e.id,form:W(e.data),constraints:e.constraints??{},posted:e.posted,errors:W(e.errors),message:W(e.message),tainted:void 0,valid:e.valid,submitting:!1,shape:e.shape},o=i,c=X(t.id??e.id);function m(a){return Object.values(a).filter(f=>l(f)!==!1)}function l(a){return!a||typeof a!="object"||!("valid"in a&&"errors"in a&&typeof a.valid=="boolean")?!1:"id"in a&&typeof a.id=="string"?a.id:!1}const y=X(e.data),g={subscribe:y.subscribe,set:(a,u={})=>{const f=W(a);return vt(f,u.taint??!0),y.set(f)},update:(a,u={})=>y.update(f=>{const d=a(f);return vt(d,u.taint??!0),d})};function L(){return t.SPA===!0||typeof t.SPA=="object"}function U(a){var u;return a>400?a:(typeof t.SPA=="boolean"||typeof t.SPA=="string"||(u=t.SPA)==null?void 0:u.failStatus)||a}async function T(a={}){const u=a.formData??o.form;let f={},d;const p=a.adapter??t.validators;if(typeof p=="object"){if(p!=s&&!("jsonSchema"in p))throw new F('Client validation adapter found in options.validators. A full adapter must be used when changing validators dynamically, for example "zod" instead of "zodClient".');if(d=await p.validate(u),!d.success)f=Kn(d.issues,p.shape??o.shape??{});else if(a.recheckValidData!==!1)return T({...a,recheckValidData:!1})}else d={success:!0,data:{}};const w={...o.form,...u,...d.success?d.data:{}};return{valid:d.success,posted:!1,errors:f,data:w,constraints:o.constraints,message:void 0,id:o.formId,shape:o.shape}}function te(a){if(!t.onChange||!a.paths.length||a.type=="blur")return;let u;const f=a.paths.map(Ee);a.type&&a.paths.length==1&&a.formElement&&a.target instanceof Element?u={path:f[0],paths:f,formElement:a.formElement,target:a.target,set(d,p,w){Ne({form:g},d,w).set(p)},get(d){return _e(Ne(g,d))}}:u={paths:f,target:void 0,set(d,p,w){Ne({form:g},d,w).set(p)},get(d){return _e(Ne(g,d))}},t.onChange(u)}async function b(a,u=!1,f){a&&(t.validators=="clear"&&Y.update(w=>(ne(w,a.paths,void 0),w)),setTimeout(()=>te(a)));let d=!1;if(u||(t.validationMethod=="onsubmit"||t.validationMethod=="submit-only"||t.validationMethod=="onblur"&&(a==null?void 0:a.type)=="input"||t.validationMethod=="oninput"&&(a==null?void 0:a.type)=="blur")&&(d=!0),d||!a||!t.validators||t.validators=="clear"){if(a!=null&&a.paths){const w=(a==null?void 0:a.formElement)??Se();w&&k(w)}return}const p=await T({adapter:f});return p.valid&&(a.immediate||a.type!="input")&&g.set(p.data,{taint:"ignore"}),await at(),Me(p.errors,a,u),p}function k(a){const u=new Map;if(t.customValidity&&a)for(const f of a.querySelectorAll("[name]")){if(typeof f.name!="string"||!f.name.length)continue;const d="validationMessage"in f?String(f.validationMessage):"";u.set(f.name,{el:f,message:d}),Nt(f,void 0)}return u}async function Me(a,u,f){const{type:d,immediate:p,multiple:w,paths:H}=u,ue=o.errors,fe={};let R=new Map;const $=u.formElement??Se();$&&(R=k($)),oe(a,P=>{if(!Array.isArray(P.value))return;const N=[...P.path];N[N.length-1]=="_errors"&&N.pop();const ge=N.join(".");function K(){if(ne(fe,[P.path],P.value),t.customValidity&&de&&R.has(ge)){const{el:V,message:me}=R.get(ge);me!=P.value&&(setTimeout(()=>Nt(V,P.value)),R.clear())}}if(f)return K();const Fe=P.path[P.path.length-1]=="_errors",de=P.value&&H.some(V=>Fe?N&&V&&N.length>0&&N[0]==V[0]:ge==V.join("."));if(de&&t.validationMethod=="oninput"||p&&!w&&de)return K();if(w){const V=ce(_e(Y),P.path.slice(0,-1));if(V!=null&&V.value&&typeof(V==null?void 0:V.value)=="object"){for(const me of Object.values(V.value))if(Array.isArray(me))return K()}}const se=ce(ue,P.path);if(se&&se.key in se.parent)return K();if(Fe){if(t.validationMethod=="oninput"||d=="blur"&&cn(Ee(P.path.slice(0,-1))))return K()}else if(d=="blur"&&de)return K()}),Y.set(fe)}function ke(a,u={}){return u.keepFiles&&oe(o.form,f=>{if(!(f.parent instanceof FileList)&&(f.value instanceof File||f.value instanceof FileList)){const d=ce(a,f.path);(!d||!(d.key in d.parent))&&ne(a,[f.path],f.value)}}),g.set(a,u)}function j(a,u){return a&&u&&t.resetForm&&(t.resetForm===!0||t.resetForm())}function Ue(a=!0){let u=o.form,f=o.tainted;if(a){const d=hn(o.form);u=d.data;const p=d.paths;p.length&&(f=W(f)??{},ne(f,p,!1))}return{valid:o.valid,posted:o.posted,errors:o.errors,data:u,constraints:o.constraints,message:o.message,id:o.formId,tainted:f,shape:o.shape}}async function Ae(a,u){a.valid&&u&&j(a.valid,u)?Be({message:a.message,posted:!0}):xe({form:a,untaint:u,keepFiles:!0,skipFormData:t.invalidateAll=="force"}),q.onUpdated.length&&await at();for(const f of q.onUpdated)f({form:a})}function Be(a={}){a.newState&&(r.data={...r.data,...a.newState});const u=W(r);u.data={...u.data,...a.data},a.id!==void 0&&(u.id=a.id),xe({form:u,untaint:!0,message:a.message,keepFiles:!1,posted:a.posted,resetted:!0})}async function tn(a){if(a.type=="error")throw new F(`ActionResult of type "${a.type}" cannot be passed to update function.`);if(a.type=="redirect"){j(!0,!0)&&Be({posted:!0});return}if(typeof a.data!="object")throw new F("Non-object validation data returned from ActionResult.");const u=m(a.data);if(!u.length)throw new F("No form data returned from ActionResult. Make sure you return { form } in the form actions.");for(const f of u)f.id===o.formId&&await Ae(f,a.status>=200&&a.status<300)}const ye=X(i.message),qe=X(i.constraints),He=X(i.posted),pt=X(i.shape),Ke=X(e.errors),Y={subscribe:Ke.subscribe,set(a,u){return Ke.set(Ft(a,o.errors,u==null?void 0:u.force))},update(a,u){return Ke.update(f=>Ft(a(f),o.errors,u==null?void 0:u.force))},clear:()=>Y.set({})};let I=null;function nn(a){var u;I&&a&&Object.keys(a).length==1&&((u=a.paths)!=null&&u.length)&&I.target&&I.target instanceof HTMLInputElement&&I.target.type.toLowerCase()=="file"?I.paths=a.paths:I=a,setTimeout(()=>{b(I)},0)}function rn(a,u,f,d,p){I===null&&(I={paths:[]}),I.type=a,I.immediate=u,I.multiple=f,I.formElement=d,I.target=p}function yt(){return(I==null?void 0:I.paths)??[]}function an(){I=null}const Z={defaultMessage:"Leave page? Changes that you made may not be saved.",state:X(),message:t.taintedMessage,clean:W(e.data),forceRedirection:!1};function gt(){return t.taintedMessage&&!o.submitting&&!Z.forceRedirection&&bt()}function ht(a){if(!gt())return;a.preventDefault(),a.returnValue="";const{taintedMessage:u}=t,d=typeof u=="function"||u===!0?Z.defaultMessage:u;return(a||window.event).returnValue=d||Z.defaultMessage,d}async function sn(a){if(!gt())return;const{taintedMessage:u}=t,f=typeof u=="function";if(f&&a.cancel(),a.type==="leave")return;const d=f||u===!0?Z.defaultMessage:u;let p;try{p=f?await u():window.confirm(d||Z.defaultMessage)}catch{p=!1}if(p&&a.to)try{Z.forceRedirection=!0,await jn(a.to.url,{...a.to.params});return}finally{Z.forceRedirection=!1}else!p&&!f&&a.cancel()}function on(){t.taintedMessage=Z.message}function un(){return Z.state}function cn(a){if(!o.tainted)return!1;if(!a)return!!o.tainted;const u=ce(o.tainted,we(a));return!!u&&u.key in u.parent}function bt(a){if(!arguments.length)return je(o.tainted);if(typeof a=="boolean")return a;if(typeof a=="object")return je(a);if(!o.tainted||a===void 0)return!1;const u=ce(o.tainted,we(a));return je(u==null?void 0:u.value)}function je(a){if(!a)return!1;if(typeof a=="object"){for(const u of Object.values(a))if(je(u))return!0}return a===!0}function vt(a,u){if(u=="ignore")return;const f=jt(a,o.form),d=jt(a,Z.clean).map(p=>p.join());f.length&&(u=="untaint-all"||u=="untaint-form"?Z.state.set(void 0):Z.state.update(p=>(p||(p={}),ne(p,f,(w,H)=>{if(!d.includes(w.join()))return;const ue=ie(a,w),fe=ie(Z.clean,w);return ue&&fe&&ue.value===fe.value?void 0:u===!0?!0:u==="untaint"?void 0:H.value}),p)),nn({paths:f}))}function ln(a,u){Z.state.set(a),u&&(Z.clean=u)}const We=X(!1),wt=X(!1),At=X(!1),St=[Z.state.subscribe(a=>i.tainted=W(a)),g.subscribe(a=>i.form=W(a)),Y.subscribe(a=>i.errors=W(a)),c.subscribe(a=>i.formId=a),qe.subscribe(a=>i.constraints=a),He.subscribe(a=>i.posted=a),ye.subscribe(a=>i.message=a),We.subscribe(a=>i.submitting=a),pt.subscribe(a=>i.shape=a)];function fn(a){St.push(a)}function dn(){St.forEach(a=>a())}let B;function Se(){return B}function mn(a){B=document.createElement("form"),B.method="POST",B.action=a,_t(B),document.body.appendChild(B)}function pn(a){B&&(B.action=a)}function yn(){B!=null&&B.parentElement&&B.remove(),B=void 0}const gn=mt(Y,a=>a?Wn(a):[]);t.taintedMessage=void 0;function xe(a){const u=a.form,f=a.message??u.message;if((a.untaint||a.resetted)&&ln(typeof a.untaint=="boolean"?void 0:a.untaint,u.data),a.skipFormData!==!0&&ke(u.data,{taint:"ignore",keepFiles:a.keepFiles}),ye.set(f),a.resetted?Y.update(()=>({}),{force:!0}):Y.set(u.errors),c.set(u.id),He.set(a.posted??u.posted),u.constraints&&qe.set(u.constraints),u.shape&&pt.set(u.shape),i.valid=u.valid,t.flashMessage&&ot(t)){const d=t.flashMessage.module.getFlash(Oe);f&&_e(d)===void 0&&d.set(f)}}const q={onSubmit:t.onSubmit?[t.onSubmit]:[],onResult:t.onResult?[t.onResult]:[],onUpdate:t.onUpdate?[t.onUpdate]:[],onUpdated:t.onUpdated?[t.onUpdated]:[],onError:t.onError?[t.onError]:[]};window.addEventListener("beforeunload",ht),Le(()=>{window.removeEventListener("beforeunload",ht)}),kn(sn),fn(Oe.subscribe(async a=>{be&&a===void 0&&(a={status:200});const u=a.status>=200&&a.status<300;if(t.applyAction&&a.form&&typeof a.form=="object"){const f=a.form;if(f.type==="error")return;for(const d of m(f)){const p=he.has(d);d.id!==o.formId||p||(he.set(d,d),await Ae(d,u))}}else if(a.data&&typeof a.data=="object")for(const f of m(a.data)){const d=he.has(f);if(f.id!==o.formId||d)continue;t.invalidateAll==="force"&&(r.data=f.data);const p=j(f.valid,!0);xe({form:f,untaint:u,keepFiles:!p,resetted:p})}})),typeof t.SPA=="string"&&mn(t.SPA);function _t(a,u){if(t.SPA!==void 0&&a.method=="get"&&(a.method="post"),typeof t.SPA=="string"?t.SPA.length&&a.action==document.location.href&&(a.action=t.SPA):B=a,u){if(u.onError){if(t.onError==="apply")throw new F('options.onError is set to "apply", cannot add any onError events.');if(u.onError==="apply")throw new F('Cannot add "apply" as onError event in use:enhance.');q.onError.push(u.onError)}u.onResult&&q.onResult.push(u.onResult),u.onSubmit&&q.onSubmit.push(u.onSubmit),u.onUpdate&&q.onUpdate.push(u.onUpdate),u.onUpdated&&q.onUpdated.push(u.onUpdated)}on();let f;async function d(R){const $=Dt(R.target);$.immediate&&!$.file&&await new Promise(P=>setTimeout(P,0)),f=yt(),rn("input",$.immediate,$.multiple,a,R.target??void 0)}async function p(R){if(o.submitting||!f||yt()!=f)return;const $=Dt(R.target);$.immediate&&!$.file&&await new Promise(P=>setTimeout(P,0)),b({paths:f,immediate:$.multiple,multiple:$.multiple,type:"blur",formElement:a,target:R.target??void 0}),f=void 0}a.addEventListener("focusout",p),a.addEventListener("input",d),Le(()=>{a.removeEventListener("focusout",p),a.removeEventListener("input",d)});const w=tr(a,{submitting:We,delayed:wt,timeout:At},t);let H,ue;const fe=Jn(a,async R=>{let $,P=t.validators;const N={...R,jsonData(A){if(t.dataType!=="json")throw new F("options.dataType must be set to 'json' to use jsonData.");$=A},validators(A){P=A},customRequest(A){ue=A}},ge=N.cancel;let K=!1;function Je(A){const v={...A,posted:!0},_=v.valid?200:U(400),D={form:v},M=v.valid?{type:"success",status:_,data:D}:{type:"failure",status:_,data:D};setTimeout(()=>me({result:M}),0)}function Fe(){switch(t.clearOnSubmit){case"errors-and-message":Y.clear(),ye.set(void 0);break;case"errors":Y.clear();break;case"message":ye.set(void 0);break}}async function de(A,v){var _;if(A.status=v,t.onError!=="apply"){const D={result:A,message:ye,form:e};for(const M of q.onError)M!=="apply"&&(M!=Wt||!((_=t.flashMessage)!=null&&_.onError))&&await M(D)}t.flashMessage&&t.flashMessage.onError&&await t.flashMessage.onError({result:A,flashMessage:t.flashMessage.module.getFlash(Oe)}),t.applyAction&&(t.onError=="apply"?await $e(A):await $e({type:"failure",status:U(A.status),data:A}))}function se(A={resetTimers:!0}){return K=!0,A.resetTimers&&w.isSubmitting()&&w.completed({cancelled:K}),ge()}if(N.cancel=se,w.isSubmitting()&&t.multipleSubmits=="prevent")se({resetTimers:!1});else{w.isSubmitting()&&t.multipleSubmits=="abort"&&H&&H.abort(),w.submitting(),H=N.controller;for(const A of q.onSubmit)try{await A(N)}catch(v){se(),de({type:"error",error:v},500)}}if(K&&t.flashMessage&&It(t),!K){const A=!L()&&(a.noValidate||(N.submitter instanceof HTMLButtonElement||N.submitter instanceof HTMLInputElement)&&N.submitter.formNoValidate);let v;const _=async()=>await T({adapter:P});if(Fe(),A||(v=await _(),v.valid||(se({resetTimers:!1}),Je(v))),!K){t.flashMessage&&(t.clearOnSubmit=="errors-and-message"||t.clearOnSubmit=="message")&&ot(t)&&t.flashMessage.module.getFlash(Oe).set(void 0);const D="formData"in N?N.formData:N.data;if(f=void 0,L())v||(v=await _()),se({resetTimers:!1}),Je(v);else if(t.dataType==="json"){v||(v=await _());const M=W($??v.data);oe(M,O=>{if(O.value instanceof File){const x="__superform_file_"+Ee(O.path);return D.append(x,O.value),O.set(void 0)}else if(Array.isArray(O.value)&&O.value.length&&O.value.every(x=>x instanceof File)){const x="__superform_files_"+Ee(O.path);for(const J of O.value)D.append(x,J);return O.set(void 0)}}),Object.keys(M).forEach(O=>{typeof D.get(O)=="string"&&D.delete(O)});const pe=t.transport?Object.fromEntries(Object.entries(t.transport).map(([O,x])=>[O,x.encode])):void 0,Ie=V(Rn(M,pe),t.jsonChunkSize??5e5);for(const O of Ie)D.append("__superform_json",O)}if(!D.has("__superform_id")){const M=o.formId;M!==void 0&&D.set("__superform_id",M)}typeof t.SPA=="string"&&pn(t.SPA)}}function V(A,v){const _=Math.ceil(A.length/v),D=new Array(_);for(let M=0,pe=0;M<_;++M,pe+=v)D[M]=A.substring(pe,pe+v);return D}async function me(A){let v=!1;H=null;let _="type"in A.result&&"status"in A.result?A.result:{type:"error",status:U(parseInt(String(A.result.status))||500),error:A.result.error instanceof Error?A.result.error:A.result};const D=()=>v=!0,M={result:_,formEl:a,formElement:a,cancel:D},pe=be||!L()?()=>{}:Tt.subscribe(O=>{var x,J;!O||((x=O.from)==null?void 0:x.route.id)===((J=O.to)==null?void 0:J.route.id)||D()});function Ie(O,x,J){x.result={type:"error",error:O,status:U(J)}}for(const O of q.onResult)try{await O(M)}catch(x){Ie(x,M,Math.max(_.status??500,400))}if(_=M.result,!v){if((_.type==="success"||_.type==="failure")&&_.data){const O=m(_.data);if(!O.length)throw new F("No form data returned from ActionResult. Make sure you return { form } in the form actions.");for(const x of O){if(x.id!==o.formId)continue;const J={form:x,formEl:a,formElement:a,cancel:()=>v=!0,result:_};for(const Ye of q.onUpdate)try{await Ye(J)}catch(bn){Ie(bn,J,Math.max(_.status??500,400))}_=J.result,v||(t.customValidity&&Yn(a,J.form.errors),j(J.form.valid,_.type=="success")&&J.formElement.querySelectorAll('input[type="file"]').forEach(Ye=>Ye.value=""))}}v||(_.type!=="error"?(_.type==="success"&&t.invalidateAll&&await zt(),t.applyAction?await $e(_):await tn(_)):await de(_,Math.max(_.status??500,400)))}if(v&&t.flashMessage&&It(t),v||_.type!="redirect")w.completed({cancelled:v});else if(be)w.completed({cancelled:v,clearAll:!0});else{const O=Tt.subscribe(x=>{x||(setTimeout(()=>{try{O&&O()}catch{}}),w.isSubmitting()&&w.completed({cancelled:v,clearAll:!0}))})}pe()}if(!K&&ue){ge();const A=await ue(R);let v;A instanceof Response?v=ut(await A.text()):A instanceof XMLHttpRequest?v=ut(A.responseText):v=A,v.type==="error"&&(v.status=A.status),me({result:v})}return me});return{destroy:()=>{for(const[R,$]of Object.entries(q))q[R]=$.filter(P=>P===t[R]);fe.destroy()}}}function hn(a){const u=[];if(oe(a,d=>{if(d.value instanceof File)return u.push(d.path),"skip";if(Array.isArray(d.value)&&d.value.length&&d.value.every(p=>p instanceof File))return u.push(d.path),"skip"}),!u.length)return{data:a,paths:u};const f=W(a);return ne(f,u,d=>{var p;return(p=ce(r.data,d))==null?void 0:p.value}),{data:f,paths:u}}return{form:g,formId:c,errors:Y,message:ye,constraints:qe,tainted:un(),submitting:Ge(We),delayed:Ge(wt),timeout:Ge(At),options:t,capture:Ue,restore:a=>{xe({form:a,untaint:a.tainted??!0})},async validate(a,u={}){if(!t.validators)throw new F("options.validators must be set to use the validate method.");u.update===void 0&&(u.update=!0),u.taint===void 0&&(u.taint=!1),typeof u.errors=="string"&&(u.errors=[u.errors]);let f;const d=we(a);"value"in u?u.update===!0||u.update==="value"?(g.update(H=>(ne(H,[d],u.value),H),{taint:u.taint}),f=o.form):(f=W(o.form),ne(f,[d],u.value)):f=o.form;const p=await T({formData:f}),w=ce(p.errors,d);return w&&w.value&&u.errors&&(w.value=u.errors),(u.update===!0||u.update=="errors")&&Y.update(H=>(ne(H,[d],w==null?void 0:w.value),H)),w==null?void 0:w.value},async validateForm(a={}){if(!t.validators&&!a.schema)throw new F("options.validators or the schema option must be set to use the validateForm method.");const u=a.update?await b({paths:[]},!0,a.schema):T({adapter:a.schema}),f=Se();return a.update&&f&&setTimeout(()=>{f&&ct(f,{...t,scrollToError:a.focusOnError===!1?"off":t.scrollToError})},1),u||T({adapter:a.schema})},allErrors:gn,posted:He,reset(a){return Be({message:a!=null&&a.keepMessage?o.message:void 0,data:a==null?void 0:a.data,id:a==null?void 0:a.id,newState:a==null?void 0:a.newState})},submit(a){const u=Se()?Se():a&&a instanceof HTMLElement?a.closest("form"):void 0;if(!u)throw new F("use:enhance must be added to the form to use submit, or pass a HTMLElement inside the form (or the form itself) as an argument.");if(!u.requestSubmit)return u.submit();const f=a&&(a instanceof HTMLButtonElement&&a.type=="submit"||a instanceof HTMLInputElement&&["submit","image"].includes(a.type));u.requestSubmit(f?a:void 0)},isTainted:bt,enhance:_t}}function ya(e,n,r){e&&"superFormValidationLibrary"in e&&(r=n,n=e,e=null);const t=n,s=(r==null?void 0:r.defaults)??t.defaults;return{id:(r==null?void 0:r.id)??t.id??"",valid:!1,posted:!1,errors:{},data:{...s,...e},constraints:t.constraints,shape:t.shape}}new TextEncoder;function or(e){return Ze(ae(e,!1,[]),[])}function tt(...e){const n=e.filter(r=>!!r);if(n.length)return n.length==1?n[0]:G(...n)}function Ze(e,n){var t;if(!e)return;let r;if(e.union&&e.union.length){const s=e.union.map(o=>ae(o,e.isOptional,n)),i=s.map(o=>Ze(o,n));r=tt(r,...i),r&&(e.isNullable||e.isOptional||s.some(o=>(o==null?void 0:o.isNullable)||(o==null?void 0:o.isOptional)))&&delete r.required}if(e.array&&(r=tt(r,...e.array.map(s=>Ze(ae(s,e.isOptional,n),n)))),e.properties){const s={};for(const[i,o]of Object.entries(e.properties)){const c=ae(o,!((t=e.required)!=null&&t.includes(i))||o.default!==void 0,[i]),m=Ze(c,[...n,i]);typeof m=="object"&&Object.values(m).length>0&&(s[i]=m)}r=tt(r,s)}return r??ur(e)}function ur(e){const n={},r=e.schema,t=r.type,s=r.format;if(t=="integer"&&s=="unix-time"){const i=r;i.minimum!==void 0&&(n.min=new Date(i.minimum).toISOString()),i.maximum!==void 0&&(n.max=new Date(i.maximum).toISOString())}else if(t=="string"){const i=r,o=[i.pattern,...i.allOf?i.allOf.map(c=>typeof c=="boolean"?void 0:c.pattern):[]].filter(c=>c!==void 0);o.length>0&&(n.pattern=o[0]),i.minLength!==void 0&&(n.minlength=i.minLength),i.maxLength!==void 0&&(n.maxlength=i.maxLength)}else if(t=="number"||t=="integer"){const i=r;i.minimum!==void 0?n.min=i.minimum:i.exclusiveMinimum!==void 0&&(n.min=i.exclusiveMinimum+(t=="integer"?1:Number.MIN_VALUE)),i.maximum!==void 0?n.max=i.maximum:i.exclusiveMaximum!==void 0&&(n.max=i.exclusiveMaximum-(t=="integer"?1:Number.MIN_VALUE)),i.multipleOf!==void 0&&(n.step=i.multipleOf)}else if(t=="array"){const i=r;i.minItems!==void 0&&(n.min=i.minItems),i.maxItems!==void 0&&(n.max=i.maxItems)}return!e.isNullable&&!e.isOptional&&(n.required=!0),Object.keys(n).length>0?n:void 0}function cr(e){return lr(dt(ae(e,!1,[]),0,[]))}function dt(e,n,r){var o;if(!e)return"";function t(){return"  ".repeat(n)}function s(c){return c.map(m=>dt(ae(m,(e==null?void 0:e.isOptional)??!1,r),n+1,r)).filter(m=>m).join("|")}function i(){const c=[];return e!=null&&e.isNullable&&c.push("null"),e!=null&&e.isOptional&&c.push("undefined"),c.length?"|"+c.join("|"):""}if(e.union)return`Union {
  `+t()+s(e.union)+`
`+t()+"}"+i();if(e.properties){const c=[];for(const[m,l]of Object.entries(e.properties)){const y=ae(l,!((o=e.required)!=null&&o.includes(m))||l.default!==void 0,[m]);c.push(m+": "+dt(y,n+1,r))}return`Object {
  `+t()+c.join(`,
  `)+`
`+t()+"}"+i()}return e.array?"Array["+s(e.array)+"]"+i():e.types.join("|")+i()}function lr(e){let n=0;for(let r=0,t=e.length;r<t;r++){const s=e.charCodeAt(r);n=(n<<5)-n+s,n|=0}return n<0&&(n=n>>>0),n.toString(36)}function fr(e,n){if(!e||!("superFormValidationLibrary"in e))throw new F('Superforms v2 requires a validation adapter for the schema. Import one of your choice from "sveltekit-superforms/adapters" and wrap the schema with it.');return n||(n=e.jsonSchema),{...e,constraints:e.constraints??or(n),defaults:e.defaults??Bn(n),shape:ar(n),id:cr(n)}}let dr=!1;try{SUPERFORMS_LEGACY&&(dr=!0)}catch{}function ze(e){return typeof e!="object"&&typeof e!="function"||e===null}function le(){this.childBranches=new WeakMap,this.primitiveKeys=new Map,this.hasValue=!1,this.value=void 0}le.prototype.has=function(n){var r=ze(n)?this.primitiveKeys.get(n):n;return r?this.childBranches.has(r):!1};le.prototype.get=function(n){var r=ze(n)?this.primitiveKeys.get(n):n;return r?this.childBranches.get(r):void 0};le.prototype.resolveBranch=function(n){if(this.has(n))return this.get(n);var r=new le,t=this.createKey(n);return this.childBranches.set(t,r),r};le.prototype.setValue=function(n){return this.hasValue=!0,this.value=n};le.prototype.createKey=function(n){if(ze(n)){var r={};return this.primitiveKeys.set(n,r),r}return n};le.prototype.clear=function(){if(arguments.length===0)this.childBranches=new WeakMap,this.primitiveKeys.clear(),this.hasValue=!1,this.value=void 0;else if(arguments.length===1){var n=arguments[0];if(ze(n)){var r=this.primitiveKeys.get(n);r&&(this.childBranches.delete(r),this.primitiveKeys.delete(n))}else this.childBranches.delete(n)}else{var t=arguments[0];if(this.has(t)){var s=this.get(t);s.clear.apply(s,Array.prototype.slice.call(arguments,1))}}};var mr=function(n){var r=new le;function t(){var s=Array.prototype.slice.call(arguments),i=s.reduce(function(m,l){return m.resolveBranch(l)},r);if(i.hasValue)return i.value;var o=n.apply(null,s);return i.setValue(o)}return t.clear=r.clear.bind(r),t},pr=mr;const yr=Fn(pr),gr=yr,hr=Symbol("Let zodToJsonSchema decide on which parser to use"),Lt={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},br=e=>typeof e=="string"?{...Lt,name:e}:{...Lt,...e},vr=e=>{const n=br(e),r=n.name!==void 0?[...n.basePath,n.definitionPath,n.name]:n.basePath;return{...n,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(n.definitions).map(([t,s])=>[s._def,{def:s._def,path:[...n.basePath,n.definitionPath,t],jsonSchema:void 0}]))}};function Yt(e,n,r,t){t!=null&&t.errorMessages&&r&&(e.errorMessage={...e.errorMessage,[n]:r})}function E(e,n,r,t,s){e[n]=r,Yt(e,n,t,s)}function wr(){return{}}function Ar(e,n){var t,s,i;const r={type:"array"};return(t=e.type)!=null&&t._def&&((i=(s=e.type)==null?void 0:s._def)==null?void 0:i.typeName)!==h.ZodAny&&(r.items=S(e.type._def,{...n,currentPath:[...n.currentPath,"items"]})),e.minLength&&E(r,"minItems",e.minLength.value,e.minLength.message,n),e.maxLength&&E(r,"maxItems",e.maxLength.value,e.maxLength.message,n),e.exactLength&&(E(r,"minItems",e.exactLength.value,e.exactLength.message,n),E(r,"maxItems",e.exactLength.value,e.exactLength.message,n)),r}function Sr(e,n){const r={type:"integer",format:"int64"};if(!e.checks)return r;for(const t of e.checks)switch(t.kind){case"min":n.target==="jsonSchema7"?t.inclusive?E(r,"minimum",t.value,t.message,n):E(r,"exclusiveMinimum",t.value,t.message,n):(t.inclusive||(r.exclusiveMinimum=!0),E(r,"minimum",t.value,t.message,n));break;case"max":n.target==="jsonSchema7"?t.inclusive?E(r,"maximum",t.value,t.message,n):E(r,"exclusiveMaximum",t.value,t.message,n):(t.inclusive||(r.exclusiveMaximum=!0),E(r,"maximum",t.value,t.message,n));break;case"multipleOf":E(r,"multipleOf",t.value,t.message,n);break}return r}function _r(){return{type:"boolean"}}function Gt(e,n){return S(e.type._def,n)}const Or=(e,n)=>S(e.innerType._def,n);function Xt(e,n,r){const t=r??n.dateStrategy;if(Array.isArray(t))return{anyOf:t.map((s,i)=>Xt(e,n,s))};switch(t){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return Er(e,n)}}const Er=(e,n)=>{const r={type:"integer",format:"unix-time"};if(n.target==="openApi3")return r;for(const t of e.checks)switch(t.kind){case"min":E(r,"minimum",t.value,t.message,n);break;case"max":E(r,"maximum",t.value,t.message,n);break}return r};function Tr(e,n){return{...S(e.innerType._def,n),default:e.defaultValue()}}function Pr(e,n){return n.effectStrategy==="input"?S(e.schema._def,n):{}}function Mr(e){return{type:"string",enum:Array.from(e.values)}}const kr=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function jr(e,n){const r=[S(e.left._def,{...n,currentPath:[...n.currentPath,"allOf","0"]}),S(e.right._def,{...n,currentPath:[...n.currentPath,"allOf","1"]})].filter(i=>!!i);let t=n.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const s=[];return r.forEach(i=>{if(kr(i))s.push(...i.allOf),i.unevaluatedProperties===void 0&&(t=void 0);else{let o=i;if("additionalProperties"in i&&i.additionalProperties===!1){const{additionalProperties:c,...m}=i;o=m}else t=void 0;s.push(o)}}),s.length?{allOf:s,...t}:void 0}function xr(e,n){const r=typeof e.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(e.value)?"array":"object"}:n.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[e.value]}:{type:r==="bigint"?"integer":r,const:e.value}}let nt;const Q={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(nt===void 0&&(nt=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),nt),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function Qt(e,n){const r={type:"string"};if(e.checks)for(const t of e.checks)switch(t.kind){case"min":E(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,t.value):t.value,t.message,n);break;case"max":E(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,t.value):t.value,t.message,n);break;case"email":switch(n.emailStrategy){case"format:email":ee(r,"email",t.message,n);break;case"format:idn-email":ee(r,"idn-email",t.message,n);break;case"pattern:zod":z(r,Q.email,t.message,n);break}break;case"url":ee(r,"uri",t.message,n);break;case"uuid":ee(r,"uuid",t.message,n);break;case"regex":z(r,t.regex,t.message,n);break;case"cuid":z(r,Q.cuid,t.message,n);break;case"cuid2":z(r,Q.cuid2,t.message,n);break;case"startsWith":z(r,RegExp(`^${rt(t.value,n)}`),t.message,n);break;case"endsWith":z(r,RegExp(`${rt(t.value,n)}$`),t.message,n);break;case"datetime":ee(r,"date-time",t.message,n);break;case"date":ee(r,"date",t.message,n);break;case"time":ee(r,"time",t.message,n);break;case"duration":ee(r,"duration",t.message,n);break;case"length":E(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,t.value):t.value,t.message,n),E(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,t.value):t.value,t.message,n);break;case"includes":{z(r,RegExp(rt(t.value,n)),t.message,n);break}case"ip":{t.version!=="v6"&&ee(r,"ipv4",t.message,n),t.version!=="v4"&&ee(r,"ipv6",t.message,n);break}case"base64url":z(r,Q.base64url,t.message,n);break;case"jwt":z(r,Q.jwt,t.message,n);break;case"cidr":{t.version!=="v6"&&z(r,Q.ipv4Cidr,t.message,n),t.version!=="v4"&&z(r,Q.ipv6Cidr,t.message,n);break}case"emoji":z(r,Q.emoji(),t.message,n);break;case"ulid":{z(r,Q.ulid,t.message,n);break}case"base64":{switch(n.base64Strategy){case"format:binary":{ee(r,"binary",t.message,n);break}case"contentEncoding:base64":{E(r,"contentEncoding","base64",t.message,n);break}case"pattern:zod":{z(r,Q.base64,t.message,n);break}}break}case"nanoid":z(r,Q.nanoid,t.message,n)}return r}function rt(e,n){return n.patternStrategy==="escape"?Ir(e):e}const Fr=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function Ir(e){let n="";for(let r=0;r<e.length;r++)Fr.has(e[r])||(n+="\\"),n+=e[r];return n}function ee(e,n,r,t){var s;e.format||(s=e.anyOf)!=null&&s.some(i=>i.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&t.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:n,...r&&t.errorMessages&&{errorMessage:{format:r}}})):E(e,"format",n,r,t)}function z(e,n,r,t){var s;e.pattern||(s=e.allOf)!=null&&s.some(i=>i.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&t.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:$t(n,t),...r&&t.errorMessages&&{errorMessage:{pattern:r}}})):E(e,"pattern",$t(n,t),r,t)}function $t(e,n){var m;if(!n.applyRegexFlags||!e.flags)return e.source;const r={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},t=r.i?e.source.toLowerCase():e.source;let s="",i=!1,o=!1,c=!1;for(let l=0;l<t.length;l++){if(i){s+=t[l],i=!1;continue}if(r.i){if(o){if(t[l].match(/[a-z]/)){c?(s+=t[l],s+=`${t[l-2]}-${t[l]}`.toUpperCase(),c=!1):t[l+1]==="-"&&((m=t[l+2])!=null&&m.match(/[a-z]/))?(s+=t[l],c=!0):s+=`${t[l]}${t[l].toUpperCase()}`;continue}}else if(t[l].match(/[a-z]/)){s+=`[${t[l]}${t[l].toUpperCase()}]`;continue}}if(r.m){if(t[l]==="^"){s+=`(^|(?<=[\r
]))`;continue}else if(t[l]==="$"){s+=`($|(?=[\r
]))`;continue}}if(r.s&&t[l]==="."){s+=o?`${t[l]}\r
`:`[${t[l]}\r
]`;continue}s+=t[l],t[l]==="\\"?i=!0:o&&t[l]==="]"?o=!1:!o&&t[l]==="["&&(o=!0)}try{new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${n.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return s}function en(e,n){var t,s,i,o,c,m;if(n.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),n.target==="openApi3"&&((t=e.keyType)==null?void 0:t._def.typeName)===h.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((l,y)=>({...l,[y]:S(e.valueType._def,{...n,currentPath:[...n.currentPath,"properties",y]})??{}}),{}),additionalProperties:!1};const r={type:"object",additionalProperties:S(e.valueType._def,{...n,currentPath:[...n.currentPath,"additionalProperties"]})??{}};if(n.target==="openApi3")return r;if(((s=e.keyType)==null?void 0:s._def.typeName)===h.ZodString&&((i=e.keyType._def.checks)!=null&&i.length)){const{type:l,...y}=Qt(e.keyType._def,n);return{...r,propertyNames:y}}else{if(((o=e.keyType)==null?void 0:o._def.typeName)===h.ZodEnum)return{...r,propertyNames:{enum:e.keyType._def.values}};if(((c=e.keyType)==null?void 0:c._def.typeName)===h.ZodBranded&&e.keyType._def.type._def.typeName===h.ZodString&&((m=e.keyType._def.type._def.checks)!=null&&m.length)){const{type:l,...y}=Gt(e.keyType._def,n);return{...r,propertyNames:y}}}return r}function Nr(e,n){if(n.mapStrategy==="record")return en(e,n);const r=S(e.keyType._def,{...n,currentPath:[...n.currentPath,"items","items","0"]})||{},t=S(e.valueType._def,{...n,currentPath:[...n.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[r,t],minItems:2,maxItems:2}}}function Dr(e){const n=e.values,t=Object.keys(e.values).filter(i=>typeof n[n[i]]!="number").map(i=>n[i]),s=Array.from(new Set(t.map(i=>typeof i)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:t}}function Lr(){return{not:{}}}function $r(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const Ce={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Zr(e,n){if(n.target==="openApi3")return Zt(e,n);const r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(t=>t._def.typeName in Ce&&(!t._def.checks||!t._def.checks.length))){const t=r.reduce((s,i)=>{const o=Ce[i._def.typeName];return o&&!s.includes(o)?[...s,o]:s},[]);return{type:t.length>1?t:t[0]}}else if(r.every(t=>t._def.typeName==="ZodLiteral"&&!t.description)){const t=r.reduce((s,i)=>{const o=typeof i._def.value;switch(o){case"string":case"number":case"boolean":return[...s,o];case"bigint":return[...s,"integer"];case"object":if(i._def.value===null)return[...s,"null"];case"symbol":case"undefined":case"function":default:return s}},[]);if(t.length===r.length){const s=t.filter((i,o,c)=>c.indexOf(i)===o);return{type:s.length>1?s:s[0],enum:r.reduce((i,o)=>i.includes(o._def.value)?i:[...i,o._def.value],[])}}}else if(r.every(t=>t._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((t,s)=>[...t,...s._def.values.filter(i=>!t.includes(i))],[])};return Zt(e,n)}const Zt=(e,n)=>{const r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((t,s)=>S(t._def,{...n,currentPath:[...n.currentPath,"anyOf",`${s}`]})).filter(t=>!!t&&(!n.strictUnions||typeof t=="object"&&Object.keys(t).length>0));return r.length?{anyOf:r}:void 0};function Rr(e,n){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return n.target==="openApi3"?{type:Ce[e.innerType._def.typeName],nullable:!0}:{type:[Ce[e.innerType._def.typeName],"null"]};if(n.target==="openApi3"){const t=S(e.innerType._def,{...n,currentPath:[...n.currentPath]});return t&&"$ref"in t?{allOf:[t],nullable:!0}:t&&{...t,nullable:!0}}const r=S(e.innerType._def,{...n,currentPath:[...n.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function Cr(e,n){const r={type:"number"};if(!e.checks)return r;for(const t of e.checks)switch(t.kind){case"int":r.type="integer",Yt(r,"type",t.message,n);break;case"min":n.target==="jsonSchema7"?t.inclusive?E(r,"minimum",t.value,t.message,n):E(r,"exclusiveMinimum",t.value,t.message,n):(t.inclusive||(r.exclusiveMinimum=!0),E(r,"minimum",t.value,t.message,n));break;case"max":n.target==="jsonSchema7"?t.inclusive?E(r,"maximum",t.value,t.message,n):E(r,"exclusiveMaximum",t.value,t.message,n):(t.inclusive||(r.exclusiveMaximum=!0),E(r,"maximum",t.value,t.message,n));break;case"multipleOf":E(r,"multipleOf",t.value,t.message,n);break}return r}function Vr(e,n){return n.removeAdditionalStrategy==="strict"?e.catchall._def.typeName==="ZodNever"?e.unknownKeys!=="strict":S(e.catchall._def,{...n,currentPath:[...n.currentPath,"additionalProperties"]})??!0:e.catchall._def.typeName==="ZodNever"?e.unknownKeys==="passthrough":S(e.catchall._def,{...n,currentPath:[...n.currentPath,"additionalProperties"]})??!0}function zr(e,n){const r=n.target==="openAi",t={type:"object",...Object.entries(e.shape()).reduce((s,[i,o])=>{if(o===void 0||o._def===void 0)return s;let c=o.isOptional();c&&r&&(o instanceof xn&&(o=o._def.innerType),o.isNullable()||(o=o.nullable()),c=!1);const m=S(o._def,{...n,currentPath:[...n.currentPath,"properties",i],propertyPath:[...n.currentPath,"properties",i]});return m===void 0?s:{properties:{...s.properties,[i]:m},required:c?s.required:[...s.required,i]}},{properties:{},required:[]}),additionalProperties:Vr(e,n)};return t.required.length||delete t.required,t}const Ur=(e,n)=>{var t;if(n.currentPath.toString()===((t=n.propertyPath)==null?void 0:t.toString()))return S(e.innerType._def,n);const r=S(e.innerType._def,{...n,currentPath:[...n.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}},Br=(e,n)=>{if(n.pipeStrategy==="input")return S(e.in._def,n);if(n.pipeStrategy==="output")return S(e.out._def,n);const r=S(e.in._def,{...n,currentPath:[...n.currentPath,"allOf","0"]}),t=S(e.out._def,{...n,currentPath:[...n.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,t].filter(s=>s!==void 0)}};function qr(e,n){return S(e.type._def,n)}function Hr(e,n){const t={type:"array",uniqueItems:!0,items:S(e.valueType._def,{...n,currentPath:[...n.currentPath,"items"]})};return e.minSize&&E(t,"minItems",e.minSize.value,e.minSize.message,n),e.maxSize&&E(t,"maxItems",e.maxSize.value,e.maxSize.message,n),t}function Kr(e,n){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((r,t)=>S(r._def,{...n,currentPath:[...n.currentPath,"items",`${t}`]})).reduce((r,t)=>t===void 0?r:[...r,t],[]),additionalItems:S(e.rest._def,{...n,currentPath:[...n.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((r,t)=>S(r._def,{...n,currentPath:[...n.currentPath,"items",`${t}`]})).reduce((r,t)=>t===void 0?r:[...r,t],[])}}function Wr(){return{not:{}}}function Jr(){return{}}const Yr=(e,n)=>S(e.innerType._def,n);function S(e,n,r=!1){var o;const t=n.seen.get(e);if(n.override){const c=(o=n.override)==null?void 0:o.call(n,e,n,t,r);if(c!==hr)return c}if(t&&!r){const c=Gr(t,n);if(c!==void 0)return c}const s={def:e,path:n.currentPath,jsonSchema:void 0};n.seen.set(e,s);const i=Qr(e,e.typeName,n);return i&&ea(e,n,i),s.jsonSchema=i,i}const Gr=(e,n)=>{switch(n.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:Xr(n.currentPath,e.path)};case"none":case"seen":return e.path.length<n.currentPath.length&&e.path.every((r,t)=>n.currentPath[t]===r)?(console.warn(`Recursive reference detected at ${n.currentPath.join("/")}! Defaulting to any`),{}):n.$refStrategy==="seen"?{}:void 0}},Xr=(e,n)=>{let r=0;for(;r<e.length&&r<n.length&&e[r]===n[r];r++);return[(e.length-r).toString(),...n.slice(r)].join("/")},Qr=(e,n,r)=>{switch(n){case h.ZodString:return Qt(e,r);case h.ZodNumber:return Cr(e,r);case h.ZodObject:return zr(e,r);case h.ZodBigInt:return Sr(e,r);case h.ZodBoolean:return _r();case h.ZodDate:return Xt(e,r);case h.ZodUndefined:return Wr();case h.ZodNull:return $r(r);case h.ZodArray:return Ar(e,r);case h.ZodUnion:case h.ZodDiscriminatedUnion:return Zr(e,r);case h.ZodIntersection:return jr(e,r);case h.ZodTuple:return Kr(e,r);case h.ZodRecord:return en(e,r);case h.ZodLiteral:return xr(e,r);case h.ZodEnum:return Mr(e);case h.ZodNativeEnum:return Dr(e);case h.ZodNullable:return Rr(e,r);case h.ZodOptional:return Ur(e,r);case h.ZodMap:return Nr(e,r);case h.ZodSet:return Hr(e,r);case h.ZodLazy:return S(e.getter()._def,r);case h.ZodPromise:return qr(e,r);case h.ZodNaN:case h.ZodNever:return Lr();case h.ZodEffects:return Pr(e,r);case h.ZodAny:return wr();case h.ZodUnknown:return Jr();case h.ZodDefault:return Tr(e,r);case h.ZodBranded:return Gt(e,r);case h.ZodReadonly:return Yr(e,r);case h.ZodCatch:return Or(e,r);case h.ZodPipeline:return Br(e,r);case h.ZodFunction:case h.ZodVoid:case h.ZodSymbol:return;default:return(t=>{})()}},ea=(e,n,r)=>(e.description&&(r.description=e.description,n.markdownDescription&&(r.markdownDescription=e.description)),r),ta=(e,n)=>{const r=vr(n),t=typeof n=="object"&&n.definitions?Object.entries(n.definitions).reduce((m,[l,y])=>({...m,[l]:S(y._def,{...r,currentPath:[...r.basePath,r.definitionPath,l]},!0)??{}}),{}):void 0,s=typeof n=="string"?n:(n==null?void 0:n.nameStrategy)==="title"||n==null?void 0:n.name,i=S(e._def,s===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,s]},!1)??{},o=typeof n=="object"&&n.name!==void 0&&n.nameStrategy==="title"?n.name:void 0;o!==void 0&&(i.title=o);const c=s===void 0?t?{...i,[r.definitionPath]:t}:i:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,s].join("/"),[r.definitionPath]:{...t,[s]:i}};return r.target==="jsonSchema7"?c.$schema="http://json-schema.org/draft-07/schema#":(r.target==="jsonSchema2019-09"||r.target==="openAi")&&(c.$schema="https://json-schema.org/draft/2019-09/schema#"),r.target==="openAi"&&("anyOf"in c||"oneOf"in c||"allOf"in c||"type"in c&&Array.isArray(c.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),c},Rt={dateStrategy:"integer",pipeStrategy:"output",$refStrategy:"none"},na=(...e)=>(e[1]=typeof e[1]=="object"?{...Rt,...e[1]}:Rt,ta(...e));async function ra(e,n,r){const t=await e.safeParseAsync(n,{errorMap:r});return t.success?{data:t.data,success:!0}:{issues:t.error.issues.map(({message:s,path:i})=>({message:s,path:i})),success:!1}}function aa(e,n){return fr({superFormValidationLibrary:"zod",validate:async r=>ra(e,r,n==null?void 0:n.errorMap),jsonSchema:(n==null?void 0:n.jsonSchema)??na(e,n==null?void 0:n.config),defaults:n==null?void 0:n.defaults})}const ga=gr(aa);export{ma as a,ya as d,pa as s,ga as z};
