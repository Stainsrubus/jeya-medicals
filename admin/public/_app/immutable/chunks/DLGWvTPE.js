var lt=Object.defineProperty;var Q=e=>{throw TypeError(e)};var dt=(e,t,a)=>t in e?lt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var H=(e,t,a)=>dt(e,typeof t!="symbol"?t+"":t,a),U=(e,t,a)=>t.has(e)||Q("Cannot "+a);var r=(e,t,a)=>(U(e,t,"read from private field"),a?a.call(e):t.get(e)),n=(e,t,a)=>t.has(e)?Q("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,a),c=(e,t,a,i)=>(U(e,t,"write to private field"),i?i.call(e,a):t.set(e,a),a);import"./Bg9kRutz.js";import{e as g,g as u,a6 as ct,X as ut,p as X,f as C,a as q,c as W,ae as Y,r as Z,t as p}from"./DUB8bsv0.js";import{c as O,a as b,t as $}from"./DzHOuBan.js";import{c as tt}from"./yzD5jbIF.js";import{b as y,i as et,r as D,c as at}from"./DOmRzZIo.js";import{c as rt}from"./C0h2pMUE.js";import{b as z,a as st}from"./BHIRq8YZ.js";import{a as J,u as it,b as I,m as nt}from"./CHPYNWro.js";import{C as ft}from"./DFNEXU3v.js";const ht="data-avatar-root",gt="data-avatar-image",mt="data-avatar-fallback";var k,L,E;class vt{constructor(t){n(this,k);n(this,L);H(this,"delayMs");H(this,"loadingStatus");n(this,E,g(()=>({id:r(this,k).current,[ht]:"","data-status":this.loadingStatus.current})));this.delayMs=t.delayMs,this.loadingStatus=t.loadingStatus,c(this,L,t.ref),c(this,k,t.id),this.loadImage=this.loadImage.bind(this),J({id:r(this,k),ref:r(this,L)})}loadImage(t,a,i){let l;const o=new Image;return o.src=t,a!==void 0&&(o.crossOrigin=a),i&&(o.referrerPolicy=i),this.loadingStatus.current="loading",o.onload=()=>{l=window.setTimeout(()=>{this.loadingStatus.current="loaded"},this.delayMs.current)},o.onerror=()=>{this.loadingStatus.current="error"},()=>{window.clearTimeout(l)}}get props(){return u(r(this,E))}}k=new WeakMap,L=new WeakMap,E=new WeakMap;var M,F,T,P,R,S,G;class At{constructor(t,a){n(this,M);n(this,F);n(this,T);n(this,P);n(this,R);n(this,S);n(this,G,g(()=>({id:r(this,M).current,style:{display:r(this,S).loadingStatus.current==="loaded"?"block":"none"},"data-status":r(this,S).loadingStatus.current,[gt]:"",src:r(this,R).current,crossorigin:r(this,T).current,referrerpolicy:r(this,P).current})));c(this,S,a),c(this,R,t.src),c(this,M,t.id),c(this,F,t.ref),c(this,T,t.crossOrigin),c(this,P,t.referrerPolicy),J({id:r(this,M),ref:r(this,F)}),ct(()=>{if(!r(this,R).current){r(this,S).loadingStatus.current="error";return}r(this,T).current,ut(()=>r(this,S).loadImage(r(this,R).current??"",r(this,T).current,r(this,P).current))})}get props(){return u(r(this,G))}}M=new WeakMap,F=new WeakMap,T=new WeakMap,P=new WeakMap,R=new WeakMap,S=new WeakMap,G=new WeakMap;var V,B,x,K;class _t{constructor(t,a){n(this,V);n(this,B);n(this,x);n(this,K,g(()=>({style:{display:r(this,x).loadingStatus.current==="loaded"?"none":void 0},"data-status":r(this,x).loadingStatus.current,[mt]:""})));c(this,x,a),c(this,V,t.id),c(this,B,t.ref),J({id:r(this,V),ref:r(this,B)})}get props(){return u(r(this,K))}}V=new WeakMap,B=new WeakMap,x=new WeakMap,K=new WeakMap;const N=new ft("Avatar.Root");function St(e){return N.set(new vt(e))}function Bt(e){return new At(e,N.get())}function yt(e){return new _t(e,N.get())}var bt=$("<div><!></div>");function wt(e,t){X(t,!0);let a=y(t,"delayMs",3,0),i=y(t,"loadingStatus",15,"loading"),l=y(t,"id",19,it),o=y(t,"ref",15,null),m=D(t,["$$slots","$$events","$$legacy","delayMs","loadingStatus","onLoadingStatusChange","child","children","id","ref"]);const v=St({delayMs:I.with(()=>a()),loadingStatus:I.with(()=>i(),s=>{var d;i()!==s&&(i(s),(d=t.onLoadingStatusChange)==null||d.call(t,s))}),id:I.with(()=>l()),ref:I.with(()=>o(),s=>o(s))}),A=g(()=>nt(m,v.props));var _=O(),w=C(_);{var f=s=>{var d=O(),j=C(d);z(j,()=>t.child,()=>({props:u(A)})),b(s,d)},h=s=>{var d=bt();let j;var ot=W(d);z(ot,()=>t.children??Y),Z(d),p(()=>j=st(d,j,{...u(A)})),b(s,d)};et(w,s=>{t.child?s(f):s(h,!1)})}b(e,_),q()}var Tt=$("<span><!></span>");function Rt(e,t){X(t,!0);let a=y(t,"id",19,it),i=y(t,"ref",15,null),l=D(t,["$$slots","$$events","$$legacy","children","child","id","ref"]);const o=yt({id:I.with(()=>a()),ref:I.with(()=>i(),f=>i(f))}),m=g(()=>nt(l,o.props));var v=O(),A=C(v);{var _=f=>{var h=O(),s=C(h);z(s,()=>t.child,()=>({props:u(m)})),b(f,h)},w=f=>{var h=Tt();let s;var d=W(h);z(d,()=>t.children??Y),Z(h),p(()=>s=st(h,s,{...u(m)})),b(f,h)};et(A,f=>{t.child?f(_):f(w,!1)})}b(e,v),q()}function jt(e,t){X(t,!0);let a=y(t,"ref",15,null),i=D(t,["$$slots","$$events","$$legacy","ref","class"]);var l=O(),o=C(l);const m=g(()=>rt("relative flex size-10 shrink-0 overflow-hidden rounded-full",t.class));var v=g(()=>u(m));tt(o,()=>wt,(A,_)=>{_(A,at({get class(){return u(v)}},()=>i,{get ref(){return a()},set ref(w){a(w)}}))}),b(e,l),q()}function zt(e,t){X(t,!0);let a=y(t,"ref",15,null),i=D(t,["$$slots","$$events","$$legacy","ref","class"]);var l=O(),o=C(l);const m=g(()=>rt("bg-muted flex h-full w-full items-center justify-center rounded-full",t.class));var v=g(()=>u(m));tt(o,()=>Rt,(A,_)=>{_(A,at({get class(){return u(v)}},()=>i,{get ref(){return a()},set ref(w){a(w)}}))}),b(e,l),q()}export{jt as A,zt as a,Bt as u};
