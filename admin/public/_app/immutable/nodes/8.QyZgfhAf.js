import"../chunks/Bg9kRutz.js";import{p as tt,a as rt,$ as at,g as a,c as d,f as u,r as l,b as st,s as r,n as $,t as B,e as Te,d as ot}from"../chunks/DUB8bsv0.js";import{s as T}from"../chunks/3nqkJHLA.js";import{i as D,s as it,a as ve,p as dt}from"../chunks/DOmRzZIo.js";import{e as lt,i as nt}from"../chunks/DJVbMBk7.js";import{h as vt,a as e,t as q,c as H,b as f}from"../chunks/DzHOuBan.js";import{c as o}from"../chunks/yzD5jbIF.js";import{g as ct}from"../chunks/CSUTd-D0.js";import{p as ut}from"../chunks/BjFnrQu3.js";import{_ as ke}from"../chunks/c3aSOx29.js";import{T as qe,P as ft}from"../chunks/BTrfwMzp.js";import{B as pt}from"../chunks/CJvYq0KN.js";import{a as mt,b as Ie,c as W,d as _t,e as X,T as $t}from"../chunks/4wux5xE3.js";import{I as ce}from"../chunks/CHPYNWro.js";import{c as Le}from"../chunks/B6Jqkcen.js";var gt=q('<meta name="description" content="dashboard for kings chic.">'),xt=q('<div class="flex justify-center items-center min-h-[400px]"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div></div>'),ht=q("<!> Back",1),yt=q("<!> <!> <!> <!>",1),bt=q("<!> <!> <!> <!>",1),Pt=q("<!> <!> <!>",1),wt=q('<div class="flex justify-between"><div><div class="flex gap-2 items-center justify-between"><h1 class="text-3xl font-bold capitalize mb-2"> </h1></div> <p class="text-muted-foreground"> </p> <div class="flex gap-2 items-center mt-4"><p class="text-muted-foreground flex gap-2 items-center"><!> </p> <p class="text-muted-foreground flex gap-2 items-center"><!> <!></p></div> <div class="flex gap-2 items-center mt-4"><p class="text-muted-foreground"> </p></div></div> <div><!></div></div> <div class="overflow-x-auto"><h2 class="text-3xl font-bold">Order History</h2> <!></div> <!>',1),Tt=q('<div class="w-[95%] mx-auto p-6 space-y-6 h-[calc(100vh-60px)] overflow-y-auto hidescrollbarthumb text-zinc-800"><!></div>');function Ct(Oe,ze){tt(ze,!0);const[Y,Ae]=it(),ue=()=>ve(ut,"$page",Y),Z=()=>ve(Qe,"$query",Y),I=()=>ve(je,"$orderHistoryQuery",Y);async function He(t){return await(await ke.get(`/users/${t}`)).data}async function Ne(t=10,b=1,G=""){return await(await ke.get(`/users/orderhistory?limit=${t}&page=${b}&userId=${G}`)).data}let F=st(1),ee=7;const Qe=Le({queryKey:["admin user fetch"],queryFn:()=>{var t;return He((t=ue().params)==null?void 0:t.userid)}}),je=Le({queryKey:["admin user order history"],queryFn:()=>{var t;return Ne(ee,a(F),(t=ue().params)==null?void 0:t.userid)}});function Be(t){ct(`/hidden-admin-base-007/dashboard/orders/${t}`)}var te=Tt();vt(t=>{var b=gt();at.title="Dashboard | User",e(t,b)});var De=d(te);{var Fe=t=>{var b=xt();e(t,b)},Se=t=>{var b=H(),G=u(b);{var fe=M=>{var S=wt();const N=Te(()=>Z().data.user);var re=u(S),ae=d(re),se=d(ae),pe=d(se),Ce=d(pe,!0);l(pe),l(se);var oe=r(se,2),Ke=d(oe);l(oe);var ie=r(oe,2),de=d(ie),me=d(de);ce(me,{icon:"fluent:call-48-regular",class:"text-lg"});var Ue=r(me);l(de);var _e=r(de,2),$e=d(_e);ce($e,{icon:"ic:outline-email",class:"text-lg"});var Je=r($e,2);{var Ee=s=>{var n=f();B(()=>T(n,a(N).email)),e(s,n)},Ge=s=>{var n=f("Not Available");e(s,n)};D(Je,s=>{a(N).email?s(Ee):s(Ge,!1)})}l(_e),l(ie);var ge=r(ie,2),xe=d(ge),Me=d(xe);l(xe),l(ge),l(ae);var he=r(ae,2),Re=d(he);pt(Re,{size:"sm",onclick:()=>history.back(),children:(s,n)=>{var i=ht(),C=u(i);ce(C,{icon:"ep:arrow-up-bold",class:"text-lg rotate-[-90deg]"}),$(),e(s,i)},$$slots:{default:!0}}),l(he),l(re);var le=r(re,2),Ve=r(d(le),2);o(Ve,()=>$t,(s,n)=>{n(s,{children:(i,C)=>{var ye=Pt(),be=u(ye);{var Ye=g=>{var P=H(),L=u(P);o(L,()=>qe,(K,p)=>{p(K,{children:(m,v)=>{$();var c=f("Loading....");e(m,c)},$$slots:{default:!0}})}),e(g,P)},Ze=g=>{var P=H(),L=u(P);{var K=p=>{var m=H(),v=u(m);o(v,()=>qe,(c,U)=>{U(c,{class:"text-center w-full text-xs",children:(J,E)=>{$();var Q=f("No Orders Found!");e(J,Q)},$$slots:{default:!0}})}),e(p,m)};D(L,p=>{var m,v;((v=(m=I())==null?void 0:m.data)==null?void 0:v.total)===0&&p(K)},!0)}e(g,P)};D(be,g=>{I().isLoading?g(Ye):g(Ze,!1)})}var Pe=r(be,2);o(Pe,()=>mt,(g,P)=>{P(g,{children:(L,K)=>{var p=H(),m=u(p);o(m,()=>Ie,(v,c)=>{c(v,{children:(U,J)=>{var E=yt(),Q=u(E);o(Q,()=>W,(x,h)=>{h(x,{class:"w-[100px]",children:(y,j)=>{$();var w=f("Sl.No");e(y,w)},$$slots:{default:!0}})});var R=r(Q,2);o(R,()=>W,(x,h)=>{h(x,{class:"cursor-pointer",children:(y,j)=>{$();var w=f("Order Id");e(y,w)},$$slots:{default:!0}})});var V=r(R,2);o(V,()=>W,(x,h)=>{h(x,{children:(y,j)=>{$();var w=f("Amount");e(y,w)},$$slots:{default:!0}})});var we=r(V,2);o(we,()=>W,(x,h)=>{h(x,{children:(y,j)=>{$();var w=f("Status");e(y,w)},$$slots:{default:!0}})}),e(U,E)},$$slots:{default:!0}})}),e(L,p)},$$slots:{default:!0}})});var et=r(Pe,2);o(et,()=>_t,(g,P)=>{P(g,{children:(L,K)=>{var p=H(),m=u(p);lt(m,1,()=>{var v;return((v=I().data)==null?void 0:v.orders)||[]},nt,(v,c,U)=>{var J=H(),E=u(J);o(E,()=>Ie,(Q,R)=>{R(Q,{children:(V,we)=>{var x=bt(),h=u(x);o(h,()=>X,(O,z)=>{z(O,{children:(A,ne)=>{$();var _=f();B(()=>T(_,U+1+(a(F)-1)*ee)),e(A,_)},$$slots:{default:!0}})});var y=r(h,2);o(y,()=>X,(O,z)=>{z(O,{class:"cursor-pointer  underline underline-offset-4 text-[#fd8d27]",onclick:()=>Be(a(c)._id),children:(A,ne)=>{$();var _=f();B(()=>{var k;return T(_,(k=a(c))==null?void 0:k.orderId)}),e(A,_)},$$slots:{default:!0}})});var j=r(y,2);o(j,()=>X,(O,z)=>{z(O,{children:(A,ne)=>{$();var _=f();B(()=>{var k;return T(_,`${((k=a(c))==null?void 0:k.totalPrice)-a(c).couponDiscount+a(c).deliveryPrice} â‚¹`)}),e(A,_)},$$slots:{default:!0}})});var w=r(j,2);o(w,()=>X,(O,z)=>{z(O,{class:"capitalize",children:(A,ne)=>{$();var _=f();B(()=>{var k;return T(_,(k=a(c))==null?void 0:k.status)}),e(A,_)},$$slots:{default:!0}})}),e(V,x)},$$slots:{default:!0}})}),e(v,J)}),e(L,p)},$$slots:{default:!0}})}),e(i,ye)},$$slots:{default:!0}})}),l(le);var We=r(le,2);{var Xe=s=>{var n=Te(()=>{var i,C;return((C=(i=I())==null?void 0:i.data)==null?void 0:C.total)||0});ft(s,{get total(){return a(n)},get limit(){return ee},get page(){return a(F)},callback:i=>{a(F)!==i&&(ot(F,dt(i)),I().refetch())}})};D(We,s=>{var n,i;!I().isLoading&&((i=(n=I())==null?void 0:n.data)==null?void 0:i.total)>0&&s(Xe)})}B(s=>{T(Ce,a(N).username),T(Ke,`Joined At ${s??""}`),T(Ue,` ${a(N).mobile??""}`),T(Me,`Preffered Cusine: ${a(N).prefferedCusine??""}`)},[()=>new Date(a(N).createdAt).toLocaleString("en-IN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})]),e(M,S)};D(G,M=>{var S;(S=Z().data)!=null&&S.user&&M(fe)},!0)}e(t,b)};D(De,t=>{Z().isLoading?t(Fe):t(Se,!1)})}l(te),e(Oe,te),rt(),Ae()}export{Ct as component};
