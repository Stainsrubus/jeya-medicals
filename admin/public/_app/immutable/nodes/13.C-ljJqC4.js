import"../chunks/Bg9kRutz.js";import"../chunks/69_IOA4Y.js";import{w as nt,p as Be,u as Xe,g as s,s as a,X as _,t as te,a as Ve,b as De,d as R,c as f,n as d,e as ye,r as g,ad as it,f as x,$ as dt}from"../chunks/DUB8bsv0.js";import{s as re}from"../chunks/3nqkJHLA.js";import{b as c,a as t,t as I,c as ee,h as vt}from"../chunks/DzHOuBan.js";import{i as ct}from"../chunks/B06qfcxv.js";import{p as pe,c as Ke,d as X,i as me,s as Je,a as Y,e as tt}from"../chunks/DOmRzZIo.js";import{g as ut}from"../chunks/CSUTd-D0.js";import{R as mt}from"../chunks/B_rXABv2.js";import{s as pt,z as Ye,d as $t,a as _t}from"../chunks/BTJgjqp0.js";import{_ as Ue}from"../chunks/c3aSOx29.js";import{B as je}from"../chunks/CJvYq0KN.js";import{I as Se}from"../chunks/CJXCr1W0.js";import{L as Re}from"../chunks/DSP103xp.js";import{q as rt}from"../chunks/tFu-0XeD.js";import{t as at}from"../chunks/CF63kifO.js";import{z as Ie}from"../chunks/K85sQPP8.js";import{c as ot}from"../chunks/Dw1g5TC4.js";import{e as ft,i as gt}from"../chunks/DJVbMBk7.js";import{c as i}from"../chunks/yzD5jbIF.js";import{d as ht}from"../chunks/DbFrp4aS.js";import{P as xt,T as Ge}from"../chunks/BTrfwMzp.js";import{R as yt,D as bt,a as Pt,b as wt}from"../chunks/CeRZbImN.js";import{S as At}from"../chunks/CJEhnKgE.js";import{T as It,a as Dt,b as He,c as he,d as St,e as xe}from"../chunks/4wux5xE3.js";import{I as be}from"../chunks/CHPYNWro.js";import{c as Tt}from"../chunks/B6Jqkcen.js";import{T as kt,a as We}from"../chunks/B_RvuQCl.js";import{T as Ze}from"../chunks/CBD-qeiU.js";const Te=nt({mode:"list",name:"",phone:"",employeeId:"",password:"",id:""}),et=Ie.object({name:Ie.string({message:"Name is required"}).max(50),phone:Ie.string({message:"Phone is required"}).refine(j=>/^[6-9]\d{9}$/.test(j),{message:"Phone must be a valid Indian mobile number starting with 6-9 and containing 10 digits"}),employeeId:Ie.string({message:"Employee ID is required"}).max(50),password:Ie.string({message:"Password is required"}).min(8,"Password must be at least 8 characters")});var qt=I('<span class="invalid text-xs text-red-500"> </span>'),Et=I('<span class="invalid text-xs text-red-500"> </span>'),Mt=I('<span class="invalid text-xs text-red-500"> </span>'),Ct=I('<div class="max-w-[80%] mx-auto text-maintext"><form method="POST" class="grid gap-4 py-4 grid-cols-2"><div><!> <!> <!></div> <div><!> <!> <!></div> <div><!> <!> <!></div> <div class="grid gap-2 relative"><div class="flex items-center"><!></div> <!></div> <!></form></div>');function Ft(j,G){Be(G,!0);const[p,ae]=Je(),u=()=>Y(Te,"$deliveryAgentStore",p),r=()=>Y(y,"$form",p),oe=()=>Y(E,"$createDeliveryAgentMutation",p),w=()=>Y(se,"$errors",p),q=()=>Y(ne,"$constraints",p);let L=De(!1);Xe(()=>{R(L,pe(!!(u().mode=="create"&&u().id)))});function B(){return"KC-ST"+Math.floor(Math.random()*1e6)}const E=ot({mutationFn:e=>s(L)?Ue.put(`/deliveryagent/${u().id}`,e):Ue.post("/deliveryagent/create",e),onSuccess({}){rt.refetchQueries({queryKey:["deliveryagent fetch"]}),at(s(L)?"Delivery Agent Updated ✅":"Delivery Agent Created ✅"),ie()},onError(e,l,n){console.error("onError",e,l,n)}});let V=pe(B());const{form:y,errors:se,enhance:le,constraints:ne,reset:ie,validateForm:U}=pt($t(Ye(et)),{SPA:!0,validationMethod:"oninput",validators:Ye(et),clearOnSubmit:"none",invalidateAll:!1,resetForm:!1,async onSubmit(){let e={name:r().name,password:r().password=="********"?"":r().password,phone:r().phone,employeeId:V};const{valid:l}=await U({focusOnError:!0});l&&oe().mutate(e)}});Xe(()=>{s(L)&&(X(y,_(r).name=u().name,_(r)),X(y,_(r).phone=u().phone,_(r)),X(y,_(r).employeeId=u().employeeId,_(r)),X(y,_(r).password="********",_(r))),X(y,_(r).employeeId=V,_(r))});var C=Ct(),J=f(C),H=f(J),ke=f(H);Re(ke,{children:(e,l)=>{d();var n=c("Name");t(e,n)},$$slots:{default:!0}});var qe=a(ke,2),ze=ye(()=>w().name?"true":void 0);Se(qe,Ke({class:"pr-10 mt-1",placeholder:"Ex: John Doe",get"aria-invalid"(){return s(ze)}},()=>q().name,{get value(){return r().name},set value(e){X(y,_(r).name=e,_(r))}}));var Ee=a(qe,2);{var Me=e=>{var l=qt(),n=f(l,!0);g(l),te(()=>re(n,w().name)),t(e,l)};me(Ee,e=>{w().name&&e(Me)})}g(H);var Pe=a(H,2),Ce=f(Pe);Re(Ce,{children:(e,l)=>{d();var n=c("Phone");t(e,n)},$$slots:{default:!0}});var o=a(Ce,2),b=ye(()=>w().phone?"true":void 0);Se(o,Ke({class:"pr-10 mt-1",placeholder:"Ex: 1234567890",autocomplete:"username",get"aria-invalid"(){return s(b)}},()=>q().phone,{get value(){return r().phone},set value(e){X(y,_(r).phone=e,_(r))}}));var v=a(o,2);{var de=e=>{var l=Et(),n=f(l,!0);g(l),te(()=>re(n,w().phone)),t(e,l)};me(v,e=>{w().phone&&e(de)})}g(Pe);var z=a(Pe,2),ve=f(z);Re(ve,{children:(e,l)=>{d();var n=c("Employee ID");t(e,n)},$$slots:{default:!0}});var $e=a(ve,2),we=ye(()=>w().employeeId?"true":void 0);Se($e,Ke({class:"pr-10 mt-1",readonly:!0,placeholder:"Ex: DS123456",get"aria-invalid"(){return s(we)}},()=>q().employeeId,{get value(){return r().employeeId},set value(e){X(y,_(r).employeeId=e,_(r))}}));var _e=a($e,2);{var Fe=e=>{var l=Mt(),n=f(l,!0);g(l),te(()=>re(n,w().employeeId)),t(e,l)};me(_e,e=>{w().employeeId&&e(Fe)})}g(z);var h=a(z,2),P=f(h),F=f(P);Re(F,{for:"password",children:(e,l)=>{d();var n=c("Password");t(e,n)},$$slots:{default:!0}}),g(P);var Q=a(P,2),A=ye(()=>w().password?"true":void 0),m=ye(()=>"password");Se(Q,Ke({class:"pr-10 mt-1",autocomplete:"new-password",placeholder:"******",get"aria-invalid"(){return s(A)},get type(){return s(m)}},()=>q().password,{get value(){return r().password},set value(e){X(y,_(r).password=e,_(r))}})),g(h);var $=a(h,2);je($,{class:"w-[40%]",type:"submit",children:(e,l)=>{d();var n=c();te(()=>re(n,s(L)?"Update":oe().isPending?"Creating...":"Create")),t(e,n)},$$slots:{default:!0}}),g(J),_t(J,e=>le==null?void 0:le(e)),g(C),t(j,C),Ve(),ae()}var Lt=I("<!> <!> <!> <!> <!> <!>",1),Nt=(j,G,p)=>{tt(Te,pe({id:s(p)._id,name:s(p).name,employeeId:s(p).employeeId,mode:"create",password:"",phone:s(p).phone.toString()}))},Ot=(j,G,p,ae)=>(R(G,!0),R(p,pe(s(ae)._id))),Kt=I("<button><!></button> <button><!></button>",1),Rt=I("<!> <!> <!> <!> <!> <!>",1),Ut=I("<!> <!> <!>",1),zt=I('<!> <div class="flex gap-4 justify-around"><!> <!></div>',1),Qt=I('<div><div class="mt-6 text-maintext w-[calc(100vw-420px)] font-pt mx-auto"><div class="w-[40%] ml-auto"><div class="grid gap-2 relative"><!> <!></div></div> <!> <!> <!></div></div>');function jt(j,G){Be(G,!0);const[p,ae]=Je(),u=()=>Y(le,"$query",p),r=()=>Y(ne,"$deleteMutation",p),oe=()=>Y(Te,"$deliveryAgentStore",p);async function w(o=10,b=1,v=""){return await(await Ue.get(`/deliveryagent/all?limit=${o}&page=${b}&q=${v}`)).data}let q=De(1),L=10,B=De(""),E=De(!1),V=De(""),y;function se(){clearTimeout(y),y=setTimeout(async()=>{await it(),R(q,1),u().refetch()},500)}const le=Tt({queryKey:["deliveryagent fetch"],queryFn:()=>w(L,s(q),s(B))}),ne=ot({mutationFn:({id:o,permanent:b})=>Ue.delete(`/deliveryagent/${o}?permanent=${b}`),onSuccess({data:o}){rt.refetchQueries({queryKey:["deliveryagent fetch"]}),at((o==null?void 0:o.message)??"Delivery Agent Edited"),R(E,!1),R(V,"")},onError(o,b,v){console.error("onError",o,b,v)}});var ie=Qt(),U=f(ie),C=f(U),J=f(C),H=f(J);Se(H,{type:"text",required:!0,class:"pr-10",placeholder:"Search Delivery Agent",oninput:se,get value(){return s(B)},set value(o){R(B,pe(o))}});var ke=a(H,2);{var qe=o=>{be(o,{icon:"iconamoon:search",class:"absolute right-2 bottom-2.5 cursor-pointer text-gray-400 text-xl"})},ze=o=>{be(o,{icon:"mdi:clear-outline",onclick:()=>{R(B,""),se()},class:"absolute right-2 bottom-2.5 cursor-pointer text-gray-400 text-xl"})};me(ke,o=>{s(B)?o(ze,!1):o(qe)})}g(J),g(C);var Ee=a(C,2);i(Ee,()=>It,(o,b)=>{b(o,{class:"",children:(v,de)=>{var z=Ut(),ve=x(z);{var $e=h=>{var P=ee(),F=x(P);i(F,()=>Ge,(Q,A)=>{A(Q,{children:(m,$)=>{d();var e=c("Loading....");t(m,e)},$$slots:{default:!0}})}),t(h,P)},we=h=>{var P=ee(),F=x(P);{var Q=A=>{var m=ee(),$=x(m);i($,()=>Ge,(e,l)=>{l(e,{class:"text-center w-full text-xs",children:(n,ce)=>{d();var W=c("No Delivery Agents Found!");t(n,W)},$$slots:{default:!0}})}),t(A,m)};me(F,A=>{var m,$;(($=(m=u())==null?void 0:m.data)==null?void 0:$.total)===0&&A(Q)},!0)}t(h,P)};me(ve,h=>{u().isLoading?h($e):h(we,!1)})}var _e=a(ve,2);i(_e,()=>Dt,(h,P)=>{P(h,{children:(F,Q)=>{var A=ee(),m=x(A);i(m,()=>He,($,e)=>{e($,{class:"",children:(l,n)=>{var ce=Lt(),W=x(ce);i(W,()=>he,(D,S)=>{S(D,{class:"w-[100px]",children:(T,Z)=>{d();var M=c("Sl.No");t(T,M)},$$slots:{default:!0}})});var fe=a(W,2);i(fe,()=>he,(D,S)=>{S(D,{children:(T,Z)=>{d();var M=c("Username");t(T,M)},$$slots:{default:!0}})});var ge=a(fe,2);i(ge,()=>he,(D,S)=>{S(D,{children:(T,Z)=>{d();var M=c("Employee ID");t(T,M)},$$slots:{default:!0}})});var Le=a(ge,2);i(Le,()=>he,(D,S)=>{S(D,{children:(T,Z)=>{d();var M=c("Phone");t(T,M)},$$slots:{default:!0}})});var ue=a(Le,2);i(ue,()=>he,(D,S)=>{S(D,{children:(T,Z)=>{d();var M=c("Active");t(T,M)},$$slots:{default:!0}})});var Ne=a(ue,2);i(Ne,()=>he,(D,S)=>{S(D,{children:(T,Z)=>{d();var M=c("Actions");t(T,M)},$$slots:{default:!0}})}),t(l,ce)},$$slots:{default:!0}})}),t(F,A)},$$slots:{default:!0}})});var Fe=a(_e,2);i(Fe,()=>St,(h,P)=>{P(h,{children:(F,Q)=>{var A=ee(),m=x(A);ft(m,1,()=>{var $;return(($=u().data)==null?void 0:$.agents)||[]},gt,($,e,l)=>{var n=ee(),ce=x(n);i(ce,()=>He,(W,fe)=>{fe(W,{children:(ge,Le)=>{var ue=Rt(),Ne=x(ue);i(Ne,()=>xe,(N,O)=>{O(N,{children:(K,Ae)=>{d();var k=c();k.nodeValue=l+1,t(K,k)},$$slots:{default:!0}})});var D=a(Ne,2);i(D,()=>xe,(N,O)=>{O(N,{children:(K,Ae)=>{d();var k=c();te(()=>re(k,s(e).name)),t(K,k)},$$slots:{default:!0}})});var S=a(D,2);i(S,()=>xe,(N,O)=>{O(N,{children:(K,Ae)=>{d();var k=c();te(()=>re(k,s(e).employeeId)),t(K,k)},$$slots:{default:!0}})});var T=a(S,2);i(T,()=>xe,(N,O)=>{O(N,{children:(K,Ae)=>{d();var k=c();te(()=>re(k,s(e).phone)),t(K,k)},$$slots:{default:!0}})});var Z=a(T,2);i(Z,()=>xe,(N,O)=>{O(N,{children:(K,Ae)=>{At(K,{class:"text-right",get disabled(){return r().isPending},get checked(){return s(e).active},onclick:()=>r().mutate({id:s(e)._id,permanent:!1})})},$$slots:{default:!0}})});var M=a(Z,2);i(M,()=>xe,(N,O)=>{O(N,{class:"flex gap-2",children:(K,Ae)=>{var k=Kt(),Oe=x(k);Oe.__click=[Nt,oe,e];var st=f(Oe);be(st,{icon:"basil:edit-outline",class:"hover:text-red-500 text-xl"}),g(Oe);var Qe=a(Oe,2);Qe.__click=[Ot,E,V,e];var lt=f(Qe);be(lt,{icon:"mingcute:delete-2-fill",class:"hover:text-red-500 text-xl"}),g(Qe),t(K,k)},$$slots:{default:!0}})}),t(ge,ue)},$$slots:{default:!0}})}),t($,n)}),t(F,A)},$$slots:{default:!0}})}),t(v,z)},$$slots:{default:!0}})});var Me=a(Ee,2);i(Me,()=>yt,(o,b)=>{b(o,{get open(){return s(E)},onOpenChange:v=>R(E,pe(v)),children:(v,de)=>{var z=ee(),ve=x(z);i(ve,()=>bt,($e,we)=>{we($e,{class:"p-6",children:(_e,Fe)=>{var h=zt(),P=x(h);i(P,()=>Pt,(m,$)=>{$(m,{class:"text-center",children:(e,l)=>{var n=ee(),ce=x(n);i(ce,()=>wt,(W,fe)=>{fe(W,{class:"text-center",children:(ge,Le)=>{d();var ue=c("Do you want to delete this Delivery Agent ?");t(ge,ue)},$$slots:{default:!0}})}),t(e,n)},$$slots:{default:!0}})});var F=a(P,2),Q=f(F);je(Q,{class:"bg-red-500 text-white font-bold w-full hover:bg-red-400",onclick:()=>r().mutate({id:s(V),permanent:!0}),children:(m,$)=>{d();var e=c("Yes");t(m,e)},$$slots:{default:!0}});var A=a(Q,2);je(A,{class:"text-white font-bold w-full",onclick:()=>R(E,!1),children:(m,$)=>{d();var e=c("No");t(m,e)},$$slots:{default:!0}}),g(F),t(_e,h)},$$slots:{default:!0}})}),t(v,z)},$$slots:{default:!0}})});var Pe=a(Me,2);{var Ce=o=>{var b=ye(()=>{var v,de;return((de=(v=u())==null?void 0:v.data)==null?void 0:de.total)||0});xt(o,{get total(){return s(b)},get limit(){return L},get page(){return s(q)},callback:v=>{v!==s(q)&&(R(q,pe(v)),u().refetch())}})};me(Pe,o=>{var b,v;!u().isLoading&&((v=(b=u())==null?void 0:b.data)==null?void 0:v.total)>0&&o(Ce)})}g(U),g(ie),t(j,ie),Ve(),ae()}ht(["click"]);var Bt=I('<meta name="description" content="dashboard for kings chic.">'),Vt=I('<!> <span class="ml-2">Delivery Agent List</span>',1),Jt=I('<!> <span class="ml-2"> </span>',1),Xt=I("<!> <!>",1),Yt=I("<!> <!> <!>",1);function Ar(j,G){Be(G,!1);const[p,ae]=Je(),u=()=>Y(Te,"$deliveryAgentStore",p);ct(),vt(r=>{var oe=Bt();dt.title="Dashboard | Delivery Agent",t(r,oe)}),mt(j,{get value(){return u().mode},class:"w-full p-4",onValueChange:r=>{ut(`/hidden-admin-base-007/dashboard/deliveryagent?mode=${r}`),tt(Te,{mode:r,id:"",employeeId:"",name:"",phone:"",password:""})},children:(r,oe)=>{var w=Yt(),q=x(w);kt(q,{children:(E,V)=>{var y=Xt(),se=x(y);We(se,{value:"list",class:"flex items-center",children:(ne,ie)=>{var U=Vt(),C=x(U);be(C,{class:"w-4 h-4",icon:"mage:users"}),d(2),t(ne,U)},$$slots:{default:!0}});var le=a(se,2);We(le,{value:"create",children:(ne,ie)=>{var U=Jt(),C=x(U);be(C,{class:"w-4 h-4",icon:"mi:user-add"});var J=a(C,2),H=f(J);g(J),te(()=>re(H,`${(u().mode=="create"&&u().id?"Update":"Create")??""} Delivery
				Agent`)),t(ne,U)},$$slots:{default:!0}}),t(E,y)},$$slots:{default:!0}});var L=a(q,2);Ze(L,{value:"list",children:(E,V)=>{jt(E,{})},$$slots:{default:!0}});var B=a(L,2);Ze(B,{value:"create",children:(E,V)=>{Ft(E,{})},$$slots:{default:!0}}),t(r,w)},$$slots:{default:!0}}),Ve(),ae()}export{Ar as component};
