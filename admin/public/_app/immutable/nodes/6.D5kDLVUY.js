import"../chunks/Bg9kRutz.js";import{p as dt,b as vr,u as lt,a as nt,t as V,$ as it,s as t,d as qe,c as o,f as l,g as r,n as b,r as s,e as De}from"../chunks/DUB8bsv0.js";import{s as m}from"../chunks/3nqkJHLA.js";import{p as Te,i as Ae,s as vt,a as Ir}from"../chunks/DOmRzZIo.js";import{e as He,i as Je}from"../chunks/DJVbMBk7.js";import{h as ut,a as e,t as c,c as T,b as q}from"../chunks/DzHOuBan.js";import{c as a}from"../chunks/yzD5jbIF.js";import{s as ct}from"../chunks/BHIRq8YZ.js";import{p as pt}from"../chunks/Ce8cYmzf.js";import{_ as Me}from"../chunks/c3aSOx29.js";import{B as wr}from"../chunks/CJvYq0KN.js";import{C as ar,a as sr,b as or,c as dr}from"../chunks/PgwLphcE.js";import{o as _t}from"../chunks/C0h2pMUE.js";import{R as $t,D as ft,a as qr,b as Dr}from"../chunks/CeRZbImN.js";import{I as Tr}from"../chunks/CJXCr1W0.js";import{L as mt}from"../chunks/DSP103xp.js";import{S as Ar,a as Sr,G as zr,b as Cr,R as Or}from"../chunks/D12_SmHx.js";import{T as kr,a as Qr,b as ur,c as pe,d as jr,e as _e}from"../chunks/4wux5xE3.js";import{I as Fr}from"../chunks/CHPYNWro.js";import"../chunks/69_IOA4Y.js";import{t as ve}from"../chunks/CF63kifO.js";import{c as Mr}from"../chunks/B6Jqkcen.js";import{D as Nr}from"../chunks/zky0_XcF.js";var gt=c('<meta name="description" content="Order management dashboard for Kings Chick">'),ht=c('<div class="flex justify-center items-center min-h-[400px]"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div></div>'),xt=c("<!> <!>",1),yt=c('<span class="capitalize"> </span>'),Pt=c("<!> <!>",1),bt=c("Back <!>",1),It=c('<div class="flex gap-3 flex-col"><div class="flex gap-3"><p class="font-semibold">Name</p> : <p> </p></div> <div class="flex gap-3"><p class="font-semibold">Email</p> : <p> </p></div> <div class="flex gap-3"><p class="font-semibold">Phone</p> : <p> </p></div></div>'),wt=c("<!> <!>",1),qt=c('<a target="_blank" rel="noopener noreferrer" class="text-sm text-primary hover:underline">View on Map</a>'),Dt=c('<div class="space-y-4"><div><p class="font-semibold text-lg"> </p> <p class="text-muted-foreground"> </p></div> <div class="space-y-1"><p> </p> <p> </p> <p> </p></div> <div class="flex items-center gap-2"><span class="px-3 p-2 bg-zinc-400 rounded-full text-sm"> </span> <!></div></div>'),Tt=c('<p class="text-muted-foreground">Address not specified</p>'),At=c("<!> <!>",1),St=c('<div class="grid grid-cols-2 gap-4"><div><p class="font-semibold">Payment Method</p> <p> </p></div> <div><p class="font-semibold">Payment Status</p> <p class="capitalize"> </p></div> <div><p class="font-semibold">Razor Pay Id</p> <p> </p></div></div>'),zt=c("<!> <!>",1),Ct=c("<!> <!> <!> <!> <!> <!> <!>",1),Ot=c('<p class="font-medium capitalize"> </p>'),kt=c('<p class="text-sm"> </p>'),Qt=c('<p class="text-sm text-muted-foreground">-</p>'),jt=c('<span class="text-sm bg-zinc-800 p-2 px-4 rounded-full"> </span>'),Ft=c('<div class="flex gap-2 flex-wrap"></div>'),Mt=c('<p class="text-sm text-muted-foreground mt-2"> </p>'),Nt=c('<p class="text-sm text-muted-foreground">-</p>'),Rt=c("<!> <!> <!> <!> <!> <!> <!>",1),Vt=c("<!> <!>",1),Lt=c("<!> <!>",1),Bt=c('<div class="flex justify-between text-green-500"><span>Coupon Discount</span> <span> </span></div>'),Kt=c('<div class="space-y-2"><div class="flex justify-between"><span>Subtotal</span> <span> </span></div> <div class="flex justify-between"><span>Delivery Fee</span> <span> </span></div> <div class="flex justify-between"><span>Platform Fee</span> <span class="text-muted-foreground line-through"> </span></div> <div class="flex justify-between"><span>Tax</span> <span> </span></div> <!> <div class="flex justify-between font-bold text-lg pt-2 border-t"><span>Total</span> <span> </span></div></div>'),Gt=c("<!> <!>",1),Ut=c('<div class="flex justify-between items-center"><div><div class="flex gap-2 items-center"><h1 class="text-3xl font-bold"> </h1> <span class="text-sm text-muted-foreground"> </span></div> <p class="text-muted-foreground"> </p></div> <div class="flex items-center gap-2"><!> <!> <!></div></div> <div class="grid grid-cols-3 gap-4"><!> <div><!></div> <!></div> <!> <!>',1),Et=c('<div class="text-center py-10"></div>'),Ht=c("<!> <!> <!> <!>",1),Jt=c('<p class="font-medium capitalize"> </p>'),Wt=c("<!> <!> <!> <!>",1),Xt=c("<!> <!>",1),Yt=c("<!> <!>",1),Zt=c('<div class="flex flex-col gap-3 w-[300px] my-4"><!> <!></div> <!>',1),ea=c("<!> <!>",1),ra=c("<!> <!>",1),ta=c('<div class="w-[95%] mx-auto p-6 space-y-6 h-[calc(100vh-60px)] overflow-y-auto hidescrollbarthumb text-zinc-700"><!> <!></div>');function qa(Rr,Vr){var hr,xr,yr,Pr,br;dt(Vr,!0);const[mr,Lr]=vt(),z=()=>Ir(Ur,"$query",mr),Br=()=>Ir(Er,"$deliveryAgentQuery",mr);async function Kr(n){return(await Me.get(`/orders/order?orderId=${n}`)).data}async function Gr(){return await(await Me.get("/deliveryagent/select")).data}const Ur=Mr({queryKey:["order fetch"],queryFn:()=>{var n;return Kr((n=pt.params)==null?void 0:n.order)}}),Er=Mr({queryKey:["delivery agent fetch"],queryFn:()=>Gr()});async function Hr(n){var $,g;if(n){if(n==="assigned"&&!r(Ne)){ve.error("Please select a delivery agent");return}if(n=="accepted"){qe(nr,!0);return}try{await Me.patch(`/orders/update-status/${(g=($=z().data)==null?void 0:$.order)==null?void 0:g._id}`,{status:n}),ve.success("Order status updated successfully"),z().refetch()}catch{ve.error("Failed to update order status")}}}function Jr(){var n;return(n=z().data)==null?void 0:n.order.products.some($=>$.quantity!==2)}async function Wr(n,$){try{await Me.post("/orders/updatequantities",{orderId:n,products:$}),ve.success("Order quantities updated successfully"),z().refetch()}catch{ve.error("Failed to update order quantities")}}function Xr(n,$){var M;const g=(M=z().data)==null?void 0:M.order.products.find(fe=>fe.productId===n);g?(g.quantity=Math.max(1,$),ve.success(`Product ${n} updated with quantity: ${g.quantity}`)):console.log(`Product ${n} not found`)}async function Yr(){var $,g;const n=($=z().data)==null?void 0:$.order.products.map(M=>({productId:M.productId._id,quantity:M.quantity}));await Wr((g=z().data)==null?void 0:g.order._id,n)}async function Zr(n){var $;try{const g=($=z().data)==null?void 0:$.order,M=g==null?void 0:g._id;if(g&&g.products.length===1){ve.error("Cannot remove the last product in the order");return}await Me.post("/orders/removeproduct",{orderId:M,productId:n}),ve.success("Product removed successfully"),z().refetch()}catch{ve.error("Failed to remove product")}}async function et(n){var $,g;try{const[M]=n.split(" -&- ");await Me.patch(`/orders/assign-agent/${(g=($=z().data)==null?void 0:$.order)==null?void 0:g._id}`,{agentId:M}),ve.success("Delivery agent assigned successfully"),z().refetch()}catch{ve.error("Failed to assign delivery agent")}}async function rt(){var n,$;Jr()&&await Yr();try{await Me.patch(`/orders/update-status/${($=(n=z().data)==null?void 0:n.order)==null?void 0:$._id}`,{preparationTime:r(cr).toString(),status:"accepted"}),ve.success("Order status updated successfully"),z().refetch(),qe(nr,!1)}catch{console.log("error")}}let lr=vr(Te(((xr=(hr=z().data)==null?void 0:hr.order)==null?void 0:xr.status)||"pending")),Ne=vr(Te(((br=(Pr=(yr=z().data)==null?void 0:yr.order)==null?void 0:Pr.deliveryAgent)==null?void 0:br.name)||"")),nr=vr(!1),cr=vr(15);lt(()=>{var n,$,g,M,fe,ue,oe,i,ye,Se;qe(lr,Te((($=(n=z().data)==null?void 0:n.order)==null?void 0:$.status)||"pending")),qe(Ne,Te((M=(g=z().data)==null?void 0:g.order)!=null&&M.deliveryAgent?`${(oe=(ue=(fe=z().data)==null?void 0:fe.order)==null?void 0:ue.deliveryAgent)==null?void 0:oe._id} -&- ${(Se=(ye=(i=z().data)==null?void 0:i.order)==null?void 0:ye.deliveryAgent)==null?void 0:Se.name}`:""))});var pr=ta();ut(n=>{var $=gt();V(()=>{var g,M;return it.title=`Dashboard | Order - ${(((M=(g=z().data)==null?void 0:g.order)==null?void 0:M.orderId)||"")??""}`}),e(n,$)});var gr=o(pr);{var tt=n=>{var $=ht();e(n,$)},at=n=>{var $=T(),g=l($);{var M=ue=>{var oe=Ut();const i=De(()=>z().data.order);var ye=l(oe),Se=o(ye),Re=o(Se),Ve=o(Re),_r=o(Ve);s(Ve);var Le=t(Ve,2),We=o(Le);s(Le),s(Re);var Be=t(Re,2),$r=o(Be);s(Be),s(Se);var Pe=t(Se,2),ze=o(Pe);const Ke=De(()=>["cancelled","delivered"].includes(r(i).status));var Ce=De(()=>r(Ke));a(ze,()=>Or,(N,E)=>{E(N,{type:"single",name:"category",onValueChange:et,get disabled(){return r(Ce)},get value(){return r(Ne)},set value(C){qe(Ne,Te(C))},children:(C,le)=>{var O=xt(),k=l(O);a(k,()=>Ar,(h,f)=>{f(h,{class:"w-[180px] ",children:(_,K)=>{b();var d=q();V(p=>m(d,p),[()=>r(Ne)?r(Ne).split(" -&- ")[1]:"Select Agent"]),e(_,d)},$$slots:{default:!0}})});var L=t(k,2);a(L,()=>Sr,(h,f)=>{f(h,{children:(_,K)=>{var d=T(),p=l(d);a(p,()=>zr,(x,I)=>{I(x,{children:(v,A)=>{var u=T(),y=l(u);He(y,1,()=>{var P;return((P=Br().data)==null?void 0:P.agents)||[]},Je,(P,D)=>{var S=T(),Q=l(S),B=De(()=>`${r(D)._id} -&- ${r(D).name}`);a(Q,()=>Cr,(j,G)=>{G(j,{get value(){return r(B)},get label(){return r(D).name},children:(R,w)=>{b();var X=q();V(()=>m(X,r(D).name)),e(R,X)},$$slots:{default:!0}})}),e(P,S)}),e(v,u)},$$slots:{default:!0}})}),e(_,d)},$$slots:{default:!0}})}),e(C,O)},$$slots:{default:!0}})});var $e=t(ze,2);const me=De(()=>["cancelled","delivered"].includes(r(i).status));var Oe=De(()=>r(me));a($e,()=>Or,(N,E)=>{E(N,{type:"single",onValueChange:Hr,get disabled(){return r(Oe)},get value(){return r(lr)},set value(C){qe(lr,Te(C))},children:(C,le)=>{var O=Pt(),k=l(O);a(k,()=>Ar,(h,f)=>{f(h,{class:"w-[180px]",children:(_,K)=>{var d=yt(),p=o(d,!0);s(d),V(()=>m(p,r(lr))),e(_,d)},$$slots:{default:!0}})});var L=t(k,2);a(L,()=>Sr,(h,f)=>{f(h,{children:(_,K)=>{var d=T(),p=l(d);a(p,()=>zr,(x,I)=>{I(x,{children:(v,A)=>{var u=T(),y=l(u);He(y,17,()=>_t,Je,(P,D)=>{var S=T(),Q=l(S);a(Q,()=>Cr,(B,j)=>{j(B,{get value(){return r(D)},class:"capitalize",children:(G,R)=>{b();var w=q();V(()=>m(w,r(D))),e(G,w)},$$slots:{default:!0}})}),e(P,S)}),e(v,u)},$$slots:{default:!0}})}),e(_,d)},$$slots:{default:!0}})}),e(C,O)},$$slots:{default:!0}})});var be=t($e,2);wr(be,{onclick:()=>window.history.back(),class:"cursor-pointer font-bold",children:(N,E)=>{b();var C=bt(),le=t(l(C));Fr(le,{icon:"lets-icons:refund-back",class:"w-6 h-6 font-bold"}),e(N,C)},$$slots:{default:!0}}),s(Pe),s(ye);var de=t(ye,2),ke=o(de);a(ke,()=>dr,(N,E)=>{E(N,{class:"mt-4 col-span-1 bg-zinc-100 border-red-300 border-2 border-solid",children:(C,le)=>{var O=wt(),k=l(O);a(k,()=>ar,(h,f)=>{f(h,{children:(_,K)=>{var d=T(),p=l(d);a(p,()=>sr,(x,I)=>{I(x,{children:(v,A)=>{b();var u=q("Customer Information");e(v,u)},$$slots:{default:!0}})}),e(_,d)},$$slots:{default:!0}})});var L=t(k,2);a(L,()=>or,(h,f)=>{f(h,{children:(_,K)=>{var d=It(),p=o(d),x=t(o(p),2),I=o(x,!0);s(x),s(p);var v=t(p,2),A=t(o(v),2),u=o(A,!0);s(A),s(v);var y=t(v,2),P=t(o(y),2),D=o(P,!0);s(P),s(y),s(d),V(()=>{m(I,r(i).user.username),m(u,r(i).user.email),m(D,r(i).user.mobile)}),e(_,d)},$$slots:{default:!0}})}),e(C,O)},$$slots:{default:!0}})});var Qe=t(ke,2),Xe=o(Qe);a(Xe,()=>dr,(N,E)=>{E(N,{class:"mt-4 bg-zinc-100 border-red-300 border-2 border-solid",children:(C,le)=>{var O=At(),k=l(O);a(k,()=>ar,(h,f)=>{f(h,{children:(_,K)=>{var d=T(),p=l(d);a(p,()=>sr,(x,I)=>{I(x,{children:(v,A)=>{b();var u=q("Delivery Address");e(v,u)},$$slots:{default:!0}})}),e(_,d)},$$slots:{default:!0}})});var L=t(k,2);a(L,()=>or,(h,f)=>{f(h,{children:(_,K)=>{var d=T(),p=l(d);{var x=v=>{var A=Dt(),u=o(A),y=o(u),P=o(y,!0);s(y);var D=t(y,2),S=o(D,!0);s(D),s(u);var Q=t(u,2),B=o(Q),j=o(B,!0);s(B);var G=t(B,2),R=o(G,!0);s(G);var w=t(G,2),X=o(w,!0);s(w),s(Q);var Y=t(Q,2),Z=o(Y),ne=o(Z,!0);s(Z);var ce=t(Z,2);{var Ge=je=>{var we=qt();V(()=>ct(we,"href",`https://www.google.com/maps?q=${r(i).addressId.latitude},${r(i).addressId.longitude}`)),e(je,we)};Ae(ce,je=>{r(i).addressId.latitude&&r(i).addressId.longitude&&je(Ge)})}s(Y),s(A),V(()=>{m(P,r(i).addressId.receiverName),m(S,r(i).addressId.receiverMobile),m(j,r(i).addressId.flatorHouseno),m(R,r(i).addressId.area),m(X,r(i).addressId.landmark),m(ne,r(i).addressId.addressType)}),e(v,A)},I=v=>{var A=Tt();e(v,A)};Ae(p,v=>{r(i).addressId?v(x):v(I,!1)})}e(_,d)},$$slots:{default:!0}})}),e(C,O)},$$slots:{default:!0}})}),s(Qe);var ge=t(Qe,2);a(ge,()=>dr,(N,E)=>{E(N,{class:"mt-4 bg-zinc-100 border-red-300 border-2 border-solid",children:(C,le)=>{var O=zt(),k=l(O);a(k,()=>ar,(h,f)=>{f(h,{children:(_,K)=>{var d=T(),p=l(d);a(p,()=>sr,(x,I)=>{I(x,{children:(v,A)=>{b();var u=q("Payment Information");e(v,u)},$$slots:{default:!0}})}),e(_,d)},$$slots:{default:!0}})});var L=t(k,2);a(L,()=>or,(h,f)=>{f(h,{children:(_,K)=>{var d=St(),p=o(d),x=t(o(p),2),I=o(x,!0);s(x),s(p);var v=t(p,2),A=t(o(v),2),u=o(A,!0);s(A),s(v);var y=t(v,2),P=t(o(y),2),D=o(P,!0);s(P),s(y),s(d),V(()=>{m(I,r(i).paymentMethod?r(i).paymentMethod:"Not specified"),m(u,r(i).paymentStatus),m(D,r(i).razorPayId??"-")}),e(_,d)},$$slots:{default:!0}})}),e(C,O)},$$slots:{default:!0}})}),s(de);var Ye=t(de,2);a(Ye,()=>dr,(N,E)=>{E(N,{class:"bg-zinc-100 border-red-300 border-2 border-solid",children:(C,le)=>{var O=Lt(),k=l(O);a(k,()=>ar,(h,f)=>{f(h,{children:(_,K)=>{var d=T(),p=l(d);a(p,()=>sr,(x,I)=>{I(x,{children:(v,A)=>{b();var u=q("Order Items");e(v,u)},$$slots:{default:!0}})}),e(_,d)},$$slots:{default:!0}})});var L=t(k,2);a(L,()=>or,(h,f)=>{f(h,{children:(_,K)=>{var d=T(),p=l(d);a(p,()=>kr,(x,I)=>{I(x,{children:(v,A)=>{var u=Vt(),y=l(u);a(y,()=>Qr,(D,S)=>{S(D,{children:(Q,B)=>{var j=T(),G=l(j);a(G,()=>ur,(R,w)=>{w(R,{children:(X,Y)=>{var Z=Ct(),ne=l(Z);a(ne,()=>pe,(H,J)=>{J(H,{children:(W,he)=>{b();var ee=q("Sl No.");e(W,ee)},$$slots:{default:!0}})});var ce=t(ne,2);a(ce,()=>pe,(H,J)=>{J(H,{children:(W,he)=>{b();var ee=q("Item");e(W,ee)},$$slots:{default:!0}})});var Ge=t(ce,2);a(Ge,()=>pe,(H,J)=>{J(H,{children:(W,he)=>{b();var ee=q("Quantity");e(W,ee)},$$slots:{default:!0}})});var je=t(Ge,2);a(je,()=>pe,(H,J)=>{J(H,{children:(W,he)=>{b();var ee=q("Dips");e(W,ee)},$$slots:{default:!0}})});var we=t(je,2);a(we,()=>pe,(H,J)=>{J(H,{children:(W,he)=>{b();var ee=q("Special Suggestion");e(W,ee)},$$slots:{default:!0}})});var Ze=t(we,2);a(Ze,()=>pe,(H,J)=>{J(H,{children:(W,he)=>{b();var ee=q("Price");e(W,ee)},$$slots:{default:!0}})});var ir=t(Ze,2);a(ir,()=>pe,(H,J)=>{J(H,{children:(W,he)=>{b();var ee=q("Total");e(W,ee)},$$slots:{default:!0}})}),e(X,Z)},$$slots:{default:!0}})}),e(Q,j)},$$slots:{default:!0}})});var P=t(y,2);a(P,()=>jr,(D,S)=>{S(D,{children:(Q,B)=>{var j=T(),G=l(j);He(G,17,()=>r(i).products,Je,(R,w,X)=>{var Y=T(),Z=l(Y);a(Z,()=>ur,(ne,ce)=>{ce(ne,{children:(Ge,je)=>{var we=Rt(),Ze=l(we);a(Ze,()=>_e,(re,te)=>{te(re,{children:(ae,Ue)=>{b();var F=q();F.nodeValue=X+1,e(ae,F)},$$slots:{default:!0}})});var ir=t(Ze,2);a(ir,()=>_e,(re,te)=>{te(re,{children:(ae,Ue)=>{var F=Ot(),er=o(F,!0);s(F),V(()=>{var Ee;return m(er,(Ee=r(w).productId)==null?void 0:Ee.productName)}),e(ae,F)},$$slots:{default:!0}})});var H=t(ir,2);a(H,()=>_e,(re,te)=>{te(re,{children:(ae,Ue)=>{b();var F=q();V(()=>m(F,r(w).quantity)),e(ae,F)},$$slots:{default:!0}})});var J=t(H,2);a(J,()=>_e,(re,te)=>{te(re,{children:(ae,Ue)=>{var F=T(),er=l(F);{var Ee=se=>{var U=T(),rr=l(U);He(rr,17,()=>r(w).dips,Je,(tr,xe)=>{var ie=kt(),Fe=o(ie);s(ie),V(()=>m(Fe,`${r(xe).name??""} x ${r(xe).quantity??""} (₹${r(xe).totalAmount??""})`)),e(tr,ie)}),e(se,U)},fr=se=>{var U=Qt();e(se,U)};Ae(er,se=>{var U;((U=r(w).dips)==null?void 0:U.length)>0?se(Ee):se(fr,!1)})}e(ae,F)},$$slots:{default:!0}})});var W=t(J,2);a(W,()=>_e,(re,te)=>{te(re,{children:(ae,Ue)=>{var F=T(),er=l(F);{var Ee=se=>{var U=Ft();He(U,21,()=>r(w).suggestions,Je,(rr,tr)=>{var xe=jt(),ie=o(xe,!0);s(xe),V(()=>m(ie,r(tr).name)),e(rr,xe)}),s(U),e(se,U)},fr=se=>{var U=T(),rr=l(U);{var tr=ie=>{var Fe=Mt(),ot=o(Fe,!0);s(Fe),V(()=>m(ot,r(w).customSuggestion)),e(ie,Fe)},xe=ie=>{var Fe=Nt();e(ie,Fe)};Ae(rr,ie=>{r(w).customSuggestion?ie(tr):ie(xe,!1)},!0)}e(se,U)};Ae(er,se=>{var U;((U=r(w).suggestions)==null?void 0:U.length)>0?se(Ee):se(fr,!1)})}e(ae,F)},$$slots:{default:!0}})});var he=t(W,2);a(he,()=>_e,(re,te)=>{te(re,{children:(ae,Ue)=>{b();var F=q();V(()=>m(F,`₹${r(w).price??""}`)),e(ae,F)},$$slots:{default:!0}})});var ee=t(he,2);a(ee,()=>_e,(re,te)=>{te(re,{children:(ae,Ue)=>{b();var F=q();V(()=>m(F,`₹${r(w).totalAmount??""}`)),e(ae,F)},$$slots:{default:!0}})}),e(Ge,we)},$$slots:{default:!0}})}),e(R,Y)}),e(Q,j)},$$slots:{default:!0}})}),e(v,u)},$$slots:{default:!0}})}),e(_,d)},$$slots:{default:!0}})}),e(C,O)},$$slots:{default:!0}})});var Ie=t(Ye,2);a(Ie,()=>dr,(N,E)=>{E(N,{class:"bg-zinc-100 border-red-300 border-2 border-solid",children:(C,le)=>{var O=Gt(),k=l(O);a(k,()=>ar,(h,f)=>{f(h,{children:(_,K)=>{var d=T(),p=l(d);a(p,()=>sr,(x,I)=>{I(x,{children:(v,A)=>{b();var u=q("Order Summary");e(v,u)},$$slots:{default:!0}})}),e(_,d)},$$slots:{default:!0}})});var L=t(k,2);a(L,()=>or,(h,f)=>{f(h,{children:(_,K)=>{var d=Kt(),p=o(d),x=t(o(p),2),I=o(x);s(x),s(p);var v=t(p,2),A=t(o(v),2),u=o(A);s(A),s(v);var y=t(v,2),P=t(o(y),2),D=o(P);s(P),s(y);var S=t(y,2),Q=t(o(S),2),B=o(Q);s(Q),s(S);var j=t(S,2);{var G=Y=>{var Z=Bt(),ne=t(o(Z),2),ce=o(ne);s(ne),s(Z),V(()=>m(ce,`-${r(i).couponDiscount??""} ₹`)),e(Y,Z)};Ae(j,Y=>{r(i).couponDiscount>0&&Y(G)})}var R=t(j,2),w=t(o(R),2),X=o(w);s(w),s(R),s(d),V(()=>{var Y,Z,ne,ce;m(I,`₹${r(i).subtotal??""}`),m(u,`₹${r(i).deliveryPrice??""}`),m(D,`₹${r(i).platformFee??""}`),m(B,`₹${r(i).tax??""}`),m(X,`₹${((Y=r(i))==null?void 0:Y.totalPrice)-(((Z=r(i))==null?void 0:Z.couponDiscount)>0?(ne=r(i))==null?void 0:ne.couponDiscount:0)+((ce=r(i))==null?void 0:ce.deliveryPrice)}`)}),e(_,d)},$$slots:{default:!0}})}),e(C,O)},$$slots:{default:!0}})}),V(N=>{m(_r,`Order ${r(i).orderId??""}`),m(We,`(${r(i).status??""})`),m($r,`Placed on ${N??""}`)},[()=>new Date(r(i).createdAt).toLocaleString("en-IN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})]),e(ue,oe)},fe=ue=>{var oe=Et();e(ue,oe)};Ae(g,ue=>{var oe;(oe=z().data)!=null&&oe.order?ue(M):ue(fe,!1)},!0)}e(n,$)};Ae(gr,n=>{z().isLoading?n(tt):n(at,!1)})}var st=t(gr,2);a(st,()=>$t,(n,$)=>{$(n,{onOpenChange:g=>qe(nr,Te(g)),get open(){return r(nr)},children:(g,M)=>{var fe=T(),ue=l(fe);a(ue,()=>ft,(oe,i)=>{i(oe,{children:(ye,Se)=>{var Re=ra(),Ve=l(Re);a(Ve,()=>qr,(Le,We)=>{We(Le,{children:(Be,$r)=>{var Pe=Yt();const ze=De(()=>z().data.order);var Ke=l(Pe);a(Ke,()=>Dr,($e,me)=>{me($e,{children:(Oe,be)=>{b();var de=q("Order Items");e(Oe,de)},$$slots:{default:!0}})});var Ce=t(Ke,2);a(Ce,()=>Nr,($e,me)=>{me($e,{children:(Oe,be)=>{var de=T(),ke=l(de);a(ke,()=>kr,(Qe,Xe)=>{Xe(Qe,{children:(ge,Ye)=>{var Ie=Xt(),N=l(Ie);a(N,()=>Qr,(C,le)=>{le(C,{children:(O,k)=>{var L=T(),h=l(L);a(h,()=>ur,(f,_)=>{_(f,{children:(K,d)=>{var p=Ht(),x=l(p);a(x,()=>pe,(u,y)=>{y(u,{children:(P,D)=>{b();var S=q("Sl No.");e(P,S)},$$slots:{default:!0}})});var I=t(x,2);a(I,()=>pe,(u,y)=>{y(u,{children:(P,D)=>{b();var S=q("Item");e(P,S)},$$slots:{default:!0}})});var v=t(I,2);a(v,()=>pe,(u,y)=>{y(u,{children:(P,D)=>{b();var S=q("Quantity");e(P,S)},$$slots:{default:!0}})});var A=t(v,2);a(A,()=>pe,(u,y)=>{y(u,{class:"text-center",children:(P,D)=>{b();var S=q("Action");e(P,S)},$$slots:{default:!0}})}),e(K,p)},$$slots:{default:!0}})}),e(O,L)},$$slots:{default:!0}})});var E=t(N,2);a(E,()=>jr,(C,le)=>{le(C,{children:(O,k)=>{var L=T(),h=l(L);He(h,17,()=>{var f;return(f=r(ze))==null?void 0:f.products},Je,(f,_,K)=>{var d=T(),p=l(d);a(p,()=>ur,(x,I)=>{I(x,{children:(v,A)=>{var u=Wt(),y=l(u);a(y,()=>_e,(Q,B)=>{B(Q,{children:(j,G)=>{b();var R=q();R.nodeValue=K+1,e(j,R)},$$slots:{default:!0}})});var P=t(y,2);a(P,()=>_e,(Q,B)=>{B(Q,{children:(j,G)=>{var R=Jt(),w=o(R,!0);s(R),V(()=>{var X;return m(w,(X=r(_).productId)==null?void 0:X.productName)}),e(j,R)},$$slots:{default:!0}})});var D=t(P,2);a(D,()=>_e,(Q,B)=>{B(Q,{children:(j,G)=>{var R=De(()=>r(_).quantity===1);Tr(j,{type:"number",class:"w-16 px-1 py-1 border border-black rounded-md text-center",min:"1",get max(){return r(_).quantity},oninput:w=>{const X=w.target,Y=parseInt(X.value,10)||1;Xr(r(_).productId._id,Y)},get readonly(){return r(R)},get value(){return r(_).quantity},set value(w){r(_).quantity=w}})},$$slots:{default:!0}})});var S=t(D,2);a(S,()=>_e,(Q,B)=>{B(Q,{class:"flex justify-center items-center",children:(j,G)=>{Fr(j,{onclick:()=>Zr(r(_).productId._id),icon:"gg:close-o",class:"w-6 h-6 mt-2 text-red-500 cursor-pointer font-bold"})},$$slots:{default:!0}})}),e(v,u)},$$slots:{default:!0}})}),e(f,d)}),e(O,L)},$$slots:{default:!0}})}),e(ge,Ie)},$$slots:{default:!0}})}),e(Oe,de)},$$slots:{default:!0}})}),e(Be,Pe)},$$slots:{default:!0}})});var _r=t(Ve,2);a(_r,()=>qr,(Le,We)=>{We(Le,{children:(Be,$r)=>{var Pe=ea(),ze=l(Pe);a(ze,()=>Dr,(Ce,$e)=>{$e(Ce,{children:(me,Oe)=>{b();var be=q("Preparation Time");e(me,be)},$$slots:{default:!0}})});var Ke=t(ze,2);a(Ke,()=>Nr,(Ce,$e)=>{$e(Ce,{children:(me,Oe)=>{var be=Zt(),de=l(be),ke=o(de);mt(ke,{for:"preparationTime",children:(ge,Ye)=>{b();var Ie=q("Minutes");e(ge,Ie)},$$slots:{default:!0}});var Qe=t(ke,2);Tr(Qe,{type:"number",id:"preparationTime",placeholder:"1",step:"5",min:"5",max:"60",get value(){return r(cr)},set value(ge){qe(cr,Te(ge))}}),s(de);var Xe=t(de,2);wr(Xe,{onclick:rt,class:"",children:(ge,Ye)=>{b();var Ie=q("Update");e(ge,Ie)},$$slots:{default:!0}}),e(me,be)},$$slots:{default:!0}})}),e(Be,Pe)},$$slots:{default:!0}})}),e(ye,Re)},$$slots:{default:!0}})}),e(g,fe)},$$slots:{default:!0}})}),s(pr),e(Rr,pr),nt(),Lr()}export{qa as component};
