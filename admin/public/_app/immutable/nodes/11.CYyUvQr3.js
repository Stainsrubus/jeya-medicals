import"../chunks/Bg9kRutz.js";import"../chunks/69_IOA4Y.js";import{w as Ut,p as bt,b as J,u as Pt,g as e,X as M,d as l,s as a,t as V,a as gt,c as n,n as d,e as Me,r as i,f as O,ah as Kt,$ as Bt}from"../chunks/DUB8bsv0.js";import{s as G}from"../chunks/3nqkJHLA.js";import{b as _,a as r,t as g,c as ye,h as Xt}from"../chunks/DzHOuBan.js";import{i as Ht}from"../chunks/B06qfcxv.js";import{p as v,d as we,c as at,i as ue,s as ht,a as Se,e as Dt}from"../chunks/DOmRzZIo.js";import{R as Jt}from"../chunks/B_rXABv2.js";import{e as it,i as lt}from"../chunks/DJVbMBk7.js";import{s as Vt,z as yt,d as Wt,a as Yt}from"../chunks/BTJgjqp0.js";import{s as _t}from"../chunks/BHIRq8YZ.js";import{d as Tt}from"../chunks/DbFrp4aS.js";import{g as qt}from"../chunks/CSUTd-D0.js";import{_ as Ve}from"../chunks/c3aSOx29.js";import{B as tt}from"../chunks/CJvYq0KN.js";import{I as Ie}from"../chunks/CJXCr1W0.js";import{L as Fe}from"../chunks/DSP103xp.js";import{T as Gt}from"../chunks/B1uj5A9L.js";import{I as Je}from"../chunks/CHPYNWro.js";import{o as Ot}from"../chunks/CHqt2rTE.js";import{i as $t}from"../chunks/DW9MwCpa.js";import{z as Ge}from"../chunks/K85sQPP8.js";import{q as Lt}from"../chunks/tFu-0XeD.js";import{t as L}from"../chunks/CF63kifO.js";import{c as jt}from"../chunks/Dw1g5TC4.js";import{c as f}from"../chunks/yzD5jbIF.js";import{P as Zt,T as wt}from"../chunks/BTrfwMzp.js";import{R as er,D as tr,a as rr,b as or}from"../chunks/CeRZbImN.js";import{S as ar}from"../chunks/CJEhnKgE.js";import{T as sr,a as ir,b as kt,c as ke,d as lr,e as Ce}from"../chunks/4wux5xE3.js";/* empty css                */import{c as Ct}from"../chunks/B6Jqkcen.js";import{T as nr,a as It}from"../chunks/B_RvuQCl.js";import{T as St}from"../chunks/CBD-qeiU.js";const st=Ut({mode:"list",id:"",comboName:"",comboDescription:"",comboPrice:0,strikePrice:0,image:"",productsIncluded:[]}),Nt=Ge.object({comboName:Ge.string({message:"Combo name is required"}).max(50),comboDescription:Ge.string({message:"Description is required"}),comboPrice:Ge.number({message:"Combo price is required"}),strikePrice:Ge.number({message:"Strike price is required"}),image:Ge.string({message:"Image is required"}).optional()});var cr=g('<span class="invalid text-xs text-red-500"> </span>'),dr=g('<span class="invalid text-xs text-red-500"> </span>'),ur=g('<span class="invalid text-xs text-red-500"> </span>'),mr=g('<span class="invalid text-xs text-red-500"> </span>'),vr=g('Combo Image <span class="text-gray-500 text-xs">(Min 100 X 100) ~ 200kb</span>',1),pr=(be,z)=>z(),fr=g('<p class="text-xs text-zinc-500">* Click to remove image</p> <div class="flex gap-4"><div class="flex flex-col justify-center items-start gap-2 mt-2 hover:cursor-pointer hover:shadow-lg"><button><img class="w-[100px] h-[100px] object-cover rounded-md" alt="Combo Image"></button></div></div>',1),_r=g('<div class="flex gap-2 items-end mb-2  dark:bg-gray-800 p-2 rounded"><div class="flex-grow"><!></div> <div class="w-24"><!></div> <!></div>'),$r=(be,z,D,j,m)=>{l(z,v({productId:e(D)._id,productName:e(D).productName})),l(j,v(e(D).productName)),e(m)[0]=!1},br=g('<div class="p-2 hover:bg-gray-100 dark:hover:bg-gray-800 cursor-pointer"><span class="text-black dark:text-white"> </span></div>'),gr=g('<div class="dropdown-container absolute z-20 w-full bg-white dark:bg-gray-900 mt-1 border border-gray-200 dark:border-gray-700 rounded shadow-lg max-h-48 overflow-y-auto"></div>'),hr=g('<div class="max-w-[80%] mx-auto text-maintext h-[calc(100vh-120px)] overflow-y-auto hidescrollbarthumb"><form method="POST" class="grid gap-4 py-4"><div><!> <!> <!></div> <div><!> <!> <!></div> <div class="grid grid-cols-2 gap-4"><div><!> <!> <!></div> <div><!> <!> <!></div></div> <div><!> <!></div> <!> <div class="mt-4"><div class="flex justify-between items-center mb-2"><!></div> <!> <div class="flex gap-2 items-end mb-4"><div class="flex-grow"><!> <div class="relative"><!> <!></div></div> <div class="w-24"><!> <!></div> <!></div></div> <!></form></div>');function xr(be,z){bt(z,!0);const[D,j]=ht(),m=()=>Se(z.comboStore,"$comboStore",D),u=()=>Se(ee,"$form",D),Ne=()=>Se(dt,"$createComboMutation",D),A=()=>Se(ut,"$errors",D),me=()=>Se(mt,"$constraints",D);let K=J(""),B=J(!1),P=J(null),Q=J(null),y=J(v([])),ve=J(v([])),le=J(v([])),ne=null,pe=J(null),Z=J(1),E=J(v([])),fe=J(v([]));Pt(()=>{l(B,v(!!(m().mode==="create"&&m().id))),e(B)&&m().image?(l(Q,v(m().image)),l(y,v(m().productsIncluded||[]))):e(B)||(l(Q,null),l(P,null),l(y,v([]))),ne=document.getElementById("combo-image"),ze()}),Ot(()=>{const t=s=>{if(!s.target)return;const o=s.target;o.closest(".dropdown-container")||o.closest("#product-search")||(l(E,v(e(E).map(()=>!1))),e(E)[0]=!1)};return document.addEventListener("click",t),()=>{document.removeEventListener("click",t)}});async function ze(t){try{const s=await Ve.get(`/product/all?limit=100&q=${t||""}`);s.data.status&&(l(ve,v(s.data.products||[])),l(le,v(e(ve))))}catch(s){console.error("Failed to fetch products:",s),L.error("Failed to load products list")}}function rt(){if(!e(pe)||e(Z)<=0){L.error("Please select a product and enter a valid quantity.");return}if(e(y).some(s=>s.productId===e(pe).productId)){L.error("This product is already added to the combo.");return}l(y,v([...e(y),{productId:e(pe).productId,quantity:e(Z)}])),l(pe,null),l(Z,1),l(K,"")}function nt(t){e(y).splice(t,1),l(y,v([...e(y)])),e(fe).splice(t,1),e(E).splice(t,1),l(fe,v([...e(fe)])),l(E,v([...e(E)]))}function ct(t,s){if(s<=0){L.error("Quantity must be a positive number.");return}l(y,v(e(y).map((o,N)=>N===t?{...o,quantity:s}:o)))}const dt=jt({mutationFn:t=>e(B)?Ve.patch(`/combo-offer/update/${m().id}`,t,{headers:{"Content-Type":"multipart/form-data"}}):Ve.post("/combo-offer/create",t,{headers:{"Content-Type":"multipart/form-data"}}),onSuccess({data:t}){Lt.refetchQueries({queryKey:["combo fetch"]}),t.status||t.ok?(we(z.comboStore,M(m).mode="list",M(m)),ot(),l(P,null),l(Q,null),l(y,v([])),x(),qt("/hidden-admin-base-007/dashboard/comboOffer"),L(e(B)?"Combo Offer Updated ✅":"Combo Offer Created ✅")):L.error(t.message)},onError(t){console.error("Error:",t),L.error("An error occurred while processing your request.")}}),{form:ee,errors:ut,enhance:We,constraints:mt,reset:ot,validateForm:c}=Vt(Wt(yt(Nt)),{SPA:!0,validationMethod:"oninput",validators:yt(Nt),clearOnSubmit:"none",invalidateAll:!1,resetForm:!1,async onSubmit(){const{valid:t}=await c({focusOnError:!0});if(!t){L.error("Please fill out all required fields correctly.");return}if(!e(B)&&!e(P)){L.error("Image is required when creating a new combo offer.");return}if(e(y).length<=1){L.error("Please add at least two product to the combo.");return}if(e(y).find(N=>!N.productId||N.quantity<=0)){L.error("All products must have a valid product ID and quantity.");return}let o=new FormData;o.append("comboName",u().comboName),o.append("comboDescription",u().comboDescription),o.append("comboPrice",u().comboPrice.toString()),o.append("strikePrice",u().strikePrice.toString()),o.append("productsIncluded",JSON.stringify(e(y))),e(P)&&o.append("image",e(P)),Ne().mutate(o)}});Pt(()=>{e(B)?(we(ee,M(u).comboName=m().comboName,M(u)),we(ee,M(u).comboDescription=m().comboDescription,M(u)),we(ee,M(u).comboPrice=m().comboPrice,M(u)),we(ee,M(u).strikePrice=m().strikePrice||0,M(u))):ot()});function x(){l(P,null),l(Q,null),ne&&(ne.value="")}function b(t){var H;const o=(H=t.target.files)==null?void 0:H[0];if(!o)return;if(o.size>2e5){x(),L.error("Image size is too large! Max size is 200kb");return}const N=new Image;N.src=URL.createObjectURL(o),N.onload=()=>{const{width:Ee,height:He}=N;if(Ee<100||He<100){L.error("Image dimensions must be at least 100x100 pixels."),x();return}l(P,v(o)),l(Q,null)},N.onerror=()=>{x(),L.error("Invalid image file.")}}function ge(t){l(K,v(t)),t?(l(le,v(e(ve).filter(s=>s.productName.toLowerCase().includes(t.toLowerCase())))),e(le).length===0&&ze(t)):l(le,v(e(ve)))}function Ae(t){const s=e(ve).find(o=>o._id===t);return s?s.productName:"Select a product"}var De=hr(),Qe=n(De),Re=n(Qe),Ue=n(Re);Fe(Ue,{for:"comboName",children:(t,s)=>{d();var o=_("Combo Name");r(t,o)},$$slots:{default:!0}});var Ze=a(Ue,2),X=Me(()=>A().comboName?"true":void 0);Ie(Ze,at({id:"comboName",class:"pr-10 mt-1",placeholder:"Ex: Summer Special Combo...",get"aria-invalid"(){return e(X)}},()=>me().comboName,{get value(){return u().comboName},set value(t){we(ee,M(u).comboName=t,M(u))}}));var W=a(Ze,2);{var oe=t=>{var s=cr(),o=n(s,!0);i(s),V(()=>G(o,A().comboName)),r(t,s)};ue(W,t=>{A().comboName&&t(oe)})}i(Re);var ae=a(Re,2),R=n(ae);Fe(R,{for:"comboDescription",children:(t,s)=>{d();var o=_("Description");r(t,o)},$$slots:{default:!0}});var I=a(R,2),F=Me(()=>A().comboDescription?"true":void 0);Gt(I,at({id:"comboDescription",class:"pr-10 mt-1",placeholder:"Ex: Special combo offer with amazing products...",rows:3,get"aria-invalid"(){return e(F)}},()=>me().comboDescription,{get value(){return u().comboDescription},set value(t){we(ee,M(u).comboDescription=t,M(u))}}));var p=a(I,2);{var Te=t=>{var s=dr(),o=n(s,!0);i(s),V(()=>G(o,A().comboDescription)),r(t,s)};ue(p,t=>{A().comboDescription&&t(Te)})}i(ae);var se=a(ae,2),te=n(se),ce=n(te);Fe(ce,{for:"comboPrice",children:(t,s)=>{d();var o=_("Combo Price");r(t,o)},$$slots:{default:!0}});var he=a(ce,2),qe=Me(()=>A().comboPrice?"true":void 0);Ie(he,at({id:"comboPrice",class:"pr-10 mt-1",type:"number",placeholder:"Ex: 99.99",get"aria-invalid"(){return e(qe)}},()=>me().comboPrice,{get value(){return u().comboPrice},set value(t){we(ee,M(u).comboPrice=t,M(u))}}));var Ke=a(he,2);{var xe=t=>{var s=ur(),o=n(s,!0);i(s),V(()=>G(o,A().comboPrice)),r(t,s)};ue(Ke,t=>{A().comboPrice&&t(xe)})}i(te);var Pe=a(te,2),_e=n(Pe);Fe(_e,{for:"strikePrice",children:(t,s)=>{d();var o=_("Strike Price (Original)");r(t,o)},$$slots:{default:!0}});var Oe=a(_e,2),Ye=Me(()=>A().strikePrice?"true":void 0);Ie(Oe,at({id:"strikePrice",class:"pr-10 mt-1",type:"number",placeholder:"Ex: 129.99",get"aria-invalid"(){return e(Ye)}},()=>me().strikePrice,{get value(){return u().strikePrice},set value(t){we(ee,M(u).strikePrice=t,M(u))}}));var w=a(Oe,2);{var k=t=>{var s=mr(),o=n(s,!0);i(s),V(()=>G(o,A().strikePrice)),r(t,s)};ue(w,t=>{A().strikePrice&&t(k)})}i(Pe),i(se);var h=a(se,2),Y=n(h);Fe(Y,{for:"combo-image",children:(t,s)=>{d();var o=vr();d(),r(t,o)},$$slots:{default:!0}});var C=a(Y,2),T=Me(()=>!e(B));Ie(C,{id:"combo-image",get required(){return e(T)},class:"pr-10 mt-1",type:"file",accept:".jpg, .jpeg, .png, .webp",onchange:b}),i(h);var S=a(h,2);{var q=t=>{var s=fr(),o=a(O(s),2),N=n(o),H=n(N);H.__click=[pr,x];var Ee=n(H);i(H),i(N),i(o),V(He=>_t(Ee,"src",He),[()=>e(P)?URL.createObjectURL(e(P)):`${$t}${e(Q)}`]),r(t,s)};ue(S,t=>{(e(P)||e(Q))&&t(q)})}var ie=a(S,2),$=n(ie),$e=n($);Fe($e,{children:(t,s)=>{d();var o=_("Products Included");r(t,o)},$$slots:{default:!0}}),i($);var Le=a($,2);it(Le,17,()=>e(y),lt,(t,s,o)=>{var N=_r(),H=n(N),Ee=n(H);const He=Me(()=>Ae(e(s).productId));var zt=Me(()=>e(He));Ie(Ee,{id:`product-${o}`,type:"text",get value(){return e(zt)},readonly:!0,class:"w-full mt-1"}),i(H);var ft=a(H,2),At=n(ft);Ie(At,{id:`qty-${o}`,type:"number",min:"1",class:"mt-1",onchange:et=>ct(o,parseInt(et.currentTarget.value)),get value(){return e(s).quantity},set value(et){e(s).quantity=et}}),i(ft);var Qt=a(ft,2);tt(Qt,{type:"button",variant:"destructive",size:"sm",class:"mb-0",onclick:()=>nt(o),children:(et,Ar)=>{d();var Rt=_("Remove");r(et,Rt)},$$slots:{default:!0}}),i(N),r(t,N)});var de=a(Le,2),U=n(de),re=n(U);Fe(re,{for:"product-search",class:"text-xs",children:(t,s)=>{d();var o=_("Product");r(t,o)},$$slots:{default:!0}});var Be=a(re,2),je=n(Be);Ie(je,{id:"product-search",type:"text",placeholder:"Search and select products...",autocomplete:"off",oninput:t=>ge(t.currentTarget.value),onfocus:()=>e(E)[0]=!0,class:"w-full mt-1",get value(){return e(K)},set value(t){l(K,v(t))}});var Xe=a(je,2);{var vt=t=>{var s=gr();it(s,21,()=>e(le),lt,(o,N)=>{var H=br();H.__click=[$r,pe,N,K,E];var Ee=n(H),He=n(Ee,!0);i(Ee),i(H),V(()=>G(He,e(N).productName)),r(o,H)}),i(s),r(t,s)};ue(Xe,t=>{e(E)[0]&&e(le).length>0&&t(vt)})}i(Be),i(U);var pt=a(U,2),xt=n(pt);Fe(xt,{for:"quantity",class:"text-xs",children:(t,s)=>{d();var o=_("Quantity");r(t,o)},$$slots:{default:!0}});var Et=a(xt,2);Ie(Et,{id:"quantity",type:"number",min:"1",class:"mt-1",get value(){return e(Z)},set value(t){l(Z,v(t))}}),i(pt);var Ft=a(pt,2);tt(Ft,{type:"button",variant:"outline",size:"sm",class:"mb-0 text-black",onclick:rt,children:(t,s)=>{d();var o=_("Add");r(t,o)},$$slots:{default:!0}}),i(de),i(ie);var Mt=a(ie,2);tt(Mt,{class:"w-[100px] mt-4",type:"submit",get disabled(){return Ne().isPending},children:(t,s)=>{d();var o=_();V(()=>G(o,e(B)?"Update":Ne().isPending?"Creating...":"Create")),r(t,o)},$$slots:{default:!0}}),i(Qe),Yt(Qe,t=>We==null?void 0:We(t)),i(De),r(be,De),gt(),j()}Tt(["click"]);var Pr=g("<!> <!> <!> <!> <!> <!> <!> <!> <!>",1),yr=g('<div class="flex gap-2"><span> </span> <span> </span></div>'),wr=g('<button><div class="p-4 shadow-lg rounded-lg border border-gray-100 w-[85px] flex justify-center items-center"><img class="h-[40px] rounded-sm cursor-pointer"></div></button>'),kr=(be,z,D,j)=>{Dt(D.comboStore,v({...z(),mode:"create",id:e(j)._id,comboName:e(j).comboName,strikePrice:e(j).strikePrice,comboPrice:e(j).comboPrice,comboDescription:e(j).comboDescription,image:e(j).image,productsIncluded:e(j).productsIncluded.map(m=>({productId:m.productId._id,quantity:m.quantity}))})),qt(`/hidden-admin-base-007/dashboard/comboOffer?mode=create&id=${e(j)._id}`)},Cr=(be,z,D,j)=>(l(z,!0),l(D,v(e(j)._id))),Ir=g('<div class="flex items-center gap-4"><button><!></button> <button><!></button></div>'),Sr=g("<!> <!> <!> <!> <!> <!> <!> <!> <!>",1),Nr=g("<!> <!> <!>",1),Dr=g('Do you want to delete this Category? <span class="text-sm font-semibold">This action cannot be undone.</span>',1),Tr=g('<div class="flex justify-center items-center"><!></div> <!>',1),qr=g('<!> <div class="flex gap-4 justify-around"><!> <!></div>',1),Or=g('<div class="mt-6 text-maintext"><div class="w-[50%] ml-auto mb-4 flex items-center gap-5"><div class="grid gap-2 w-full relative"><!> <!></div></div> <div class="overflow-x-auto h-[calc(100vh-300px)] overflow-y-auto hidescrollbarthumb"><!></div> <!> <!></div>');function Lr(be,z){bt(z,!0);const[D,j]=ht(),m=()=>Se(pe,"$query",D),u=()=>Se(z.comboStore,"$comboStore",D),Ne=()=>Se(Z,"$deleteMutation",D);async function A(c=10,x=1,b=""){return(await Ve.get(`/combo-offer/all?limit=${c}&page=${x}`)).data}async function me(){return(await Ve.get("/combo/activeStatus")).data}Ot(()=>{me()});let K=J(1),B=10,P=J(""),Q=J(!1),y=J("");async function ve(c,x){try{const b=await Ve.delete(`/combo-offer/${c}`,{params:{permanent:!1}});b.data.status?(L.success(`Combo ${x?"deactivated":"activated"} successfully`),m().refetch()):L.error(b.data.message||"Failed to update Combo status")}catch(b){console.error("Error:",b),L.error("Failed to update Combo status")}}let le;function ne(){clearTimeout(le),le=setTimeout(async()=>{l(K,1),m().refetch()},500)}Ct({queryKey:["Combo Status fetch"],queryFn:()=>me()});const pe=Ct({queryKey:["combo fetch",ne],queryFn:()=>A(B,e(K),e(P)),staleTime:0});Kt(pe,c=>{var b;if(!((b=c==null?void 0:c.data)!=null&&b.combos)||c.data.combos.length===0)return!1;const x=c.data.combos.filter(ge=>ge.active).length;return x>c.data.combos.length-x});const Z=jt({mutationFn:({id:c,permanent:x})=>Ve.delete(`/combo-offer/${c}`,{params:{permanent:x}}),onSuccess({data:c}){Lt.refetchQueries({queryKey:["combo fetch"]}),L((c==null?void 0:c.message)??"Combo Deleted ✅"),l(Q,!1),l(y,"")},onError(c){console.error("Error:",c),L.error("Failed to delete Combo")}});var E=Or(),fe=n(E),ze=n(fe),rt=n(ze);Ie(rt,{type:"text",required:!0,class:"pr-10",placeholder:"Search Combo",oninput:ne,get value(){return e(P)},set value(c){l(P,v(c))}});var nt=a(rt,2);{var ct=c=>{Je(c,{icon:"iconamoon:search",class:"absolute right-2 bottom-2.5 cursor-pointer text-gray-400 text-xl"})},dt=c=>{Je(c,{icon:"mdi:clear-outline",class:"absolute right-2 bottom-2.5 cursor-pointer text-gray-400 text-xl",$$events:{click:()=>{l(P,""),ne()}}})};ue(nt,c=>{e(P)?c(dt,!1):c(ct)})}i(ze),i(fe);var ee=a(fe,2),ut=n(ee);f(ut,()=>sr,(c,x)=>{x(c,{children:(b,ge)=>{var Ae=Nr(),De=O(Ae);{var Qe=X=>{var W=ye(),oe=O(W);f(oe,()=>wt,(ae,R)=>{R(ae,{children:(I,F)=>{d();var p=_("Loading....");r(I,p)},$$slots:{default:!0}})}),r(X,W)},Re=X=>{var W=ye(),oe=O(W);{var ae=R=>{var I=ye(),F=O(I);f(F,()=>wt,(p,Te)=>{Te(p,{class:"text-center w-full text-xs",children:(se,te)=>{d();var ce=_("No Combos Found!");r(se,ce)},$$slots:{default:!0}})}),r(R,I)};ue(oe,R=>{var I,F;((F=(I=m())==null?void 0:I.data)==null?void 0:F.total)===0&&R(ae)},!0)}r(X,W)};ue(De,X=>{m().isLoading?X(Qe):X(Re,!1)})}var Ue=a(De,2);f(Ue,()=>ir,(X,W)=>{W(X,{children:(oe,ae)=>{var R=ye(),I=O(R);f(I,()=>kt,(F,p)=>{p(F,{children:(Te,se)=>{var te=Pr(),ce=O(te);f(ce,()=>ke,(w,k)=>{k(w,{class:"w-[100px]",children:(h,Y)=>{d();var C=_("Sl.No");r(h,C)},$$slots:{default:!0}})});var he=a(ce,2);f(he,()=>ke,(w,k)=>{k(w,{children:(h,Y)=>{d();var C=_("Combo Name");r(h,C)},$$slots:{default:!0}})});var qe=a(he,2);f(qe,()=>ke,(w,k)=>{k(w,{children:(h,Y)=>{d();var C=_("Price");r(h,C)},$$slots:{default:!0}})});var Ke=a(qe,2);f(Ke,()=>ke,(w,k)=>{k(w,{children:(h,Y)=>{d();var C=_("Strike Price");r(h,C)},$$slots:{default:!0}})});var xe=a(Ke,2);f(xe,()=>ke,(w,k)=>{k(w,{children:(h,Y)=>{d();var C=_("Description");r(h,C)},$$slots:{default:!0}})});var Pe=a(xe,2);f(Pe,()=>ke,(w,k)=>{k(w,{children:(h,Y)=>{d();var C=_("Products Included");r(h,C)},$$slots:{default:!0}})});var _e=a(Pe,2);f(_e,()=>ke,(w,k)=>{k(w,{children:(h,Y)=>{d();var C=_("Image");r(h,C)},$$slots:{default:!0}})});var Oe=a(_e,2);f(Oe,()=>ke,(w,k)=>{k(w,{children:(h,Y)=>{d();var C=_("Active");r(h,C)},$$slots:{default:!0}})});var Ye=a(Oe,2);f(Ye,()=>ke,(w,k)=>{k(w,{children:(h,Y)=>{d();var C=_("Actions");r(h,C)},$$slots:{default:!0}})}),r(Te,te)},$$slots:{default:!0}})}),r(oe,R)},$$slots:{default:!0}})});var Ze=a(Ue,2);f(Ze,()=>lr,(X,W)=>{W(X,{children:(oe,ae)=>{var R=ye(),I=O(R);it(I,1,()=>{var F;return((F=m().data)==null?void 0:F.comboOffers)||[]},lt,(F,p,Te)=>{var se=ye(),te=O(se);f(te,()=>kt,(ce,he)=>{he(ce,{children:(qe,Ke)=>{var xe=Sr(),Pe=O(xe);f(Pe,()=>Ce,(T,S)=>{S(T,{children:(q,ie)=>{d();var $=_();V(()=>G($,Te+1+(e(K)-1)*B)),r(q,$)},$$slots:{default:!0}})});var _e=a(Pe,2);f(_e,()=>Ce,(T,S)=>{S(T,{children:(q,ie)=>{d();var $=_();V(()=>G($,e(p).comboName)),r(q,$)},$$slots:{default:!0}})});var Oe=a(_e,2);f(Oe,()=>Ce,(T,S)=>{S(T,{children:(q,ie)=>{d();var $=_();V(()=>G($,e(p).comboPrice)),r(q,$)},$$slots:{default:!0}})});var Ye=a(Oe,2);f(Ye,()=>Ce,(T,S)=>{S(T,{children:(q,ie)=>{d();var $=_();V(()=>G($,e(p).strikePrice)),r(q,$)},$$slots:{default:!0}})});var w=a(Ye,2);f(w,()=>Ce,(T,S)=>{S(T,{children:(q,ie)=>{d();var $=_();V(()=>G($,e(p).comboDescription)),r(q,$)},$$slots:{default:!0}})});var k=a(w,2);f(k,()=>Ce,(T,S)=>{S(T,{children:(q,ie)=>{var $=ye(),$e=O($);it($e,17,()=>e(p).productsIncluded,lt,(Le,de)=>{var U=yr(),re=n(U),Be=n(re,!0);i(re);var je=a(re,2),Xe=n(je);i(je),i(U),V(()=>{G(Be,e(de).productId.productName),G(Xe,`(Qty: ${e(de).quantity??""})`)}),r(Le,U)}),r(q,$)},$$slots:{default:!0}})});var h=a(k,2);f(h,()=>Ce,(T,S)=>{S(T,{children:(q,ie)=>{var $=ye(),$e=O($);{var Le=U=>{var re=wr();re.__click=()=>{const Xe=window.open();if(Xe){const vt=`<img src="${$t+e(p).image}" alt="${e(p).comboName}" />`;Xe.document.write(vt),Xe.document.title=e(p).comboName}};var Be=n(re),je=n(Be);i(Be),i(re),V(()=>{_t(je,"src",$t+e(p).image),_t(je,"alt",e(p).comboName)}),r(U,re)},de=U=>{var re=_("-");r(U,re)};ue($e,U=>{e(p).image?U(Le):U(de,!1)})}r(q,$)},$$slots:{default:!0}})});var Y=a(h,2);f(Y,()=>Ce,(T,S)=>{S(T,{children:(q,ie)=>{ar(q,{class:"text-right",get checked(){return e(p).active},onCheckedChange:()=>ve(e(p)._id,e(p).active)})},$$slots:{default:!0}})});var C=a(Y,2);f(C,()=>Ce,(T,S)=>{S(T,{children:(q,ie)=>{var $=Ir(),$e=n($);$e.__click=[kr,u,z,p];var Le=n($e);Je(Le,{icon:"basil:edit-outline",class:"hover:text-red-500 text-xl"}),i($e);var de=a($e,2);de.__click=[Cr,Q,y,p];var U=n(de);Je(U,{icon:"mingcute:delete-2-fill",class:"hover:text-red-500 text-xl"}),i(de),i($),r(q,$)},$$slots:{default:!0}})}),r(qe,xe)},$$slots:{default:!0}})}),r(F,se)}),r(oe,R)},$$slots:{default:!0}})}),r(b,Ae)},$$slots:{default:!0}})}),i(ee);var We=a(ee,2);f(We,()=>er,(c,x)=>{x(c,{get open(){return e(Q)},$$events:{openChange:b=>l(Q,v(b))},children:(b,ge)=>{var Ae=ye(),De=O(Ae);f(De,()=>tr,(Qe,Re)=>{Re(Qe,{children:(Ue,Ze)=>{var X=qr(),W=O(X);f(W,()=>rr,(I,F)=>{F(I,{class:"text-center",children:(p,Te)=>{var se=Tr(),te=O(se),ce=n(te);Je(ce,{icon:"jam:triangle-danger-f",class:"text-red-500 text-6xl"}),i(te);var he=a(te,2);f(he,()=>or,(qe,Ke)=>{Ke(qe,{class:"flex flex-col gap-2 justify-center items-center text-center",children:(xe,Pe)=>{d();var _e=Dr();d(),r(xe,_e)},$$slots:{default:!0}})}),r(p,se)},$$slots:{default:!0}})});var oe=a(W,2),ae=n(oe);tt(ae,{class:"bg-red-500 text-white font-bold w-full hover:bg-red-400",onclick:()=>{Ne().mutate({id:e(y),permanent:!0})},children:(I,F)=>{d();var p=_("Yes");r(I,p)},$$slots:{default:!0}});var R=a(ae,2);tt(R,{class:"text-white font-bold w-full",onclick:()=>l(Q,!1),children:(I,F)=>{d();var p=_("No");r(I,p)},$$slots:{default:!0}}),i(oe),r(Ue,X)},$$slots:{default:!0}})}),r(b,Ae)},$$slots:{default:!0}})});var mt=a(We,2);{var ot=c=>{var x=Me(()=>{var b,ge;return((ge=(b=m())==null?void 0:b.data)==null?void 0:ge.total)||0});Zt(c,{get total(){return e(x)},get limit(){return B},get page(){return e(K)},callback:b=>{b!==e(K)&&(l(K,v(b)),m().refetch())}})};ue(mt,c=>{var x,b;!m().isLoading&&((b=(x=m())==null?void 0:x.data)==null?void 0:b.total)>0&&c(ot)})}i(E),r(be,E),gt(),j()}Tt(["click"]);var jr=g('<meta name="description" content="dashboard for e-commerce">'),Er=g('<!> <span class="ml-2">Combo List</span>',1),Fr=g('<!> <span class="ml-2"> </span>',1),Mr=g("<!> <!>",1),zr=g("<!> <!> <!>",1);function Po(be,z){bt(z,!1);const[D,j]=ht(),m=()=>Se(st,"$comboStore",D);Ht(),Xt(u=>{var Ne=jr();Bt.title="Dashboard | Combo Offers",r(u,Ne)}),Jt(be,{class:"w-full p-4",get value(){return m().mode},onValueChange:u=>{Dt(st,{id:"",mode:u,comboName:"",comboDescription:"",comboPrice:0,strikePrice:0,image:"",productsIncluded:[]})},children:(u,Ne)=>{var A=zr(),me=O(A);nr(me,{children:(P,Q)=>{var y=Mr(),ve=O(y);It(ve,{value:"list",class:"flex items-center",children:(ne,pe)=>{var Z=Er(),E=O(Z);Je(E,{class:"w-4 h-4",icon:"hugeicons:tags"}),d(2),r(ne,Z)},$$slots:{default:!0}});var le=a(ve,2);It(le,{value:"create",children:(ne,pe)=>{var Z=Fr(),E=O(Z);Je(E,{class:"w-4 h-4",icon:"oui:ml-create-single-metric-job"});var fe=a(E,2),ze=n(fe);i(fe),V(()=>G(ze,`${(m().mode=="create"&&m().id?"Edit":"Create")??""} Combo`)),r(ne,Z)},$$slots:{default:!0}}),r(P,y)},$$slots:{default:!0}});var K=a(me,2);St(K,{value:"list",children:(P,Q)=>{Lr(P,{comboStore:st})},$$slots:{default:!0}});var B=a(K,2);St(B,{value:"create",children:(P,Q)=>{xr(P,{comboStore:st})},$$slots:{default:!0}}),r(u,A)},$$slots:{default:!0}}),gt(),j()}export{Po as component};
