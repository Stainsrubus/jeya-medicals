import"../chunks/Bg9kRutz.js";import"../chunks/69_IOA4Y.js";import{w as dt,p as Be,u as Ye,g as r,X as T,s as a,d as O,t as ge,a as Ve,b as _e,c as y,n as c,e as fe,r as b,ad as ct,f as h,$ as mt}from"../chunks/DUB8bsv0.js";import{b as v,a as t,t as k,c as ae,h as ut}from"../chunks/DzHOuBan.js";import{i as vt}from"../chunks/B06qfcxv.js";import{d as oe,c as Ke,i as he,s as Xe,a as B,p as xe,e as rt}from"../chunks/DOmRzZIo.js";import{g as at}from"../chunks/CSUTd-D0.js";import{R as pt}from"../chunks/B_rXABv2.js";import{s as ye}from"../chunks/3nqkJHLA.js";import{s as $t,z as Ge,d as ft,a as _t}from"../chunks/BTJgjqp0.js";import{_ as Le}from"../chunks/c3aSOx29.js";import{B as Qe}from"../chunks/CJvYq0KN.js";import{I as Ie}from"../chunks/CJXCr1W0.js";import{L as Ne}from"../chunks/DSP103xp.js";import{q as ot}from"../chunks/tFu-0XeD.js";import{I as se}from"../chunks/CHPYNWro.js";import{t as st}from"../chunks/CF63kifO.js";import{z as je}from"../chunks/K85sQPP8.js";import{c as lt}from"../chunks/Dw1g5TC4.js";import{e as ht,i as gt}from"../chunks/DJVbMBk7.js";import{c as d}from"../chunks/yzD5jbIF.js";import{d as xt}from"../chunks/DbFrp4aS.js";import{P as yt,T as He}from"../chunks/BTrfwMzp.js";import{S as bt}from"../chunks/CJEhnKgE.js";import{T as wt,a as Pt,b as We,c as pe,d as Et,e as $e}from"../chunks/4wux5xE3.js";import{R as St,D as Tt,a as kt,b as qt}from"../chunks/CeRZbImN.js";import{c as Dt}from"../chunks/B6Jqkcen.js";import{T as At,a as Ze}from"../chunks/B_RvuQCl.js";import{T as et}from"../chunks/CBD-qeiU.js";const be=dt({mode:"list",name:"",email:"",joinedAt:"",password:"",id:""}),tt=je.object({username:je.string({message:"Username is required"}).max(50),email:je.string({message:"Email is required"}).email("Email is invalid").max(50),password:je.string({message:"Password is required"}).min(8,"Password must be at least 8 characters")});var Mt=k('<span class="invalid text-xs text-red-500"> </span>'),Ct=k('<span class="invalid text-xs text-red-500"> </span>'),Ft=k('<div class="max-w-[80%] mx-auto text-maintext"><form method="POST" class="grid gap-4 py-4 grid-cols-2"><div><!> <!> <!></div> <div><!> <!> <!></div> <div class="grid gap-2 relative"><div class="flex items-center"><!></div> <!> <!></div> <div></div> <!></form></div>');function jt(G,V){Be(V,!0);const[m,R]=Xe(),p=()=>B(be,"$employeeStore",m),o=()=>B($,"$form",m),H=()=>B(J,"$createEmployeeMutation",m),M=()=>B(U,"$errors",m),C=()=>B(W,"$constraints",m);let F=_e(!1);Ye(()=>{O(F,xe(!!(p().mode=="create"&&p().id)))});const J=lt({mutationFn:e=>r(F)?Le.put(`/employee/${p().id}`,e):Le.post("/employee/create",e),onSuccess({}){ot.refetchQueries({queryKey:["employee fetch"]}),oe(be,T(p).mode="list",T(p)),st(r(F)?"Employee Updated ✅":"Employee Created ✅"),we()},onError(e,l,n){console.error("onError",e,l,n)}}),{form:$,errors:U,enhance:K,constraints:W,reset:we,validateForm:Z}=$t(ft(Ge(tt)),{SPA:!0,validationMethod:"oninput",validators:Ge(tt),clearOnSubmit:"none",invalidateAll:!1,resetForm:!1,async onSubmit({}){let e={email:o().email,password:o().password=="********"?"":o().password,username:o().username};const{valid:l}=await Z({focusOnError:!0});l&&H().mutate(e)}});Ye(()=>{r(F)&&(oe($,T(o).email=p().email,T(o)),oe($,T(o).username=p().name,T(o)),oe($,T(o).password="********",T(o)))});let N=_e(!1);var q=Ft(),z=y(q),ee=y(z),Pe=y(ee);Ne(Pe,{children:(e,l)=>{c();var n=v("Username");t(e,n)},$$slots:{default:!0}});var Ee=a(Pe,2),Oe=fe(()=>M().username?"true":void 0);Ie(Ee,Ke({class:"pr-10 mt-1",placeholder:"Ex: John Doe",get"aria-invalid"(){return r(Oe)}},()=>C().username,{get value(){return o().username},set value(e){oe($,T(o).username=e,T(o))}}));var Ue=a(Ee,2);{var ze=e=>{var l=Mt(),n=y(l,!0);b(l),ge(()=>ye(n,M().username)),t(e,l)};he(Ue,e=>{M().username&&e(ze)})}b(ee);var le=a(ee,2),Se=y(le);Ne(Se,{children:(e,l)=>{c();var n=v("Email");t(e,n)},$$slots:{default:!0}});var De=a(Se,2),Re=fe(()=>M().email?"true":void 0);Ie(De,Ke({class:"pr-10 mt-1",placeholder:"Ex: john@doe.com",autocomplete:"username",get"aria-invalid"(){return r(Re)}},()=>C().email,{get value(){return o().email},set value(e){oe($,T(o).email=e,T(o))}}));var s=a(De,2);{var f=e=>{var l=Ct(),n=y(l,!0);b(l),ge(()=>ye(n,M().email)),t(e,l)};he(s,e=>{M().email&&e(f)})}b(le);var i=a(le,2),Q=y(i),X=y(Q);Ne(X,{for:"password",children:(e,l)=>{c();var n=v("Password");t(e,n)},$$slots:{default:!0}}),b(Q);var te=a(Q,2),Te=fe(()=>M().password?"true":void 0),ke=fe(()=>r(N)?"text":"password");Ie(te,Ke({class:"pr-10 mt-1",autocomplete:"new-password",placeholder:"******",get"aria-invalid"(){return r(Te)},get type(){return r(ke)}},()=>C().password,{get value(){return o().password},set value(e){oe($,T(o).password=e,T(o))}}));var ne=a(te,2),Ae=fe(()=>r(N)?"mdi:eye-outline":"mdi:eye-off-outline");se(ne,{onclick:()=>{O(N,!r(N))},get icon(){return r(Ae)},class:"absolute right-2 bottom-2.5 cursor-pointer text-zinc-600 text-xl"}),b(i);var g=a(i,4);Qe(g,{class:"w-[40%]",type:"submit",children:(e,l)=>{c();var n=v();ge(()=>ye(n,r(F)?"Update":H().isPending?"Creating...":"Create")),t(e,n)},$$slots:{default:!0}}),b(z),_t(z,e=>K==null?void 0:K(e)),b(q),t(G,q),Ve(),R()}var It=k("<!> <!> <!> <!> <!> <!>",1),Lt=(G,V,m,R)=>{rt(be,xe({id:r(m)._id,name:r(m).name,email:r(m).email,mode:"create",password:r(m).password,joinedAt:R(new Date(r(m).createdAt))}))},Ot=(G,V,m,R)=>(O(V,!0),O(m,xe(r(R)._id))),Ut=k("<button><!></button> <button><!></button>",1),zt=k("<!> <!> <!> <!> <!> <!>",1),Rt=k("<!> <!> <!>",1),Jt=k('<!> <div class="flex gap-4 justify-around"><!> <!></div>',1),Kt=k('<div><div class="mt-6 text-maintext w-[calc(100vw-420px)] font-pt mx-auto"><div class="w-[40%] ml-auto"><div class="grid gap-2 relative"><!> <!></div></div> <!> <!> <!></div></div>');function Nt(G,V){Be(V,!0);const[m,R]=Xe(),p=()=>B(we,"$query",m),o=()=>B(Z,"$deleteMutation",m),H=()=>B(be,"$employeeStore",m);async function M(s=10,f=1,i=""){return await(await Le.get(`/employee/all?limit=${s}&page=${f}&q=${i}`)).data}let C=_e(1),F=10,J=_e(!1),$=_e(""),U=_e(""),K;function W(){clearTimeout(K),K=setTimeout(async()=>{await ct(),O(C,1),p().refetch()},500)}const we=Dt({queryKey:["employee fetch"],queryFn:()=>M(F,r(C),r(U))}),Z=lt({mutationFn:({id:s,permanent:f})=>Le.delete(`/employee/${s}?permanent=${f}`),onSuccess({data:s}){ot.refetchQueries({queryKey:["employee fetch"]}),at("/hidden-admin-base-007/dashboard/employees?mode=list"),st((s==null?void 0:s.message)??"Employee Edited"),O(J,!1)},onError(s,f,i){console.error("onError",s,f,i)}});function N(s){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}).format(s)}var q=Kt(),z=y(q),ee=y(z),Pe=y(ee),Ee=y(Pe);Ie(Ee,{type:"text",required:!0,class:"pr-10",placeholder:"Search Employee",oninput:W,get value(){return r(U)},set value(s){O(U,xe(s))}});var Oe=a(Ee,2);{var Ue=s=>{se(s,{icon:"iconamoon:search",class:"absolute right-2 bottom-2.5 cursor-pointer text-gray-400 text-xl"})},ze=s=>{se(s,{icon:"mdi:clear-outline",onclick:()=>{O(U,""),W()},class:"absolute right-2 bottom-2.5 cursor-pointer text-gray-400 text-xl"})};he(Oe,s=>{r(U)?s(ze,!1):s(Ue)})}b(Pe),b(ee);var le=a(ee,2);d(le,()=>wt,(s,f)=>{f(s,{class:"",children:(i,Q)=>{var X=Rt(),te=h(X);{var Te=g=>{var e=ae(),l=h(e);d(l,()=>He,(n,D)=>{D(n,{children:(_,x)=>{c();var u=v("Loading....");t(_,u)},$$slots:{default:!0}})}),t(g,e)},ke=g=>{var e=ae(),l=h(e);{var n=D=>{He(D,{class:"text-center w-full text-xs",children:(_,x)=>{c();var u=v("No Employees Found!");t(_,u)},$$slots:{default:!0}})};he(l,D=>{var _,x;((x=(_=p())==null?void 0:_.data)==null?void 0:x.total)===0&&D(n)},!0)}t(g,e)};he(te,g=>{p().isLoading?g(Te):g(ke,!1)})}var ne=a(te,2);d(ne,()=>Pt,(g,e)=>{e(g,{children:(l,n)=>{var D=ae(),_=h(D);d(_,()=>We,(x,u)=>{u(x,{class:"",children:(Me,ie)=>{var de=It(),ce=h(de);d(ce,()=>pe,(w,P)=>{P(w,{class:"w-[100px]",children:(E,Y)=>{c();var A=v("Sl.No");t(E,A)},$$slots:{default:!0}})});var me=a(ce,2);d(me,()=>pe,(w,P)=>{P(w,{children:(E,Y)=>{c();var A=v("Username");t(E,A)},$$slots:{default:!0}})});var ue=a(me,2);d(ue,()=>pe,(w,P)=>{P(w,{children:(E,Y)=>{c();var A=v("Email");t(E,A)},$$slots:{default:!0}})});var Ce=a(ue,2);d(Ce,()=>pe,(w,P)=>{P(w,{class:"",children:(E,Y)=>{c();var A=v("Joined At");t(E,A)},$$slots:{default:!0}})});var re=a(Ce,2);d(re,()=>pe,(w,P)=>{P(w,{class:"",children:(E,Y)=>{c();var A=v("Active");t(E,A)},$$slots:{default:!0}})});var Fe=a(re,2);d(Fe,()=>pe,(w,P)=>{P(w,{children:(E,Y)=>{c();var A=v("Actions");t(E,A)},$$slots:{default:!0}})}),t(Me,de)},$$slots:{default:!0}})}),t(l,D)},$$slots:{default:!0}})});var Ae=a(ne,2);d(Ae,()=>Et,(g,e)=>{e(g,{children:(l,n)=>{var D=ae(),_=h(D);ht(_,1,()=>{var x;return((x=p().data)==null?void 0:x.employees)||[]},gt,(x,u,Me)=>{var ie=ae(),de=h(ie);d(de,()=>We,(ce,me)=>{me(ce,{children:(ue,Ce)=>{var re=zt(),Fe=h(re);d(Fe,()=>$e,(j,I)=>{I(j,{children:(L,qe)=>{c();var S=v();S.nodeValue=Me+1,t(L,S)},$$slots:{default:!0}})});var w=a(Fe,2);d(w,()=>$e,(j,I)=>{I(j,{children:(L,qe)=>{c();var S=v();ge(()=>ye(S,r(u).name)),t(L,S)},$$slots:{default:!0}})});var P=a(w,2);d(P,()=>$e,(j,I)=>{I(j,{children:(L,qe)=>{c();var S=v();ge(()=>ye(S,r(u).email)),t(L,S)},$$slots:{default:!0}})});var E=a(P,2);d(E,()=>$e,(j,I)=>{I(j,{class:"flex items-center",children:(L,qe)=>{c();var S=v();ge(ve=>ye(S,ve),[()=>N(new Date(r(u).createdAt))]),t(L,S)},$$slots:{default:!0}})});var Y=a(E,2);d(Y,()=>$e,(j,I)=>{I(j,{children:(L,qe)=>{bt(L,{class:"text-right",get disabled(){return o().isPending},get checked(){return r(u).active},onclick:()=>o().mutate({id:r(u)._id,permanent:!1})})},$$slots:{default:!0}})});var A=a(Y,2);d(A,()=>$e,(j,I)=>{I(j,{class:"flex gap-2",children:(L,qe)=>{var S=Ut(),ve=h(S);ve.__click=[Lt,H,u,N];var nt=y(ve);se(nt,{icon:"basil:edit-outline",class:"hover:text-red-500 text-xl"}),b(ve);var Je=a(ve,2);Je.__click=[Ot,J,$,u];var it=y(Je);se(it,{icon:"mingcute:delete-2-fill",class:"hover:text-red-500 text-xl"}),b(Je),t(L,S)},$$slots:{default:!0}})}),t(ue,re)},$$slots:{default:!0}})}),t(x,ie)}),t(l,D)},$$slots:{default:!0}})}),t(i,X)},$$slots:{default:!0}})});var Se=a(le,2);d(Se,()=>St,(s,f)=>{f(s,{controlledOpen:!0,get open(){return r(J)},onOpenChange:i=>O(J,xe(i)),children:(i,Q)=>{var X=ae(),te=h(X);d(te,()=>Tt,(Te,ke)=>{ke(Te,{class:"p-6",children:(ne,Ae)=>{var g=Jt(),e=h(g);d(e,()=>kt,(_,x)=>{x(_,{class:"text-center",children:(u,Me)=>{var ie=ae(),de=h(ie);d(de,()=>qt,(ce,me)=>{me(ce,{class:"text-center",children:(ue,Ce)=>{c();var re=v("Do you want to delete this Employee ?");t(ue,re)},$$slots:{default:!0}})}),t(u,ie)},$$slots:{default:!0}})});var l=a(e,2),n=y(l);Qe(n,{class:"bg-red-500 text-white font-bold w-full hover:bg-red-400",onclick:()=>o().mutate({id:r($),permanent:!0}),children:(_,x)=>{c();var u=v("Yes");t(_,u)},$$slots:{default:!0}});var D=a(n,2);Qe(D,{class:"text-white font-bold w-full",onclick:()=>O(J,!1),children:(_,x)=>{c();var u=v("No");t(_,u)},$$slots:{default:!0}}),b(l),t(ne,g)},$$slots:{default:!0}})}),t(i,X)},$$slots:{default:!0}})});var De=a(Se,2);{var Re=s=>{var f=fe(()=>{var i,Q;return((Q=(i=p())==null?void 0:i.data)==null?void 0:Q.total)||0});yt(s,{get total(){return r(f)},get limit(){return F},get page(){return r(C)},callback:i=>{i!==r(C)&&(O(C,xe(i)),p().refetch())}})};he(De,s=>{var f,i;!p().isLoading&&((i=(f=p())==null?void 0:f.data)==null?void 0:i.total)>0&&s(Re)})}b(z),b(q),t(G,q),Ve(),R()}xt(["click"]);var Qt=k('<meta name="description" content="dashboard for JME.">'),Bt=k('<!> <span class="ml-2">Employees List</span>',1),Vt=k('<!> <span class="ml-2">Create Employees</span>',1),Xt=k("<!> <!>",1),Yt=k("<!> <!> <!>",1);function Er(G,V){Be(V,!1);const[m,R]=Xe(),p=()=>B(be,"$employeeStore",m);vt(),ut(o=>{var H=Qt();mt.title="Dashboard | Employees",t(o,H)}),pt(G,{get value(){return p().mode},class:"w-full p-4",onValueChange:o=>{at(`/hidden-admin-base-007/dashboard/employees?mode=${o}`),rt(be,{mode:o,id:"",email:"",joinedAt:"",password:"",name:""})},children:(o,H)=>{var M=Yt(),C=h(M);At(C,{children:($,U)=>{var K=Xt(),W=h(K);Ze(W,{value:"list",class:"flex items-center",children:(Z,N)=>{var q=Bt(),z=h(q);se(z,{class:"w-4 h-4",icon:"tabler:table"}),c(2),t(Z,q)},$$slots:{default:!0}});var we=a(W,2);Ze(we,{value:"create",children:(Z,N)=>{var q=Vt(),z=h(q);se(z,{class:"w-4 h-4",icon:"mi:user-add"}),c(2),t(Z,q)},$$slots:{default:!0}}),t($,K)},$$slots:{default:!0}});var F=a(C,2);et(F,{value:"list",children:($,U)=>{Nt($,{})},$$slots:{default:!0}});var J=a(F,2);et(J,{value:"create",children:($,U)=>{jt($,{})},$$slots:{default:!0}}),t(o,M)},$$slots:{default:!0}}),Ve(),R()}export{Er as component};
