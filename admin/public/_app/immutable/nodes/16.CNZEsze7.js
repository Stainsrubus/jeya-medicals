import"../chunks/Bg9kRutz.js";import"../chunks/69_IOA4Y.js";import{w as dt,p as Je,u as Ye,g as a,X as T,s as r,d as O,t as he,a as Ve,b as _e,c as b,n as c,e as fe,r as w,ad as ct,f as g,$ as ut}from"../chunks/DUB8bsv0.js";import{b as v,a as t,t as k,c as re,h as mt}from"../chunks/DzHOuBan.js";import{i as vt}from"../chunks/B06qfcxv.js";import{d as se,c as Ne,i as ge,s as Xe,a as J,p as xe,e as at}from"../chunks/DOmRzZIo.js";import{g as rt}from"../chunks/CSUTd-D0.js";import{R as $t}from"../chunks/B_rXABv2.js";import{s as be}from"../chunks/3nqkJHLA.js";import{s as pt,z as Ge,d as ft,a as _t}from"../chunks/BTJgjqp0.js";import{_ as Le}from"../chunks/c3aSOx29.js";import{B as Be}from"../chunks/CJvYq0KN.js";import{I as Ie}from"../chunks/CJXCr1W0.js";import{L as Qe}from"../chunks/DSP103xp.js";import{q as st}from"../chunks/tFu-0XeD.js";import{I as oe}from"../chunks/CHPYNWro.js";import{t as ot}from"../chunks/CF63kifO.js";import{z as je}from"../chunks/K85sQPP8.js";import{c as nt}from"../chunks/Dw1g5TC4.js";import{e as gt,i as ht}from"../chunks/DJVbMBk7.js";import{c as d}from"../chunks/yzD5jbIF.js";import{d as xt}from"../chunks/DbFrp4aS.js";import{P as bt,T as He}from"../chunks/BTrfwMzp.js";import{S as wt}from"../chunks/CJEhnKgE.js";import{T as Pt,a as yt,b as We,c as $e,d as Mt,e as pe}from"../chunks/4wux5xE3.js";import{R as St,D as Tt,a as kt,b as qt}from"../chunks/CeRZbImN.js";import{c as Et}from"../chunks/B6Jqkcen.js";import{T as Dt,a as Ze}from"../chunks/B_RvuQCl.js";import{T as et}from"../chunks/CBD-qeiU.js";const we=dt({mode:"list",name:"",email:"",joinedAt:"",password:"",id:""}),tt=je.object({username:je.string({message:"Username is required"}).max(50),email:je.string({message:"Email is required"}).email("Email is invalid").max(50),password:je.string({message:"Password is required"}).min(8,"Password must be at least 8 characters")});var At=k('<span class="invalid text-xs text-red-500"> </span>'),Ct=k('<span class="invalid text-xs text-red-500"> </span>'),Ft=k('<div class="max-w-[80%] mx-auto text-maintext"><form method="POST" class="grid gap-4 py-4 grid-cols-2"><div><!> <!> <!></div> <div><!> <!> <!></div> <div class="grid gap-2 relative"><div class="flex items-center"><!></div> <!> <!></div> <div></div> <!></form></div>');function jt(G,V){Je(V,!0);const[u,R]=Xe(),$=()=>J(we,"$managerStore",u),s=()=>J(p,"$form",u),H=()=>J(K,"$createManagerMutation",u),A=()=>J(U,"$errors",u),C=()=>J(W,"$constraints",u);let F=_e(!1);Ye(()=>{O(F,xe(!!($().mode=="create"&&$().id)))});const K=nt({mutationFn:e=>a(F)?Le.put(`/manager/${$().id}`,e):Le.post("/manager/create",e),onSuccess({}){st.refetchQueries({queryKey:["manager fetch"]}),se(we,T($).mode="list",T($)),ot(a(F)?"Manager Updated ✅":"Manager Created ✅"),Pe()},onError(e,n,l){console.error("onError",e,n,l)}}),{form:p,errors:U,enhance:N,constraints:W,reset:Pe,validateForm:Z}=pt(ft(Ge(tt)),{SPA:!0,validationMethod:"oninput",validators:Ge(tt),clearOnSubmit:"none",invalidateAll:!1,resetForm:!1,async onSubmit({}){let e={email:s().email,password:s().password=="********"?"":s().password,username:s().username};const{valid:n}=await Z({focusOnError:!0});n&&H().mutate(e)}});Ye(()=>{a(F)&&(se(p,T(s).email=$().email,T(s)),se(p,T(s).username=$().name,T(s)),se(p,T(s).password="********",T(s)))});let Q=_e(!1);var q=Ft(),z=b(q),ee=b(z),ye=b(ee);Qe(ye,{children:(e,n)=>{c();var l=v("Username");t(e,l)},$$slots:{default:!0}});var Me=r(ye,2),Oe=fe(()=>A().username?"true":void 0);Ie(Me,Ne({class:"pr-10 mt-1",placeholder:"Ex: John Doe",get"aria-invalid"(){return a(Oe)}},()=>C().username,{get value(){return s().username},set value(e){se(p,T(s).username=e,T(s))}}));var Ue=r(Me,2);{var ze=e=>{var n=At(),l=b(n,!0);w(n),he(()=>be(l,A().username)),t(e,n)};ge(Ue,e=>{A().username&&e(ze)})}w(ee);var ne=r(ee,2),Se=b(ne);Qe(Se,{children:(e,n)=>{c();var l=v("Email");t(e,l)},$$slots:{default:!0}});var Ee=r(Se,2),Re=fe(()=>A().email?"true":void 0);Ie(Ee,Ne({class:"pr-10 mt-1",placeholder:"Ex: john@doe.com",autocomplete:"username",get"aria-invalid"(){return a(Re)}},()=>C().email,{get value(){return s().email},set value(e){se(p,T(s).email=e,T(s))}}));var o=r(Ee,2);{var f=e=>{var n=Ct(),l=b(n,!0);w(n),he(()=>be(l,A().email)),t(e,n)};ge(o,e=>{A().email&&e(f)})}w(ne);var i=r(ne,2),B=b(i),X=b(B);Qe(X,{for:"password",children:(e,n)=>{c();var l=v("Password");t(e,l)},$$slots:{default:!0}}),w(B);var te=r(B,2),Te=fe(()=>A().password?"true":void 0),ke=fe(()=>a(Q)?"text":"password");Ie(te,Ne({class:"pr-10 mt-1",autocomplete:"new-password",placeholder:"******",get"aria-invalid"(){return a(Te)},get type(){return a(ke)}},()=>C().password,{get value(){return s().password},set value(e){se(p,T(s).password=e,T(s))}}));var le=r(te,2),De=fe(()=>a(Q)?"mdi:eye-outline":"mdi:eye-off-outline");oe(le,{onclick:()=>{O(Q,!a(Q))},get icon(){return a(De)},class:"absolute right-2 bottom-2.5 cursor-pointer text-zinc-600 text-xl"}),w(i);var h=r(i,4);Be(h,{class:"w-[40%]",type:"submit",children:(e,n)=>{c();var l=v();he(()=>be(l,a(F)?"Update":H().isPending?"Creating...":"Create")),t(e,l)},$$slots:{default:!0}}),w(z),_t(z,e=>N==null?void 0:N(e)),w(q),t(G,q),Ve(),R()}var It=k("<!> <!> <!> <!> <!> <!>",1),Lt=(G,V,u,R)=>{at(we,xe({id:a(u)._id,name:a(u).name,email:a(u).email,mode:"create",password:a(u).password,joinedAt:R(new Date(a(u).createdAt))}))},Ot=(G,V,u,R)=>(O(V,!0),O(u,xe(a(R)._id))),Ut=k("<button><!></button> <button><!></button>",1),zt=k("<!> <!> <!> <!> <!> <!>",1),Rt=k("<!> <!> <!>",1),Kt=k('<!> <div class="flex gap-4 justify-around"><!> <!></div>',1),Nt=k('<div><div class="mt-6 text-maintext w-[calc(100vw-420px)] font-pt mx-auto"><div class="w-[40%] ml-auto"><div class="grid gap-2 relative"><!> <!></div></div> <!> <!> <!></div></div>');function Qt(G,V){Je(V,!0);const[u,R]=Xe(),$=()=>J(Pe,"$query",u),s=()=>J(Z,"$deleteMutation",u),H=()=>J(we,"$managerStore",u);async function A(o=10,f=1,i=""){return await(await Le.get(`/manager/all?limit=${o}&page=${f}&q=${i}`)).data}let C=_e(1),F=10,K=_e(!1),p=_e(""),U=_e(""),N;function W(){clearTimeout(N),N=setTimeout(async()=>{await ct(),O(C,1),$().refetch()},500)}const Pe=Et({queryKey:["manager fetch"],queryFn:()=>A(F,a(C),a(U))}),Z=nt({mutationFn:({id:o,permanent:f})=>Le.delete(`/manager/${o}?permanent=${f}`),onSuccess({data:o}){st.refetchQueries({queryKey:["manager fetch"]}),rt("/hidden-admin-base-007/dashboard/managers?mode=list"),ot((o==null?void 0:o.message)??"Manager Edited"),O(K,!1)},onError(o,f,i){console.error("onError",o,f,i)}});function Q(o){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}).format(o)}var q=Nt(),z=b(q),ee=b(z),ye=b(ee),Me=b(ye);Ie(Me,{type:"text",required:!0,class:"pr-10",placeholder:"Search Manager",oninput:W,get value(){return a(U)},set value(o){O(U,xe(o))}});var Oe=r(Me,2);{var Ue=o=>{oe(o,{icon:"iconamoon:search",class:"absolute right-2 bottom-2.5 cursor-pointer text-gray-400 text-xl"})},ze=o=>{oe(o,{icon:"mdi:clear-outline",onclick:()=>{O(U,""),W()},class:"absolute right-2 bottom-2.5 cursor-pointer text-gray-400 text-xl"})};ge(Oe,o=>{a(U)?o(ze,!1):o(Ue)})}w(ye),w(ee);var ne=r(ee,2);d(ne,()=>Pt,(o,f)=>{f(o,{class:"",children:(i,B)=>{var X=Rt(),te=g(X);{var Te=h=>{var e=re(),n=g(e);d(n,()=>He,(l,E)=>{E(l,{children:(_,x)=>{c();var m=v("Loading....");t(_,m)},$$slots:{default:!0}})}),t(h,e)},ke=h=>{var e=re(),n=g(e);{var l=E=>{He(E,{class:"text-center w-full text-xs",children:(_,x)=>{c();var m=v("No Managers Found!");t(_,m)},$$slots:{default:!0}})};ge(n,E=>{var _,x;((x=(_=$())==null?void 0:_.data)==null?void 0:x.total)===0&&E(l)},!0)}t(h,e)};ge(te,h=>{$().isLoading?h(Te):h(ke,!1)})}var le=r(te,2);d(le,()=>yt,(h,e)=>{e(h,{children:(n,l)=>{var E=re(),_=g(E);d(_,()=>We,(x,m)=>{m(x,{class:"",children:(Ae,ie)=>{var de=It(),ce=g(de);d(ce,()=>$e,(P,y)=>{y(P,{class:"w-[100px]",children:(M,Y)=>{c();var D=v("Sl.No");t(M,D)},$$slots:{default:!0}})});var ue=r(ce,2);d(ue,()=>$e,(P,y)=>{y(P,{children:(M,Y)=>{c();var D=v("Username");t(M,D)},$$slots:{default:!0}})});var me=r(ue,2);d(me,()=>$e,(P,y)=>{y(P,{children:(M,Y)=>{c();var D=v("Email");t(M,D)},$$slots:{default:!0}})});var Ce=r(me,2);d(Ce,()=>$e,(P,y)=>{y(P,{class:"",children:(M,Y)=>{c();var D=v("Joined At");t(M,D)},$$slots:{default:!0}})});var ae=r(Ce,2);d(ae,()=>$e,(P,y)=>{y(P,{class:"",children:(M,Y)=>{c();var D=v("Active");t(M,D)},$$slots:{default:!0}})});var Fe=r(ae,2);d(Fe,()=>$e,(P,y)=>{y(P,{children:(M,Y)=>{c();var D=v("Actions");t(M,D)},$$slots:{default:!0}})}),t(Ae,de)},$$slots:{default:!0}})}),t(n,E)},$$slots:{default:!0}})});var De=r(le,2);d(De,()=>Mt,(h,e)=>{e(h,{children:(n,l)=>{var E=re(),_=g(E);gt(_,1,()=>{var x;return((x=$().data)==null?void 0:x.managers)||[]},ht,(x,m,Ae)=>{var ie=re(),de=g(ie);d(de,()=>We,(ce,ue)=>{ue(ce,{children:(me,Ce)=>{var ae=zt(),Fe=g(ae);d(Fe,()=>pe,(j,I)=>{I(j,{children:(L,qe)=>{c();var S=v();S.nodeValue=Ae+1,t(L,S)},$$slots:{default:!0}})});var P=r(Fe,2);d(P,()=>pe,(j,I)=>{I(j,{children:(L,qe)=>{c();var S=v();he(()=>be(S,a(m).name)),t(L,S)},$$slots:{default:!0}})});var y=r(P,2);d(y,()=>pe,(j,I)=>{I(j,{children:(L,qe)=>{c();var S=v();he(()=>be(S,a(m).email)),t(L,S)},$$slots:{default:!0}})});var M=r(y,2);d(M,()=>pe,(j,I)=>{I(j,{class:"flex items-center",children:(L,qe)=>{c();var S=v();he(ve=>be(S,ve),[()=>Q(new Date(a(m).createdAt))]),t(L,S)},$$slots:{default:!0}})});var Y=r(M,2);d(Y,()=>pe,(j,I)=>{I(j,{children:(L,qe)=>{wt(L,{class:"text-right",get disabled(){return s().isPending},get checked(){return a(m).active},onclick:()=>s().mutate({id:a(m)._id,permanent:!1})})},$$slots:{default:!0}})});var D=r(Y,2);d(D,()=>pe,(j,I)=>{I(j,{class:"flex gap-2",children:(L,qe)=>{var S=Ut(),ve=g(S);ve.__click=[Lt,H,m,Q];var lt=b(ve);oe(lt,{icon:"basil:edit-outline",class:"hover:text-red-500 text-xl"}),w(ve);var Ke=r(ve,2);Ke.__click=[Ot,K,p,m];var it=b(Ke);oe(it,{icon:"mingcute:delete-2-fill",class:"hover:text-red-500 text-xl"}),w(Ke),t(L,S)},$$slots:{default:!0}})}),t(me,ae)},$$slots:{default:!0}})}),t(x,ie)}),t(n,E)},$$slots:{default:!0}})}),t(i,X)},$$slots:{default:!0}})});var Se=r(ne,2);d(Se,()=>St,(o,f)=>{f(o,{controlledOpen:!0,get open(){return a(K)},onOpenChange:i=>O(K,xe(i)),children:(i,B)=>{var X=re(),te=g(X);d(te,()=>Tt,(Te,ke)=>{ke(Te,{class:"p-6",children:(le,De)=>{var h=Kt(),e=g(h);d(e,()=>kt,(_,x)=>{x(_,{class:"text-center",children:(m,Ae)=>{var ie=re(),de=g(ie);d(de,()=>qt,(ce,ue)=>{ue(ce,{class:"text-center",children:(me,Ce)=>{c();var ae=v("Do you want to delete this Manager ?");t(me,ae)},$$slots:{default:!0}})}),t(m,ie)},$$slots:{default:!0}})});var n=r(e,2),l=b(n);Be(l,{class:"bg-red-500 text-white font-bold w-full hover:bg-red-400",onclick:()=>s().mutate({id:a(p),permanent:!0}),children:(_,x)=>{c();var m=v("Yes");t(_,m)},$$slots:{default:!0}});var E=r(l,2);Be(E,{class:"text-white font-bold w-full",onclick:()=>O(K,!1),children:(_,x)=>{c();var m=v("No");t(_,m)},$$slots:{default:!0}}),w(n),t(le,h)},$$slots:{default:!0}})}),t(i,X)},$$slots:{default:!0}})});var Ee=r(Se,2);{var Re=o=>{var f=fe(()=>{var i,B;return((B=(i=$())==null?void 0:i.data)==null?void 0:B.total)||0});bt(o,{get total(){return a(f)},get limit(){return F},get page(){return a(C)},callback:i=>{i!==a(C)&&(O(C,xe(i)),$().refetch())}})};ge(Ee,o=>{var f,i;!$().isLoading&&((i=(f=$())==null?void 0:f.data)==null?void 0:i.total)>0&&o(Re)})}w(z),w(q),t(G,q),Ve(),R()}xt(["click"]);var Bt=k('<meta name="description" content="dashboard for kings chic.">'),Jt=k('<!> <span class="ml-2">Manager List</span>',1),Vt=k('<!> <span class="ml-2">Create Manager</span>',1),Xt=k("<!> <!>",1),Yt=k("<!> <!> <!>",1);function Ma(G,V){Je(V,!1);const[u,R]=Xe(),$=()=>J(we,"$managerStore",u);vt(),mt(s=>{var H=Bt();ut.title="Dashboard | Manager",t(s,H)}),$t(G,{get value(){return $().mode},class:"w-full p-4",onValueChange:s=>{rt(`/hidden-admin-base-007/dashboard/managers?mode=${s}`),at(we,{mode:s,id:"",email:"",joinedAt:"",password:"",name:""})},children:(s,H)=>{var A=Yt(),C=g(A);Dt(C,{children:(p,U)=>{var N=Xt(),W=g(N);Ze(W,{value:"list",class:"flex items-center",children:(Z,Q)=>{var q=Jt(),z=g(q);oe(z,{class:"w-4 h-4",icon:"tabler:table"}),c(2),t(Z,q)},$$slots:{default:!0}});var Pe=r(W,2);Ze(Pe,{value:"create",children:(Z,Q)=>{var q=Vt(),z=g(q);oe(z,{class:"w-4 h-4",icon:"mi:user-add"}),c(2),t(Z,q)},$$slots:{default:!0}}),t(p,N)},$$slots:{default:!0}});var F=r(C,2);et(F,{value:"list",children:(p,U)=>{Qt(p,{})},$$slots:{default:!0}});var K=r(F,2);et(K,{value:"create",children:(p,U)=>{jt(p,{})},$$slots:{default:!0}}),t(s,A)},$$slots:{default:!0}}),Ve(),R()}export{Ma as component};
