import"../chunks/Bg9kRutz.js";import"../chunks/69_IOA4Y.js";import{w as ct,p as Xe,u as Ye,g as r,X as A,s as o,t as te,a as He,b as be,d as z,c as _,n as m,e as Ue,r as g,ad as pt,f,$ as ut}from"../chunks/DUB8bsv0.js";import{s as ue}from"../chunks/3nqkJHLA.js";import{b as v,a as t,t as D,c as ee,h as mt}from"../chunks/DzHOuBan.js";import{i as vt}from"../chunks/B06qfcxv.js";import{d as qe,c as Ge,i as Pe,s as Ve,a as X,p as re,e as it}from"../chunks/DOmRzZIo.js";import{g as We}from"../chunks/CSUTd-D0.js";import{R as $t}from"../chunks/B_rXABv2.js";import{s as ft,z as Je,d as _t,a as gt}from"../chunks/BTJgjqp0.js";import{_ as Ke}from"../chunks/c3aSOx29.js";import{B as Qe}from"../chunks/CJvYq0KN.js";import{I as je}from"../chunks/CJXCr1W0.js";import{L as Ae}from"../chunks/DSP103xp.js";import{q as nt}from"../chunks/tFu-0XeD.js";import{t as Me}from"../chunks/CF63kifO.js";import{z as Be}from"../chunks/K85sQPP8.js";import{c as lt}from"../chunks/Dw1g5TC4.js";import{e as ht,i as xt}from"../chunks/DJVbMBk7.js";import{c as d}from"../chunks/yzD5jbIF.js";import{s as Ze}from"../chunks/BHIRq8YZ.js";import{d as bt}from"../chunks/DbFrp4aS.js";import{P as Pt,T as et}from"../chunks/BTrfwMzp.js";import{R as wt,D as yt,a as Dt,b as St}from"../chunks/CeRZbImN.js";import{T as Tt,a as kt,b as tt,c as he,d as qt,e as xe}from"../chunks/4wux5xE3.js";import{S as Mt}from"../chunks/CJEhnKgE.js";import{i as rt}from"../chunks/DW9MwCpa.js";import{I as we}from"../chunks/CHPYNWro.js";import{c as Ft}from"../chunks/B6Jqkcen.js";import{T as It,a as at}from"../chunks/B_RvuQCl.js";import{T as ot}from"../chunks/CBD-qeiU.js";const Re=ct({mode:"list",id:"",name:"",price:"0"}),st=Be.object({name:Be.string({message:"Name is required"}).max(50),price:Be.string().refine(B=>/^[0-9]+$/.test(B),{message:"Price must be a numeric string"})});var Et=D('<span class="invalid text-xs text-red-500"> </span>'),Lt=D('<span class="invalid text-xs text-red-500"> </span>'),zt=D('<div class="max-w-[80%] mx-auto text-maintext"><form method="POST" class="grid gap-4 py-4"><div><!> <!> <!></div> <div></div> <div class="grid gap-2 relative"><div class="flex items-center"><!></div> <!> <!></div> <div><!> <!></div> <!></form></div>');function Ct(B,M){Xe(M,!0);const[P,E]=Ve(),p=()=>X(M.dippingStore,"$dippingStore",P),n=()=>X(O,"$form",P),ae=()=>X(oe,"$createDippingMutation",P),C=()=>X(H,"$errors",P),L=()=>X(ie,"$constraints",P);let S=be(!1),F=be(null),$=null;Ye(()=>{z(S,re(!!(p().mode=="create"&&p().id))),$=document.getElementById("image")});const oe=lt({mutationFn:e=>r(S)?Ke.put(`/dippings/${p().id}`,e):Ke.post("/dippings/create",e),onSuccess(){nt.refetchQueries({queryKey:["dipping fetch"]}),qe(M.dippingStore,A(p).mode="list",A(p)),V(),We("/hidden-admin-base-007/dashboard/dippings?mode=list"),Me(r(S)?"Dipping Updated ✅":"Dipping Created ✅")},onError(e,a,i){console.error("onError",e,a,i)}}),{form:O,errors:H,enhance:se,constraints:ie,reset:V,validateForm:K}=ft(_t(Je(st)),{SPA:!0,validationMethod:"oninput",validators:Je(st),clearOnSubmit:"none",invalidateAll:!1,resetForm:!1,async onSubmit({}){const{valid:e}=await K({focusOnError:!0});if(!e)return;if(!r(S)&&!r(F)){Me.error("Image is required when creating a new dipping");return}let a=new FormData;a.append("name",n().name),a.append("price",n().price.toString()),r(F)&&a.append("image",r(F)),ae().mutate(a)}});Ye(()=>{r(S)?(qe(O,A(n).name=p().name,A(n)),qe(O,A(n).price=p().price,A(n))):V()});function N(e){const a=e.target.files[0];if(a.size>51200){Me.error("File size is too large! Max size is 50KB"),$&&($.value="");return}const i=new Image;i.src=URL.createObjectURL(a),i.onload=()=>{const{width:y,height:u}=i;if(y>35||u>35){Me.error("image dimensions must below 35x35 pixels."),$&&($.value="");return}z(F,re(a))},z(F,re(a))}var Q=zt(),W=_(Q),ye=_(W),Fe=_(ye);Ae(Fe,{for:"name",children:(e,a)=>{m();var i=v("Dipping Name");t(e,i)},$$slots:{default:!0}});var Ie=o(Fe,2),Ee=Ue(()=>C().name?"true":void 0);je(Ie,Ge({id:"name",class:"pr-10 mt-1",placeholder:"Ex: Mayonnaise, Ketchup",get"aria-invalid"(){return r(Ee)}},()=>L().name,{get value(){return n().name},set value(e){qe(O,A(n).name=e,A(n))}}));var Le=o(Ie,2);{var Ne=e=>{var a=Et(),i=_(a,!0);g(a),te(()=>ue(i,C().name)),t(e,a)};Pe(Le,e=>{C().name&&e(Ne)})}g(ye);var De=o(ye,4),s=_(De),h=_(s);Ae(h,{for:"price",children:(e,a)=>{m();var i=v("Price");t(e,i)},$$slots:{default:!0}}),g(s);var c=o(s,2),ne=Ue(()=>C().price?"true":void 0);je(c,Ge({id:"price",class:"pr-10 mt-1",get"aria-invalid"(){return r(ne)},type:"string",placeholder:"Ex: 1000"},()=>L().price,{get value(){return n().price},set value(e){qe(O,A(n).price=e,A(n))}}));var Y=o(c,2);{var me=e=>{var a=Lt(),i=_(a,!0);g(a),te(()=>ue(i,C().price)),t(e,a)};Pe(Y,e=>{C().price&&e(me)})}g(De);var le=o(De,2),ve=_(le);Ae(ve,{for:"image",children:(e,a)=>{m();var i=v("Image (35 X 35) ~ 50kb");t(e,i)},$$slots:{default:!0}});var $e=o(ve,2),ze=Ue(()=>!r(S));je($e,{id:"image",get required(){return r(ze)},class:"pr-10 mt-1",type:"file",accept:".jpg, .jpeg, .png, .webp",onchange:N}),g(le);var w=o(le,2);Qe(w,{class:"w-[100px]",type:"submit",children:(e,a)=>{m();var i=v();te(()=>ue(i,r(S)?"Update":ae().isPending?"Creating...":"Create")),t(e,i)},$$slots:{default:!0}}),g(W),gt(W,e=>se==null?void 0:se(e)),g(Q),t(B,Q),He(),E()}var Ot=D("<!> <!> <!> <!> <!> <!>",1),Rt=D('<button><img class="h-[50px] rounded-sm cursor-pointer"></button>'),Ut=(B,M,P,E)=>{it(P.dippingStore,re({...M(),mode:"create",id:r(E)._id,name:r(E).name,price:r(E).price.toString()})),We(`/hidden-admin-base-007/dashboard/dippings?mode=create&id=${r(E)._id}`)},jt=(B,M,P,E)=>(z(M,!0),z(P,re(r(E)._id))),Kt=D("<button><!></button> <button><!></button>",1),Nt=D("<!> <!> <!> <!> <!> <!>",1),At=D("<!> <!> <!>",1),Bt=D('<!> <div class="flex gap-4 justify-around"><!> <!></div>',1),Qt=D('<div><div class="mt-6 text-maintext w-[calc(100vw-420px)] font-pt mx-auto"><div class="w-[40%] ml-auto"><div class="grid gap-2 relative"><!> <!></div></div> <!> <!> <!></div></div>');function Xt(B,M){Xe(M,!0);const[P,E]=Ve(),p=()=>X(se,"$query",P),n=()=>X(ie,"$deleteMutation",P),ae=()=>X(M.dippingStore,"$dippingStore",P);async function C(s=10,h=1,c=""){return await(await Ke.get(`/dippings/all?limit=${s}&page=${h}&q=${c}`)).data}let L=be(1),S=10,F=be(""),$=be(!1),oe=be(""),O;function H(){clearTimeout(O),O=setTimeout(async()=>{await pt(),z(L,1),p().refetch()},500)}const se=Ft({queryKey:["dipping fetch",H],queryFn:()=>C(S,r(L),r(F))}),ie=lt({mutationFn:({id:s,permanent:h})=>Ke.delete(`/dippings/${s}?permanent=${h}`),onSuccess({data:s}){nt.refetchQueries({queryKey:["dipping fetch"]}),Me((s==null?void 0:s.message)??"Dipping Updated ✅"),z($,!1)},onError(s,h,c){console.error("onError",s,h,c)}});var V=Qt(),K=_(V),N=_(K),Q=_(N),W=_(Q);je(W,{type:"text",required:!0,class:"pr-10",placeholder:"Search Dipping",oninput:H,get value(){return r(F)},set value(s){z(F,re(s))}});var ye=o(W,2);{var Fe=s=>{we(s,{icon:"iconamoon:search",class:"absolute right-2 bottom-2.5 cursor-pointer text-gray-400 text-xl"})},Ie=s=>{we(s,{icon:"mdi:clear-outline",onclick:()=>{z(F,""),H()},class:"absolute right-2 bottom-2.5 cursor-pointer text-gray-400 text-xl"})};Pe(ye,s=>{r(F)?s(Ie,!1):s(Fe)})}g(Q),g(N);var Ee=o(N,2);d(Ee,()=>Tt,(s,h)=>{h(s,{class:"",children:(c,ne)=>{var Y=At(),me=f(Y);{var le=w=>{var e=ee(),a=f(e);d(a,()=>et,(i,y)=>{y(i,{children:(u,x)=>{m();var l=v("Loading....");t(u,l)},$$slots:{default:!0}})}),t(w,e)},ve=w=>{var e=ee(),a=f(e);{var i=y=>{var u=ee(),x=f(u);d(x,()=>et,(l,fe)=>{fe(l,{class:"text-center w-full text-xs",children:(G,de)=>{m();var J=v("No Dippings Found!");t(G,J)},$$slots:{default:!0}})}),t(y,u)};Pe(a,y=>{var u,x;((x=(u=p())==null?void 0:u.data)==null?void 0:x.total)===0&&y(i)},!0)}t(w,e)};Pe(me,w=>{p().isLoading?w(le):w(ve,!1)})}var $e=o(me,2);d($e,()=>kt,(w,e)=>{e(w,{children:(a,i)=>{var y=ee(),u=f(y);d(u,()=>tt,(x,l)=>{l(x,{class:"",children:(fe,G)=>{var de=Ot(),J=f(de);d(J,()=>he,(T,k)=>{k(T,{class:"w-[100px]",children:(q,Z)=>{m();var I=v("Sl.No");t(q,I)},$$slots:{default:!0}})});var _e=o(J,2);d(_e,()=>he,(T,k)=>{k(T,{children:(q,Z)=>{m();var I=v("Dipping name");t(q,I)},$$slots:{default:!0}})});var ge=o(_e,2);d(ge,()=>he,(T,k)=>{k(T,{class:"cursor-pointer",children:(q,Z)=>{m();var I=v("Price");t(q,I)},$$slots:{default:!0}})});var Ce=o(ge,2);d(Ce,()=>he,(T,k)=>{k(T,{class:"cursor-pointer",children:(q,Z)=>{m();var I=v("Image");t(q,I)},$$slots:{default:!0}})});var ce=o(Ce,2);d(ce,()=>he,(T,k)=>{k(T,{class:"",children:(q,Z)=>{m();var I=v("Active");t(q,I)},$$slots:{default:!0}})});var Oe=o(ce,2);d(Oe,()=>he,(T,k)=>{k(T,{class:"",children:(q,Z)=>{m();var I=v("Actions");t(q,I)},$$slots:{default:!0}})}),t(fe,de)},$$slots:{default:!0}})}),t(a,y)},$$slots:{default:!0}})});var ze=o($e,2);d(ze,()=>qt,(w,e)=>{e(w,{children:(a,i)=>{var y=ee(),u=f(y);ht(u,1,()=>{var x;return((x=p().data)==null?void 0:x.dippings)||[]},xt,(x,l,fe)=>{var G=ee(),de=f(G);d(de,()=>tt,(J,_e)=>{_e(J,{children:(ge,Ce)=>{var ce=Nt(),Oe=f(ce);d(Oe,()=>xe,(R,U)=>{U(R,{children:(j,Se)=>{m();var b=v();te(()=>ue(b,fe+1+(r(L)-1)*S)),t(j,b)},$$slots:{default:!0}})});var T=o(Oe,2);d(T,()=>xe,(R,U)=>{U(R,{children:(j,Se)=>{m();var b=v();te(()=>ue(b,r(l).name)),t(j,b)},$$slots:{default:!0}})});var k=o(T,2);d(k,()=>xe,(R,U)=>{U(R,{children:(j,Se)=>{m();var b=v();te(()=>ue(b,r(l).price)),t(j,b)},$$slots:{default:!0}})});var q=o(k,2);d(q,()=>xe,(R,U)=>{U(R,{children:(j,Se)=>{var b=Rt();b.__click=()=>{const Te=window.open();if(Te){const ke=`<img src="${rt+r(l).image}" alt="${r(l).name}" />`;Te.document.write(ke),Te.document.title=r(l).name}};var pe=_(b);g(b),te(()=>{Ze(pe,"src",rt+r(l).image),Ze(pe,"alt",r(l).name)}),t(j,b)},$$slots:{default:!0}})});var Z=o(q,2);d(Z,()=>xe,(R,U)=>{U(R,{children:(j,Se)=>{Mt(j,{class:"text-right",get disabled(){return n().isPending},get checked(){return r(l).active},onclick:()=>n().mutate({id:r(l)._id,permanent:!1})})},$$slots:{default:!0}})});var I=o(Z,2);d(I,()=>xe,(R,U)=>{U(R,{class:"gap-4 flex items-center",children:(j,Se)=>{var b=Kt(),pe=f(b);pe.__click=[Ut,ae,M,l];var Te=_(pe);we(Te,{icon:"basil:edit-outline",class:"hover:text-red-500 text-xl"}),g(pe);var ke=o(pe,2);ke.__click=[jt,$,oe,l];var dt=_(ke);we(dt,{icon:"mingcute:delete-2-fill",class:"hover:text-red-500 text-xl"}),g(ke),t(j,b)},$$slots:{default:!0}})}),t(ge,ce)},$$slots:{default:!0}})}),t(x,G)}),t(a,y)},$$slots:{default:!0}})}),t(c,Y)},$$slots:{default:!0}})});var Le=o(Ee,2);d(Le,()=>wt,(s,h)=>{h(s,{controlledOpen:!0,get open(){return r($)},onOpenChange:c=>z($,re(c)),children:(c,ne)=>{var Y=ee(),me=f(Y);d(me,()=>yt,(le,ve)=>{ve(le,{children:($e,ze)=>{var w=Bt(),e=f(w);d(e,()=>Dt,(u,x)=>{x(u,{class:"text-center",children:(l,fe)=>{var G=ee(),de=f(G);d(de,()=>St,(J,_e)=>{_e(J,{class:"text-center",children:(ge,Ce)=>{m();var ce=v("Do you want to delete this Dipping ?");t(ge,ce)},$$slots:{default:!0}})}),t(l,G)},$$slots:{default:!0}})});var a=o(e,2),i=_(a);Qe(i,{class:"bg-red-500 text-white font-bold w-full hover:bg-red-400",onclick:()=>n().mutate({id:r(oe),permanent:!0}),children:(u,x)=>{m();var l=v("Yes");t(u,l)},$$slots:{default:!0}});var y=o(i,2);Qe(y,{class:"text-white font-bold w-full",onclick:()=>z($,!1),children:(u,x)=>{m();var l=v("No");t(u,l)},$$slots:{default:!0}}),g(a),t($e,w)},$$slots:{default:!0}})}),t(c,Y)},$$slots:{default:!0}})});var Ne=o(Le,2);{var De=s=>{var h=Ue(()=>{var c,ne;return((ne=(c=p())==null?void 0:c.data)==null?void 0:ne.total)||0});Pt(s,{get total(){return r(h)},get limit(){return S},get page(){return r(L)},callback:c=>{c!==r(L)&&(z(L,re(c)),p().refetch())}})};Pe(Ne,s=>{var h,c;!p().isLoading&&((c=(h=p())==null?void 0:h.data)==null?void 0:c.total)>0&&s(De)})}g(K),g(V),t(B,V),He(),E()}bt(["click"]);var Ht=D('<meta name="description" content="dashboard for kings chic.">'),Vt=D('<!> <span class="ml-2">Dippings List</span>',1),Wt=D('<!> <span class="ml-2"> </span>',1),Yt=D("<!> <!>",1),Gt=D("<!> <!> <!>",1);function qr(B,M){Xe(M,!1);const[P,E]=Ve(),p=()=>X(Re,"$dippingStore",P);vt(),mt(n=>{var ae=Ht();ut.title="Dashboard | Manager - Manage Dippings",t(n,ae)}),$t(B,{get value(){return p().mode},class:"w-full p-4",onValueChange:n=>{We(`/hidden-admin-base-007/dashboard/dippings?mode=${n}`),it(Re,{name:"",id:"",price:"0",mode:n})},children:(n,ae)=>{var C=Gt(),L=f(C);It(L,{children:($,oe)=>{var O=Yt(),H=f(O);at(H,{value:"list",class:"flex items-center",children:(ie,V)=>{var K=Vt(),N=f(K);we(N,{class:"w-4 h-4",icon:"fluent:food-pizza-20-filled"}),m(2),t(ie,K)},$$slots:{default:!0}});var se=o(H,2);at(se,{value:"create",children:(ie,V)=>{var K=Wt(),N=f(K);we(N,{class:"w-4 h-4",icon:"fluent:square-add-16-regular"});var Q=o(N,2),W=_(Q);g(Q),te(()=>ue(W,`${(p().mode=="create"&&p().id?"Edit":"Create")??""} Dipping`)),t(ie,K)},$$slots:{default:!0}}),t($,O)},$$slots:{default:!0}});var S=o(L,2);ot(S,{value:"list",children:($,oe)=>{Xt($,{dippingStore:Re})},$$slots:{default:!0}});var F=o(S,2);ot(F,{value:"create",children:($,oe)=>{Ct($,{dippingStore:Re})},$$slots:{default:!0}}),t(n,C)},$$slots:{default:!0}}),He(),E()}export{qr as component};
